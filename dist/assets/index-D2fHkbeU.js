function Mv(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ju(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Ep={exports:{}},pl={},Mp={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wi=Symbol.for("react.element"),Dv=Symbol.for("react.portal"),Tv=Symbol.for("react.fragment"),Rv=Symbol.for("react.strict_mode"),Ov=Symbol.for("react.profiler"),Iv=Symbol.for("react.provider"),Av=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),Lv=Symbol.for("react.suspense"),Fv=Symbol.for("react.memo"),Uv=Symbol.for("react.lazy"),om=Symbol.iterator;function zv(e){return e===null||typeof e!="object"?null:(e=om&&e[om]||e["@@iterator"],typeof e=="function"?e:null)}var Pp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dp=Object.assign,Tp={};function ra(e,t,r){this.props=e,this.context=t,this.refs=Tp,this.updater=r||Pp}ra.prototype.isReactComponent={};ra.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ra.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rp(){}Rp.prototype=ra.prototype;function Nu(e,t,r){this.props=e,this.context=t,this.refs=Tp,this.updater=r||Pp}var _u=Nu.prototype=new Rp;_u.constructor=Nu;Dp(_u,ra.prototype);_u.isPureReactComponent=!0;var lm=Array.isArray,Op=Object.prototype.hasOwnProperty,ku={current:null},Ip={key:!0,ref:!0,__self:!0,__source:!0};function Ap(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Op.call(t,n)&&!Ip.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:wi,type:e,key:i,ref:o,props:a,_owner:ku.current}}function Bv(e,t){return{$$typeof:wi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Su(e){return typeof e=="object"&&e!==null&&e.$$typeof===wi}function Hv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var cm=/\/+/g;function cc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Hv(""+e.key):t.toString(36)}function uo(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case wi:case Dv:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+cc(o,0):n,lm(a)?(r="",e!=null&&(r=e.replace(cm,"$&/")+"/"),uo(a,t,r,"",function(d){return d})):a!=null&&(Su(a)&&(a=Bv(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(cm,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",lm(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+cc(i,l);o+=uo(i,t,r,c,a)}else if(c=zv(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+cc(i,l++),o+=uo(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ri(e,t,r){if(e==null)return e;var n=[],a=0;return uo(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Wv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xt={current:null},ho={transition:null},Vv={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:ho,ReactCurrentOwner:ku};function $p(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Ri,forEach:function(e,t,r){Ri(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ri(e,function(){t++}),t},toArray:function(e){return Ri(e,function(t){return t})||[]},only:function(e){if(!Su(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=ra;me.Fragment=Tv;me.Profiler=Ov;me.PureComponent=Nu;me.StrictMode=Rv;me.Suspense=Lv;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vv;me.act=$p;me.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Dp({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=ku.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Op.call(t,c)&&!Ip.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:wi,type:e.type,key:a,ref:i,props:n,_owner:o}};me.createContext=function(e){return e={$$typeof:Av,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Iv,_context:e},e.Consumer=e};me.createElement=Ap;me.createFactory=function(e){var t=Ap.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:$v,render:e}};me.isValidElement=Su;me.lazy=function(e){return{$$typeof:Uv,_payload:{_status:-1,_result:e},_init:Wv}};me.memo=function(e,t){return{$$typeof:Fv,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=ho.transition;ho.transition={};try{e()}finally{ho.transition=t}};me.unstable_act=$p;me.useCallback=function(e,t){return xt.current.useCallback(e,t)};me.useContext=function(e){return xt.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return xt.current.useDeferredValue(e)};me.useEffect=function(e,t){return xt.current.useEffect(e,t)};me.useId=function(){return xt.current.useId()};me.useImperativeHandle=function(e,t,r){return xt.current.useImperativeHandle(e,t,r)};me.useInsertionEffect=function(e,t){return xt.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return xt.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return xt.current.useMemo(e,t)};me.useReducer=function(e,t,r){return xt.current.useReducer(e,t,r)};me.useRef=function(e){return xt.current.useRef(e)};me.useState=function(e){return xt.current.useState(e)};me.useSyncExternalStore=function(e,t,r){return xt.current.useSyncExternalStore(e,t,r)};me.useTransition=function(){return xt.current.useTransition()};me.version="18.3.1";Mp.exports=me;var m=Mp.exports;const We=ju(m),Lp=Mv({__proto__:null,default:We},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv=m,Gv=Symbol.for("react.element"),Yv=Symbol.for("react.fragment"),Qv=Object.prototype.hasOwnProperty,Kv=qv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jv={key:!0,ref:!0,__self:!0,__source:!0};function Fp(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Qv.call(t,n)&&!Jv.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Gv,type:e,key:i,ref:o,props:a,_owner:Kv.current}}pl.Fragment=Yv;pl.jsx=Fp;pl.jsxs=Fp;Ep.exports=pl;var s=Ep.exports,Up={exports:{}},Rt={},zp={exports:{}},Bp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,T){var $=D.length;D.push(T);e:for(;0<$;){var U=$-1>>>1,E=D[U];if(0<a(E,T))D[U]=T,D[$]=E,$=U;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var T=D[0],$=D.pop();if($!==T){D[0]=$;e:for(var U=0,E=D.length,q=E>>>1;U<q;){var X=2*(U+1)-1,J=D[X],L=X+1,F=D[L];if(0>a(J,$))L<E&&0>a(F,J)?(D[U]=F,D[L]=$,U=L):(D[U]=J,D[X]=$,U=X);else if(L<E&&0>a(F,$))D[U]=F,D[L]=$,U=L;else break e}}return T}function a(D,T){var $=D.sortIndex-T.sortIndex;return $!==0?$:D.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,p=null,y=3,x=!1,b=!1,f=!1,g=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var T=r(d);T!==null;){if(T.callback===null)n(d);else if(T.startTime<=D)n(d),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(d)}}function j(D){if(f=!1,w(D),!b)if(r(c)!==null)b=!0,S(N);else{var T=r(d);T!==null&&z(j,T.startTime-D)}}function N(D,T){b=!1,f&&(f=!1,h(C),C=-1),x=!0;var $=y;try{for(w(T),p=r(c);p!==null&&(!(p.expirationTime>T)||D&&!O());){var U=p.callback;if(typeof U=="function"){p.callback=null,y=p.priorityLevel;var E=U(p.expirationTime<=T);T=e.unstable_now(),typeof E=="function"?p.callback=E:p===r(c)&&n(c),w(T)}else n(c);p=r(c)}if(p!==null)var q=!0;else{var X=r(d);X!==null&&z(j,X.startTime-T),q=!1}return q}finally{p=null,y=$,x=!1}}var _=!1,k=null,C=-1,R=5,P=-1;function O(){return!(e.unstable_now()-P<R)}function A(){if(k!==null){var D=e.unstable_now();P=D;var T=!0;try{T=k(!0,D)}finally{T?V():(_=!1,k=null)}}else _=!1}var V;if(typeof v=="function")V=function(){v(A)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,W=Q.port2;Q.port1.onmessage=A,V=function(){W.postMessage(null)}}else V=function(){g(A,0)};function S(D){k=D,_||(_=!0,V())}function z(D,T){C=g(function(){D(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,S(N))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(y){case 1:case 2:case 3:var T=3;break;default:T=y}var $=y;y=T;try{return D()}finally{y=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,T){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=y;y=D;try{return T()}finally{y=$}},e.unstable_scheduleCallback=function(D,T,$){var U=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?U+$:U):$=U,D){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=$+E,D={id:u++,callback:T,priorityLevel:D,startTime:$,expirationTime:E,sortIndex:-1},$>U?(D.sortIndex=$,t(d,D),r(c)===null&&D===r(d)&&(f?(h(C),C=-1):f=!0,z(j,$-U))):(D.sortIndex=E,t(c,D),b||x||(b=!0,S(N))),D},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(D){var T=y;return function(){var $=y;y=T;try{return D.apply(this,arguments)}finally{y=$}}}})(Bp);zp.exports=Bp;var Xv=zp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv=m,Dt=Xv;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hp=new Set,Ja={};function Zn(e,t){Bs(e,t),Bs(e+"Capture",t)}function Bs(e,t){for(Ja[e]=t,e=0;e<t.length;e++)Hp.add(t[e])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),td=Object.prototype.hasOwnProperty,ew=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dm={},um={};function tw(e){return td.call(um,e)?!0:td.call(dm,e)?!1:ew.test(e)?um[e]=!0:(dm[e]=!0,!1)}function rw(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nw(e,t,r,n){if(t===null||typeof t>"u"||rw(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cu=/[\-:]([a-z])/g;function Eu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cu,Eu);ot[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cu,Eu);ot[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cu,Eu);ot[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mu(e,t,r,n){var a=ot.hasOwnProperty(t)?ot[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nw(t,r,a,n)&&(r=null),n||a===null?tw(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Fr=Zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oi=Symbol.for("react.element"),ys=Symbol.for("react.portal"),vs=Symbol.for("react.fragment"),Pu=Symbol.for("react.strict_mode"),rd=Symbol.for("react.profiler"),Wp=Symbol.for("react.provider"),Vp=Symbol.for("react.context"),Du=Symbol.for("react.forward_ref"),nd=Symbol.for("react.suspense"),sd=Symbol.for("react.suspense_list"),Tu=Symbol.for("react.memo"),Kr=Symbol.for("react.lazy"),qp=Symbol.for("react.offscreen"),hm=Symbol.iterator;function ga(e){return e===null||typeof e!="object"?null:(e=hm&&e[hm]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,dc;function Ra(e){if(dc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);dc=t&&t[1]||""}return`
`+dc+e}var uc=!1;function hc(e,t){if(!e||uc)return"";uc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{uc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ra(e):""}function sw(e){switch(e.tag){case 5:return Ra(e.type);case 16:return Ra("Lazy");case 13:return Ra("Suspense");case 19:return Ra("SuspenseList");case 0:case 2:case 15:return e=hc(e.type,!1),e;case 11:return e=hc(e.type.render,!1),e;case 1:return e=hc(e.type,!0),e;default:return""}}function ad(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vs:return"Fragment";case ys:return"Portal";case rd:return"Profiler";case Pu:return"StrictMode";case nd:return"Suspense";case sd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Vp:return(e.displayName||"Context")+".Consumer";case Wp:return(e._context.displayName||"Context")+".Provider";case Du:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Tu:return t=e.displayName||null,t!==null?t:ad(e.type)||"Memo";case Kr:t=e._payload,e=e._init;try{return ad(e(t))}catch{}}return null}function aw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ad(t);case 8:return t===Pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iw(e){var t=Gp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ii(e){e._valueTracker||(e._valueTracker=iw(e))}function Yp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Gp(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Mo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function id(e,t){var r=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function mm(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=gn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qp(e,t){t=t.checked,t!=null&&Mu(e,"checked",t,!1)}function od(e,t){Qp(e,t);var r=gn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ld(e,t.type,r):t.hasOwnProperty("defaultValue")&&ld(e,t.type,gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fm(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ld(e,t,r){(t!=="number"||Mo(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Oa=Array.isArray;function Ds(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+gn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function cd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pm(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(K(92));if(Oa(r)){if(1<r.length)throw Error(K(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:gn(r)}}function Kp(e,t){var r=gn(t.value),n=gn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function xm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Jp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Jp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ai,Xp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ai=Ai||document.createElement("div"),Ai.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ai.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xa(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ow=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(e){ow.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fa[t]=Fa[e]})});function Zp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fa.hasOwnProperty(e)&&Fa[e]?(""+t).trim():t+"px"}function ex(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Zp(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var lw=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ud(e,t){if(t){if(lw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function hd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=null;function Ru(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fd=null,Ts=null,Rs=null;function gm(e){if(e=Ni(e)){if(typeof fd!="function")throw Error(K(280));var t=e.stateNode;t&&(t=wl(t),fd(e.stateNode,e.type,t))}}function tx(e){Ts?Rs?Rs.push(e):Rs=[e]:Ts=e}function rx(){if(Ts){var e=Ts,t=Rs;if(Rs=Ts=null,gm(e),t)for(e=0;e<t.length;e++)gm(t[e])}}function nx(e,t){return e(t)}function sx(){}var mc=!1;function ax(e,t,r){if(mc)return e(t,r);mc=!0;try{return nx(e,t,r)}finally{mc=!1,(Ts!==null||Rs!==null)&&(sx(),rx())}}function Za(e,t){var r=e.stateNode;if(r===null)return null;var n=wl(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(K(231,t,typeof r));return r}var pd=!1;if(Cr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){pd=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{pd=!1}function cw(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Ua=!1,Po=null,Do=!1,xd=null,dw={onError:function(e){Ua=!0,Po=e}};function uw(e,t,r,n,a,i,o,l,c){Ua=!1,Po=null,cw.apply(dw,arguments)}function hw(e,t,r,n,a,i,o,l,c){if(uw.apply(this,arguments),Ua){if(Ua){var d=Po;Ua=!1,Po=null}else throw Error(K(198));Do||(Do=!0,xd=d)}}function es(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ix(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ym(e){if(es(e)!==e)throw Error(K(188))}function mw(e){var t=e.alternate;if(!t){if(t=es(e),t===null)throw Error(K(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return ym(a),e;if(i===n)return ym(a),t;i=i.sibling}throw Error(K(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(K(189))}}if(r.alternate!==n)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?e:t}function ox(e){return e=mw(e),e!==null?lx(e):null}function lx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lx(e);if(t!==null)return t;e=e.sibling}return null}var cx=Dt.unstable_scheduleCallback,vm=Dt.unstable_cancelCallback,fw=Dt.unstable_shouldYield,pw=Dt.unstable_requestPaint,Le=Dt.unstable_now,xw=Dt.unstable_getCurrentPriorityLevel,Ou=Dt.unstable_ImmediatePriority,dx=Dt.unstable_UserBlockingPriority,To=Dt.unstable_NormalPriority,gw=Dt.unstable_LowPriority,ux=Dt.unstable_IdlePriority,xl=null,cr=null;function yw(e){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(xl,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:bw,vw=Math.log,ww=Math.LN2;function bw(e){return e>>>=0,e===0?32:31-(vw(e)/ww|0)|0}var $i=64,Li=4194304;function Ia(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ro(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Ia(l):(i&=o,i!==0&&(n=Ia(i)))}else o=r&~a,o!==0?n=Ia(o):i!==0&&(n=Ia(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Kt(t),a=1<<r,n|=e[r],t&=~a;return n}function jw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nw(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Kt(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=jw(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function gd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hx(){var e=$i;return $i<<=1,!($i&4194240)&&($i=64),e}function fc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=r}function _w(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Kt(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Iu(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Kt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ve=0;function mx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fx,Au,px,xx,gx,yd=!1,Fi=[],on=null,ln=null,cn=null,ei=new Map,ti=new Map,Zr=[],kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wm(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(t.pointerId)}}function va(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ni(t),t!==null&&Au(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Sw(e,t,r,n,a){switch(t){case"focusin":return on=va(on,e,t,r,n,a),!0;case"dragenter":return ln=va(ln,e,t,r,n,a),!0;case"mouseover":return cn=va(cn,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return ei.set(i,va(ei.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ti.set(i,va(ti.get(i)||null,e,t,r,n,a)),!0}return!1}function yx(e){var t=Ln(e.target);if(t!==null){var r=es(t);if(r!==null){if(t=r.tag,t===13){if(t=ix(r),t!==null){e.blockedOn=t,gx(e.priority,function(){px(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);md=n,r.target.dispatchEvent(n),md=null}else return t=Ni(r),t!==null&&Au(t),e.blockedOn=r,!1;t.shift()}return!0}function bm(e,t,r){mo(e)&&r.delete(t)}function Cw(){yd=!1,on!==null&&mo(on)&&(on=null),ln!==null&&mo(ln)&&(ln=null),cn!==null&&mo(cn)&&(cn=null),ei.forEach(bm),ti.forEach(bm)}function wa(e,t){e.blockedOn===t&&(e.blockedOn=null,yd||(yd=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,Cw)))}function ri(e){function t(a){return wa(a,e)}if(0<Fi.length){wa(Fi[0],e);for(var r=1;r<Fi.length;r++){var n=Fi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(on!==null&&wa(on,e),ln!==null&&wa(ln,e),cn!==null&&wa(cn,e),ei.forEach(t),ti.forEach(t),r=0;r<Zr.length;r++)n=Zr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Zr.length&&(r=Zr[0],r.blockedOn===null);)yx(r),r.blockedOn===null&&Zr.shift()}var Os=Fr.ReactCurrentBatchConfig,Oo=!0;function Ew(e,t,r,n){var a=ve,i=Os.transition;Os.transition=null;try{ve=1,$u(e,t,r,n)}finally{ve=a,Os.transition=i}}function Mw(e,t,r,n){var a=ve,i=Os.transition;Os.transition=null;try{ve=4,$u(e,t,r,n)}finally{ve=a,Os.transition=i}}function $u(e,t,r,n){if(Oo){var a=vd(e,t,r,n);if(a===null)_c(e,t,n,Io,r),wm(e,n);else if(Sw(a,e,t,r,n))n.stopPropagation();else if(wm(e,n),t&4&&-1<kw.indexOf(e)){for(;a!==null;){var i=Ni(a);if(i!==null&&fx(i),i=vd(e,t,r,n),i===null&&_c(e,t,n,Io,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else _c(e,t,n,null,r)}}var Io=null;function vd(e,t,r,n){if(Io=null,e=Ru(n),e=Ln(e),e!==null)if(t=es(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ix(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Io=e,null}function vx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xw()){case Ou:return 1;case dx:return 4;case To:case gw:return 16;case ux:return 536870912;default:return 16}default:return 16}}var nn=null,Lu=null,fo=null;function wx(){if(fo)return fo;var e,t=Lu,r=t.length,n,a="value"in nn?nn.value:nn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return fo=a.slice(e,1<n?1-n:void 0)}function po(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ui(){return!0}function jm(){return!1}function Ot(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ui:jm,this.isPropagationStopped=jm,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),t}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fu=Ot(na),ji=Oe({},na,{view:0,detail:0}),Pw=Ot(ji),pc,xc,ba,gl=Oe({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ba&&(ba&&e.type==="mousemove"?(pc=e.screenX-ba.screenX,xc=e.screenY-ba.screenY):xc=pc=0,ba=e),pc)},movementY:function(e){return"movementY"in e?e.movementY:xc}}),Nm=Ot(gl),Dw=Oe({},gl,{dataTransfer:0}),Tw=Ot(Dw),Rw=Oe({},ji,{relatedTarget:0}),gc=Ot(Rw),Ow=Oe({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),Iw=Ot(Ow),Aw=Oe({},na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$w=Ot(Aw),Lw=Oe({},na,{data:0}),_m=Ot(Lw),Fw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zw[e])?!!t[e]:!1}function Uu(){return Bw}var Hw=Oe({},ji,{key:function(e){if(e.key){var t=Fw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=po(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uu,charCode:function(e){return e.type==="keypress"?po(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?po(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ww=Ot(Hw),Vw=Oe({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),km=Ot(Vw),qw=Oe({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uu}),Gw=Ot(qw),Yw=Oe({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qw=Ot(Yw),Kw=Oe({},gl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jw=Ot(Kw),Xw=[9,13,27,32],zu=Cr&&"CompositionEvent"in window,za=null;Cr&&"documentMode"in document&&(za=document.documentMode);var Zw=Cr&&"TextEvent"in window&&!za,bx=Cr&&(!zu||za&&8<za&&11>=za),Sm=" ",Cm=!1;function jx(e,t){switch(e){case"keyup":return Xw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ws=!1;function eb(e,t){switch(e){case"compositionend":return Nx(t);case"keypress":return t.which!==32?null:(Cm=!0,Sm);case"textInput":return e=t.data,e===Sm&&Cm?null:e;default:return null}}function tb(e,t){if(ws)return e==="compositionend"||!zu&&jx(e,t)?(e=wx(),fo=Lu=nn=null,ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bx&&t.locale!=="ko"?null:t.data;default:return null}}var rb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rb[e.type]:t==="textarea"}function _x(e,t,r,n){tx(n),t=Ao(t,"onChange"),0<t.length&&(r=new Fu("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ba=null,ni=null;function nb(e){Ix(e,0)}function yl(e){var t=Ns(e);if(Yp(t))return e}function sb(e,t){if(e==="change")return t}var kx=!1;if(Cr){var yc;if(Cr){var vc="oninput"in document;if(!vc){var Mm=document.createElement("div");Mm.setAttribute("oninput","return;"),vc=typeof Mm.oninput=="function"}yc=vc}else yc=!1;kx=yc&&(!document.documentMode||9<document.documentMode)}function Pm(){Ba&&(Ba.detachEvent("onpropertychange",Sx),ni=Ba=null)}function Sx(e){if(e.propertyName==="value"&&yl(ni)){var t=[];_x(t,ni,e,Ru(e)),ax(nb,t)}}function ab(e,t,r){e==="focusin"?(Pm(),Ba=t,ni=r,Ba.attachEvent("onpropertychange",Sx)):e==="focusout"&&Pm()}function ib(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yl(ni)}function ob(e,t){if(e==="click")return yl(t)}function lb(e,t){if(e==="input"||e==="change")return yl(t)}function cb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:cb;function si(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!td.call(t,a)||!Xt(e[a],t[a]))return!1}return!0}function Dm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tm(e,t){var r=Dm(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Dm(r)}}function Cx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ex(){for(var e=window,t=Mo();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Mo(e.document)}return t}function Bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function db(e){var t=Ex(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Cx(r.ownerDocument.documentElement,r)){if(n!==null&&Bu(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Tm(r,i);var o=Tm(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ub=Cr&&"documentMode"in document&&11>=document.documentMode,bs=null,wd=null,Ha=null,bd=!1;function Rm(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bd||bs==null||bs!==Mo(n)||(n=bs,"selectionStart"in n&&Bu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ha&&si(Ha,n)||(Ha=n,n=Ao(wd,"onSelect"),0<n.length&&(t=new Fu("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=bs)))}function zi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var js={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionend:zi("Transition","TransitionEnd")},wc={},Mx={};Cr&&(Mx=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function vl(e){if(wc[e])return wc[e];if(!js[e])return e;var t=js[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Mx)return wc[e]=t[r];return e}var Px=vl("animationend"),Dx=vl("animationiteration"),Tx=vl("animationstart"),Rx=vl("transitionend"),Ox=new Map,Om="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(e,t){Ox.set(e,t),Zn(t,[e])}for(var bc=0;bc<Om.length;bc++){var jc=Om[bc],hb=jc.toLowerCase(),mb=jc[0].toUpperCase()+jc.slice(1);jn(hb,"on"+mb)}jn(Px,"onAnimationEnd");jn(Dx,"onAnimationIteration");jn(Tx,"onAnimationStart");jn("dblclick","onDoubleClick");jn("focusin","onFocus");jn("focusout","onBlur");jn(Rx,"onTransitionEnd");Bs("onMouseEnter",["mouseout","mouseover"]);Bs("onMouseLeave",["mouseout","mouseover"]);Bs("onPointerEnter",["pointerout","pointerover"]);Bs("onPointerLeave",["pointerout","pointerover"]);Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function Im(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,hw(n,t,void 0,e),e.currentTarget=null}function Ix(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Im(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Im(a,l,d),i=c}}}if(Do)throw e=xd,Do=!1,xd=null,e}function ke(e,t){var r=t[Sd];r===void 0&&(r=t[Sd]=new Set);var n=e+"__bubble";r.has(n)||(Ax(t,e,2,!1),r.add(n))}function Nc(e,t,r){var n=0;t&&(n|=4),Ax(r,e,n,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function ai(e){if(!e[Bi]){e[Bi]=!0,Hp.forEach(function(r){r!=="selectionchange"&&(fb.has(r)||Nc(r,!1,e),Nc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bi]||(t[Bi]=!0,Nc("selectionchange",!1,t))}}function Ax(e,t,r,n){switch(vx(t)){case 1:var a=Ew;break;case 4:a=Mw;break;default:a=$u}r=a.bind(null,t,r,e),a=void 0,!pd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function _c(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ln(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}ax(function(){var d=i,u=Ru(r),p=[];e:{var y=Ox.get(e);if(y!==void 0){var x=Fu,b=e;switch(e){case"keypress":if(po(r)===0)break e;case"keydown":case"keyup":x=Ww;break;case"focusin":b="focus",x=gc;break;case"focusout":b="blur",x=gc;break;case"beforeblur":case"afterblur":x=gc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Tw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Gw;break;case Px:case Dx:case Tx:x=Iw;break;case Rx:x=Qw;break;case"scroll":x=Pw;break;case"wheel":x=Jw;break;case"copy":case"cut":case"paste":x=$w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=km}var f=(t&4)!==0,g=!f&&e==="scroll",h=f?y!==null?y+"Capture":null:y;f=[];for(var v=d,w;v!==null;){w=v;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,h!==null&&(j=Za(v,h),j!=null&&f.push(ii(v,j,w)))),g)break;v=v.return}0<f.length&&(y=new x(y,b,null,r,u),p.push({event:y,listeners:f}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",y&&r!==md&&(b=r.relatedTarget||r.fromElement)&&(Ln(b)||b[Er]))break e;if((x||y)&&(y=u.window===u?u:(y=u.ownerDocument)?y.defaultView||y.parentWindow:window,x?(b=r.relatedTarget||r.toElement,x=d,b=b?Ln(b):null,b!==null&&(g=es(b),b!==g||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=d),x!==b)){if(f=Nm,j="onMouseLeave",h="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(f=km,j="onPointerLeave",h="onPointerEnter",v="pointer"),g=x==null?y:Ns(x),w=b==null?y:Ns(b),y=new f(j,v+"leave",x,r,u),y.target=g,y.relatedTarget=w,j=null,Ln(u)===d&&(f=new f(h,v+"enter",b,r,u),f.target=w,f.relatedTarget=g,j=f),g=j,x&&b)t:{for(f=x,h=b,v=0,w=f;w;w=cs(w))v++;for(w=0,j=h;j;j=cs(j))w++;for(;0<v-w;)f=cs(f),v--;for(;0<w-v;)h=cs(h),w--;for(;v--;){if(f===h||h!==null&&f===h.alternate)break t;f=cs(f),h=cs(h)}f=null}else f=null;x!==null&&Am(p,y,x,f,!1),b!==null&&g!==null&&Am(p,g,b,f,!0)}}e:{if(y=d?Ns(d):window,x=y.nodeName&&y.nodeName.toLowerCase(),x==="select"||x==="input"&&y.type==="file")var N=sb;else if(Em(y))if(kx)N=lb;else{N=ib;var _=ab}else(x=y.nodeName)&&x.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(N=ob);if(N&&(N=N(e,d))){_x(p,N,r,u);break e}_&&_(e,y,d),e==="focusout"&&(_=y._wrapperState)&&_.controlled&&y.type==="number"&&ld(y,"number",y.value)}switch(_=d?Ns(d):window,e){case"focusin":(Em(_)||_.contentEditable==="true")&&(bs=_,wd=d,Ha=null);break;case"focusout":Ha=wd=bs=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,Rm(p,r,u);break;case"selectionchange":if(ub)break;case"keydown":case"keyup":Rm(p,r,u)}var k;if(zu)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ws?jx(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(bx&&r.locale!=="ko"&&(ws||C!=="onCompositionStart"?C==="onCompositionEnd"&&ws&&(k=wx()):(nn=u,Lu="value"in nn?nn.value:nn.textContent,ws=!0)),_=Ao(d,C),0<_.length&&(C=new _m(C,e,null,r,u),p.push({event:C,listeners:_}),k?C.data=k:(k=Nx(r),k!==null&&(C.data=k)))),(k=Zw?eb(e,r):tb(e,r))&&(d=Ao(d,"onBeforeInput"),0<d.length&&(u=new _m("onBeforeInput","beforeinput",null,r,u),p.push({event:u,listeners:d}),u.data=k))}Ix(p,t)})}function ii(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ao(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Za(e,r),i!=null&&n.unshift(ii(e,i,a)),i=Za(e,t),i!=null&&n.push(ii(e,i,a))),e=e.return}return n}function cs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Am(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Za(r,i),c!=null&&o.unshift(ii(r,c,l))):a||(c=Za(r,i),c!=null&&o.push(ii(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var pb=/\r\n?/g,xb=/\u0000|\uFFFD/g;function $m(e){return(typeof e=="string"?e:""+e).replace(pb,`
`).replace(xb,"")}function Hi(e,t,r){if(t=$m(t),$m(e)!==t&&r)throw Error(K(425))}function $o(){}var jd=null,Nd=null;function _d(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,gb=typeof clearTimeout=="function"?clearTimeout:void 0,Lm=typeof Promise=="function"?Promise:void 0,yb=typeof queueMicrotask=="function"?queueMicrotask:typeof Lm<"u"?function(e){return Lm.resolve(null).then(e).catch(vb)}:kd;function vb(e){setTimeout(function(){throw e})}function kc(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),ri(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);ri(t)}function dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var sa=Math.random().toString(36).slice(2),or="__reactFiber$"+sa,oi="__reactProps$"+sa,Er="__reactContainer$"+sa,Sd="__reactEvents$"+sa,wb="__reactListeners$"+sa,bb="__reactHandles$"+sa;function Ln(e){var t=e[or];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Er]||r[or]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Fm(e);e!==null;){if(r=e[or])return r;e=Fm(e)}return t}e=r,r=e.parentNode}return null}function Ni(e){return e=e[or]||e[Er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ns(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function wl(e){return e[oi]||null}var Cd=[],_s=-1;function Nn(e){return{current:e}}function Ce(e){0>_s||(e.current=Cd[_s],Cd[_s]=null,_s--)}function Ne(e,t){_s++,Cd[_s]=e.current,e.current=t}var yn={},ut=Nn(yn),jt=Nn(!1),Hn=yn;function Hs(e,t){var r=e.type.contextTypes;if(!r)return yn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Nt(e){return e=e.childContextTypes,e!=null}function Lo(){Ce(jt),Ce(ut)}function Um(e,t,r){if(ut.current!==yn)throw Error(K(168));Ne(ut,t),Ne(jt,r)}function $x(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(K(108,aw(e)||"Unknown",a));return Oe({},r,n)}function Fo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yn,Hn=ut.current,Ne(ut,e),Ne(jt,jt.current),!0}function zm(e,t,r){var n=e.stateNode;if(!n)throw Error(K(169));r?(e=$x(e,t,Hn),n.__reactInternalMemoizedMergedChildContext=e,Ce(jt),Ce(ut),Ne(ut,e)):Ce(jt),Ne(jt,r)}var Nr=null,bl=!1,Sc=!1;function Lx(e){Nr===null?Nr=[e]:Nr.push(e)}function jb(e){bl=!0,Lx(e)}function _n(){if(!Sc&&Nr!==null){Sc=!0;var e=0,t=ve;try{var r=Nr;for(ve=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Nr=null,bl=!1}catch(a){throw Nr!==null&&(Nr=Nr.slice(e+1)),cx(Ou,_n),a}finally{ve=t,Sc=!1}}return null}var ks=[],Ss=0,Uo=null,zo=0,At=[],$t=0,Wn=null,_r=1,kr="";function Tn(e,t){ks[Ss++]=zo,ks[Ss++]=Uo,Uo=e,zo=t}function Fx(e,t,r){At[$t++]=_r,At[$t++]=kr,At[$t++]=Wn,Wn=e;var n=_r;e=kr;var a=32-Kt(n)-1;n&=~(1<<a),r+=1;var i=32-Kt(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,_r=1<<32-Kt(t)+a|r<<a|n,kr=i+e}else _r=1<<i|r<<a|n,kr=e}function Hu(e){e.return!==null&&(Tn(e,1),Fx(e,1,0))}function Wu(e){for(;e===Uo;)Uo=ks[--Ss],ks[Ss]=null,zo=ks[--Ss],ks[Ss]=null;for(;e===Wn;)Wn=At[--$t],At[$t]=null,kr=At[--$t],At[$t]=null,_r=At[--$t],At[$t]=null}var Mt=null,Et=null,Pe=!1,Qt=null;function Ux(e,t){var r=Lt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Bm(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,Et=dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,Et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Wn!==null?{id:_r,overflow:kr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Lt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Mt=e,Et=null,!0):!1;default:return!1}}function Ed(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Md(e){if(Pe){var t=Et;if(t){var r=t;if(!Bm(e,t)){if(Ed(e))throw Error(K(418));t=dn(r.nextSibling);var n=Mt;t&&Bm(e,t)?Ux(n,r):(e.flags=e.flags&-4097|2,Pe=!1,Mt=e)}}else{if(Ed(e))throw Error(K(418));e.flags=e.flags&-4097|2,Pe=!1,Mt=e}}}function Hm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function Wi(e){if(e!==Mt)return!1;if(!Pe)return Hm(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_d(e.type,e.memoizedProps)),t&&(t=Et)){if(Ed(e))throw zx(),Error(K(418));for(;t;)Ux(e,t),t=dn(t.nextSibling)}if(Hm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Et=dn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Et=null}}else Et=Mt?dn(e.stateNode.nextSibling):null;return!0}function zx(){for(var e=Et;e;)e=dn(e.nextSibling)}function Ws(){Et=Mt=null,Pe=!1}function Vu(e){Qt===null?Qt=[e]:Qt.push(e)}var Nb=Fr.ReactCurrentBatchConfig;function ja(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var n=r.stateNode}if(!n)throw Error(K(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,e))}return e}function Vi(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wm(e){var t=e._init;return t(e._payload)}function Bx(e){function t(h,v){if(e){var w=h.deletions;w===null?(h.deletions=[v],h.flags|=16):w.push(v)}}function r(h,v){if(!e)return null;for(;v!==null;)t(h,v),v=v.sibling;return null}function n(h,v){for(h=new Map;v!==null;)v.key!==null?h.set(v.key,v):h.set(v.index,v),v=v.sibling;return h}function a(h,v){return h=fn(h,v),h.index=0,h.sibling=null,h}function i(h,v,w){return h.index=w,e?(w=h.alternate,w!==null?(w=w.index,w<v?(h.flags|=2,v):w):(h.flags|=2,v)):(h.flags|=1048576,v)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,v,w,j){return v===null||v.tag!==6?(v=Rc(w,h.mode,j),v.return=h,v):(v=a(v,w),v.return=h,v)}function c(h,v,w,j){var N=w.type;return N===vs?u(h,v,w.props.children,j,w.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Kr&&Wm(N)===v.type)?(j=a(v,w.props),j.ref=ja(h,v,w),j.return=h,j):(j=jo(w.type,w.key,w.props,null,h.mode,j),j.ref=ja(h,v,w),j.return=h,j)}function d(h,v,w,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Oc(w,h.mode,j),v.return=h,v):(v=a(v,w.children||[]),v.return=h,v)}function u(h,v,w,j,N){return v===null||v.tag!==7?(v=Bn(w,h.mode,j,N),v.return=h,v):(v=a(v,w),v.return=h,v)}function p(h,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Rc(""+v,h.mode,w),v.return=h,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Oi:return w=jo(v.type,v.key,v.props,null,h.mode,w),w.ref=ja(h,null,v),w.return=h,w;case ys:return v=Oc(v,h.mode,w),v.return=h,v;case Kr:var j=v._init;return p(h,j(v._payload),w)}if(Oa(v)||ga(v))return v=Bn(v,h.mode,w,null),v.return=h,v;Vi(h,v)}return null}function y(h,v,w,j){var N=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(h,v,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oi:return w.key===N?c(h,v,w,j):null;case ys:return w.key===N?d(h,v,w,j):null;case Kr:return N=w._init,y(h,v,N(w._payload),j)}if(Oa(w)||ga(w))return N!==null?null:u(h,v,w,j,null);Vi(h,w)}return null}function x(h,v,w,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return h=h.get(w)||null,l(v,h,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Oi:return h=h.get(j.key===null?w:j.key)||null,c(v,h,j,N);case ys:return h=h.get(j.key===null?w:j.key)||null,d(v,h,j,N);case Kr:var _=j._init;return x(h,v,w,_(j._payload),N)}if(Oa(j)||ga(j))return h=h.get(w)||null,u(v,h,j,N,null);Vi(v,j)}return null}function b(h,v,w,j){for(var N=null,_=null,k=v,C=v=0,R=null;k!==null&&C<w.length;C++){k.index>C?(R=k,k=null):R=k.sibling;var P=y(h,k,w[C],j);if(P===null){k===null&&(k=R);break}e&&k&&P.alternate===null&&t(h,k),v=i(P,v,C),_===null?N=P:_.sibling=P,_=P,k=R}if(C===w.length)return r(h,k),Pe&&Tn(h,C),N;if(k===null){for(;C<w.length;C++)k=p(h,w[C],j),k!==null&&(v=i(k,v,C),_===null?N=k:_.sibling=k,_=k);return Pe&&Tn(h,C),N}for(k=n(h,k);C<w.length;C++)R=x(k,h,C,w[C],j),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?C:R.key),v=i(R,v,C),_===null?N=R:_.sibling=R,_=R);return e&&k.forEach(function(O){return t(h,O)}),Pe&&Tn(h,C),N}function f(h,v,w,j){var N=ga(w);if(typeof N!="function")throw Error(K(150));if(w=N.call(w),w==null)throw Error(K(151));for(var _=N=null,k=v,C=v=0,R=null,P=w.next();k!==null&&!P.done;C++,P=w.next()){k.index>C?(R=k,k=null):R=k.sibling;var O=y(h,k,P.value,j);if(O===null){k===null&&(k=R);break}e&&k&&O.alternate===null&&t(h,k),v=i(O,v,C),_===null?N=O:_.sibling=O,_=O,k=R}if(P.done)return r(h,k),Pe&&Tn(h,C),N;if(k===null){for(;!P.done;C++,P=w.next())P=p(h,P.value,j),P!==null&&(v=i(P,v,C),_===null?N=P:_.sibling=P,_=P);return Pe&&Tn(h,C),N}for(k=n(h,k);!P.done;C++,P=w.next())P=x(k,h,C,P.value,j),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?C:P.key),v=i(P,v,C),_===null?N=P:_.sibling=P,_=P);return e&&k.forEach(function(A){return t(h,A)}),Pe&&Tn(h,C),N}function g(h,v,w,j){if(typeof w=="object"&&w!==null&&w.type===vs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Oi:e:{for(var N=w.key,_=v;_!==null;){if(_.key===N){if(N=w.type,N===vs){if(_.tag===7){r(h,_.sibling),v=a(_,w.props.children),v.return=h,h=v;break e}}else if(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Kr&&Wm(N)===_.type){r(h,_.sibling),v=a(_,w.props),v.ref=ja(h,_,w),v.return=h,h=v;break e}r(h,_);break}else t(h,_);_=_.sibling}w.type===vs?(v=Bn(w.props.children,h.mode,j,w.key),v.return=h,h=v):(j=jo(w.type,w.key,w.props,null,h.mode,j),j.ref=ja(h,v,w),j.return=h,h=j)}return o(h);case ys:e:{for(_=w.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(h,v.sibling),v=a(v,w.children||[]),v.return=h,h=v;break e}else{r(h,v);break}else t(h,v);v=v.sibling}v=Oc(w,h.mode,j),v.return=h,h=v}return o(h);case Kr:return _=w._init,g(h,v,_(w._payload),j)}if(Oa(w))return b(h,v,w,j);if(ga(w))return f(h,v,w,j);Vi(h,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(h,v.sibling),v=a(v,w),v.return=h,h=v):(r(h,v),v=Rc(w,h.mode,j),v.return=h,h=v),o(h)):r(h,v)}return g}var Vs=Bx(!0),Hx=Bx(!1),Bo=Nn(null),Ho=null,Cs=null,qu=null;function Gu(){qu=Cs=Ho=null}function Yu(e){var t=Bo.current;Ce(Bo),e._currentValue=t}function Pd(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Is(e,t){Ho=e,qu=Cs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(qu!==e)if(e={context:e,memoizedValue:t,next:null},Cs===null){if(Ho===null)throw Error(K(308));Cs=e,Ho.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Fn=null;function Qu(e){Fn===null?Fn=[e]:Fn.push(e)}function Wx(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Qu(t)):(r.next=a.next,a.next=r),t.interleaved=r,Mr(e,n)}function Mr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Jr=!1;function Ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function un(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ge&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Mr(e,r)}return a=n.interleaved,a===null?(t.next=t,Qu(n)):(t.next=a.next,a.next=t),n.interleaved=t,Mr(e,r)}function xo(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Iu(e,r)}}function Vm(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wo(e,t,r,n){var a=e.updateQueue;Jr=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var p=a.baseState;o=0,u=d=c=null,l=i;do{var y=l.lane,x=l.eventTime;if((n&y)===y){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,f=l;switch(y=t,x=r,f.tag){case 1:if(b=f.payload,typeof b=="function"){p=b.call(x,p,y);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=f.payload,y=typeof b=="function"?b.call(x,p,y):b,y==null)break e;p=Oe({},p,y);break e;case 2:Jr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[l]:y.push(l))}else x={eventTime:x,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=x,c=p):u=u.next=x,o|=y;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;y=l,l=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(u===null&&(c=p),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);qn|=o,e.lanes=o,e.memoizedState=p}}function qm(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(K(191,a));a.call(n)}}}var _i={},dr=Nn(_i),li=Nn(_i),ci=Nn(_i);function Un(e){if(e===_i)throw Error(K(174));return e}function Ju(e,t){switch(Ne(ci,t),Ne(li,e),Ne(dr,_i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=dd(t,e)}Ce(dr),Ne(dr,t)}function qs(){Ce(dr),Ce(li),Ce(ci)}function qx(e){Un(ci.current);var t=Un(dr.current),r=dd(t,e.type);t!==r&&(Ne(li,e),Ne(dr,r))}function Xu(e){li.current===e&&(Ce(dr),Ce(li))}var Te=Nn(0);function Vo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cc=[];function Zu(){for(var e=0;e<Cc.length;e++)Cc[e]._workInProgressVersionPrimary=null;Cc.length=0}var go=Fr.ReactCurrentDispatcher,Ec=Fr.ReactCurrentBatchConfig,Vn=0,Re=null,Je=null,tt=null,qo=!1,Wa=!1,di=0,_b=0;function lt(){throw Error(K(321))}function eh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xt(e[r],t[r]))return!1;return!0}function th(e,t,r,n,a,i){if(Vn=i,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,go.current=e===null||e.memoizedState===null?Eb:Mb,e=r(n,a),Wa){i=0;do{if(Wa=!1,di=0,25<=i)throw Error(K(301));i+=1,tt=Je=null,t.updateQueue=null,go.current=Pb,e=r(n,a)}while(Wa)}if(go.current=Go,t=Je!==null&&Je.next!==null,Vn=0,tt=Je=Re=null,qo=!1,t)throw Error(K(300));return e}function rh(){var e=di!==0;return di=0,e}function ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Re.memoizedState=tt=e:tt=tt.next=e,tt}function Ht(){if(Je===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=tt===null?Re.memoizedState:tt.next;if(t!==null)tt=t,Je=e;else{if(e===null)throw Error(K(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},tt===null?Re.memoizedState=tt=e:tt=tt.next=e}return tt}function ui(e,t){return typeof t=="function"?t(e):t}function Mc(e){var t=Ht(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var n=Je,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Vn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=n):c=c.next=p,Re.lanes|=u,qn|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Xt(n,t.memoizedState)||(bt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Re.lanes|=i,qn|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Pc(e){var t=Ht(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Xt(i,t.memoizedState)||(bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Gx(){}function Yx(e,t){var r=Re,n=Ht(),a=t(),i=!Xt(n.memoizedState,a);if(i&&(n.memoizedState=a,bt=!0),n=n.queue,nh(Jx.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||tt!==null&&tt.memoizedState.tag&1){if(r.flags|=2048,hi(9,Kx.bind(null,r,n,a,t),void 0,null),rt===null)throw Error(K(349));Vn&30||Qx(r,t,a)}return a}function Qx(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Kx(e,t,r,n){t.value=r,t.getSnapshot=n,Xx(t)&&Zx(e)}function Jx(e,t,r){return r(function(){Xx(t)&&Zx(e)})}function Xx(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xt(e,r)}catch{return!0}}function Zx(e){var t=Mr(e,1);t!==null&&Jt(t,e,1,-1)}function Gm(e){var t=ir();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:e},t.queue=e,e=e.dispatch=Cb.bind(null,Re,e),[t.memoizedState,e]}function hi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function eg(){return Ht().memoizedState}function yo(e,t,r,n){var a=ir();Re.flags|=e,a.memoizedState=hi(1|t,r,void 0,n===void 0?null:n)}function jl(e,t,r,n){var a=Ht();n=n===void 0?null:n;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,n!==null&&eh(n,o.deps)){a.memoizedState=hi(t,r,i,n);return}}Re.flags|=e,a.memoizedState=hi(1|t,r,i,n)}function Ym(e,t){return yo(8390656,8,e,t)}function nh(e,t){return jl(2048,8,e,t)}function tg(e,t){return jl(4,2,e,t)}function rg(e,t){return jl(4,4,e,t)}function ng(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sg(e,t,r){return r=r!=null?r.concat([e]):null,jl(4,4,ng.bind(null,t,e),r)}function sh(){}function ag(e,t){var r=Ht();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&eh(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ig(e,t){var r=Ht();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&eh(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function og(e,t,r){return Vn&21?(Xt(r,t)||(r=hx(),Re.lanes|=r,qn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=r)}function kb(e,t){var r=ve;ve=r!==0&&4>r?r:4,e(!0);var n=Ec.transition;Ec.transition={};try{e(!1),t()}finally{ve=r,Ec.transition=n}}function lg(){return Ht().memoizedState}function Sb(e,t,r){var n=mn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},cg(e))dg(t,r);else if(r=Wx(e,t,r,n),r!==null){var a=ft();Jt(r,e,n,a),ug(r,t,n)}}function Cb(e,t,r){var n=mn(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(cg(e))dg(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Xt(l,o)){var c=t.interleaved;c===null?(a.next=a,Qu(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Wx(e,t,a,n),r!==null&&(a=ft(),Jt(r,e,n,a),ug(r,t,n))}}function cg(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function dg(e,t){Wa=qo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ug(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Iu(e,r)}}var Go={readContext:Bt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},Eb={readContext:Bt,useCallback:function(e,t){return ir().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:Ym,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,yo(4194308,4,ng.bind(null,t,e),r)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){return yo(4,2,e,t)},useMemo:function(e,t){var r=ir();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ir();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Sb.bind(null,Re,e),[n.memoizedState,e]},useRef:function(e){var t=ir();return e={current:e},t.memoizedState=e},useState:Gm,useDebugValue:sh,useDeferredValue:function(e){return ir().memoizedState=e},useTransition:function(){var e=Gm(!1),t=e[0];return e=kb.bind(null,e[1]),ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Re,a=ir();if(Pe){if(r===void 0)throw Error(K(407));r=r()}else{if(r=t(),rt===null)throw Error(K(349));Vn&30||Qx(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Ym(Jx.bind(null,n,i,e),[e]),n.flags|=2048,hi(9,Kx.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ir(),t=rt.identifierPrefix;if(Pe){var r=kr,n=_r;r=(n&~(1<<32-Kt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=di++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=_b++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mb={readContext:Bt,useCallback:ag,useContext:Bt,useEffect:nh,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:rg,useMemo:ig,useReducer:Mc,useRef:eg,useState:function(){return Mc(ui)},useDebugValue:sh,useDeferredValue:function(e){var t=Ht();return og(t,Je.memoizedState,e)},useTransition:function(){var e=Mc(ui)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Gx,useSyncExternalStore:Yx,useId:lg,unstable_isNewReconciler:!1},Pb={readContext:Bt,useCallback:ag,useContext:Bt,useEffect:nh,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:rg,useMemo:ig,useReducer:Pc,useRef:eg,useState:function(){return Pc(ui)},useDebugValue:sh,useDeferredValue:function(e){var t=Ht();return Je===null?t.memoizedState=e:og(t,Je.memoizedState,e)},useTransition:function(){var e=Pc(ui)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Gx,useSyncExternalStore:Yx,useId:lg,unstable_isNewReconciler:!1};function qt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Dd(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Oe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Nl={isMounted:function(e){return(e=e._reactInternals)?es(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ft(),a=mn(e),i=Sr(n,a);i.payload=t,r!=null&&(i.callback=r),t=un(e,i,a),t!==null&&(Jt(t,e,a,n),xo(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ft(),a=mn(e),i=Sr(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=un(e,i,a),t!==null&&(Jt(t,e,a,n),xo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ft(),n=mn(e),a=Sr(r,n);a.tag=2,t!=null&&(a.callback=t),t=un(e,a,n),t!==null&&(Jt(t,e,n,r),xo(t,e,n))}};function Qm(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!si(r,n)||!si(a,i):!0}function hg(e,t,r){var n=!1,a=yn,i=t.contextType;return typeof i=="object"&&i!==null?i=Bt(i):(a=Nt(t)?Hn:ut.current,n=t.contextTypes,i=(n=n!=null)?Hs(e,a):yn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Nl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Km(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Nl.enqueueReplaceState(t,t.state,null)}function Td(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ku(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Bt(i):(i=Nt(t)?Hn:ut.current,a.context=Hs(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Dd(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Nl.enqueueReplaceState(a,a.state,null),Wo(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Gs(e,t){try{var r="",n=t;do r+=sw(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Dc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Rd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Db=typeof WeakMap=="function"?WeakMap:Map;function mg(e,t,r){r=Sr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Qo||(Qo=!0,Hd=n),Rd(e,t)},r}function fg(e,t,r){r=Sr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Rd(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Rd(e,t),typeof n!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Jm(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Db;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Vb.bind(null,e,t,r),t.then(e,e))}function Xm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zm(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Sr(-1,1),t.tag=2,un(r,t,1))),r.lanes|=1),e)}var Tb=Fr.ReactCurrentOwner,bt=!1;function ht(e,t,r,n){t.child=e===null?Hx(t,null,r,n):Vs(t,e.child,r,n)}function ef(e,t,r,n,a){r=r.render;var i=t.ref;return Is(t,a),n=th(e,t,r,n,i,a),r=rh(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Pr(e,t,a)):(Pe&&r&&Hu(t),t.flags|=1,ht(e,t,n,a),t.child)}function tf(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!hh(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,pg(e,t,i,n,a)):(e=jo(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:si,r(o,n)&&e.ref===t.ref)return Pr(e,t,a)}return t.flags|=1,e=fn(i,n),e.ref=t.ref,e.return=t,t.child=e}function pg(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(si(i,n)&&e.ref===t.ref)if(bt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,Pr(e,t,a)}return Od(e,t,r,n,a)}function xg(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Ms,St),St|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(Ms,St),St|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ne(Ms,St),St|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ne(Ms,St),St|=n;return ht(e,t,a,r),t.child}function gg(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Od(e,t,r,n,a){var i=Nt(r)?Hn:ut.current;return i=Hs(t,i),Is(t,a),r=th(e,t,r,n,i,a),n=rh(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Pr(e,t,a)):(Pe&&n&&Hu(t),t.flags|=1,ht(e,t,r,a),t.child)}function rf(e,t,r,n,a){if(Nt(r)){var i=!0;Fo(t)}else i=!1;if(Is(t,a),t.stateNode===null)vo(e,t),hg(t,r,n),Td(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Bt(d):(d=Nt(r)?Hn:ut.current,d=Hs(t,d));var u=r.getDerivedStateFromProps,p=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Km(t,o,n,d),Jr=!1;var y=t.memoizedState;o.state=y,Wo(t,n,o,a),c=t.memoizedState,l!==n||y!==c||jt.current||Jr?(typeof u=="function"&&(Dd(t,r,u,n),c=t.memoizedState),(l=Jr||Qm(t,r,l,n,y,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Vx(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:qt(t.type,l),o.props=d,p=t.pendingProps,y=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Bt(c):(c=Nt(r)?Hn:ut.current,c=Hs(t,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||y!==c)&&Km(t,o,n,c),Jr=!1,y=t.memoizedState,o.state=y,Wo(t,n,o,a);var b=t.memoizedState;l!==p||y!==b||jt.current||Jr?(typeof x=="function"&&(Dd(t,r,x,n),b=t.memoizedState),(d=Jr||Qm(t,r,d,n,y,b,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),o.props=n,o.state=b,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),n=!1)}return Id(e,t,r,n,i,a)}function Id(e,t,r,n,a,i){gg(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&zm(t,r,!1),Pr(e,t,i);n=t.stateNode,Tb.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Vs(t,e.child,null,i),t.child=Vs(t,null,l,i)):ht(e,t,l,i),t.memoizedState=n.state,a&&zm(t,r,!0),t.child}function yg(e){var t=e.stateNode;t.pendingContext?Um(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Um(e,t.context,!1),Ju(e,t.containerInfo)}function nf(e,t,r,n,a){return Ws(),Vu(a),t.flags|=256,ht(e,t,r,n),t.child}var Ad={dehydrated:null,treeContext:null,retryLane:0};function $d(e){return{baseLanes:e,cachePool:null,transitions:null}}function vg(e,t,r){var n=t.pendingProps,a=Te.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ne(Te,a&1),e===null)return Md(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Sl(o,n,0,null),e=Bn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=$d(r),t.memoizedState=Ad,e):ah(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Rb(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=fn(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=fn(l,i):(i=Bn(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?$d(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Ad,n}return i=e.child,e=i.sibling,n=fn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ah(e,t){return t=Sl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qi(e,t,r,n){return n!==null&&Vu(n),Vs(t,e.child,null,r),e=ah(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rb(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Dc(Error(K(422))),qi(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Sl({mode:"visible",children:n.children},a,0,null),i=Bn(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Vs(t,e.child,null,o),t.child.memoizedState=$d(o),t.memoizedState=Ad,i);if(!(t.mode&1))return qi(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(K(419)),n=Dc(i,n,void 0),qi(e,t,o,n)}if(l=(o&e.childLanes)!==0,bt||l){if(n=rt,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Mr(e,a),Jt(n,e,a,-1))}return uh(),n=Dc(Error(K(421))),qi(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=qb.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Et=dn(a.nextSibling),Mt=t,Pe=!0,Qt=null,e!==null&&(At[$t++]=_r,At[$t++]=kr,At[$t++]=Wn,_r=e.id,kr=e.overflow,Wn=t),t=ah(t,n.children),t.flags|=4096,t)}function sf(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Pd(e.return,t,r)}function Tc(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function wg(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ht(e,t,n.children,r),n=Te.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sf(e,r,t);else if(e.tag===19)sf(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ne(Te,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Vo(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Tc(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Vo(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Tc(t,!0,r,null,i);break;case"together":Tc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,r=fn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=fn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ob(e,t,r){switch(t.tag){case 3:yg(t),Ws();break;case 5:qx(t);break;case 1:Nt(t.type)&&Fo(t);break;case 4:Ju(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ne(Bo,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ne(Te,Te.current&1),t.flags|=128,null):r&t.child.childLanes?vg(e,t,r):(Ne(Te,Te.current&1),e=Pr(e,t,r),e!==null?e.sibling:null);Ne(Te,Te.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return wg(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ne(Te,Te.current),n)break;return null;case 22:case 23:return t.lanes=0,xg(e,t,r)}return Pr(e,t,r)}var bg,Ld,jg,Ng;bg=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ld=function(){};jg=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Un(dr.current);var i=null;switch(r){case"input":a=id(e,a),n=id(e,n),i=[];break;case"select":a=Oe({},a,{value:void 0}),n=Oe({},n,{value:void 0}),i=[];break;case"textarea":a=cd(e,a),n=cd(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=$o)}ud(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ja.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ja.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ke("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Ng=function(e,t,r,n){r!==n&&(t.flags|=4)};function Na(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ib(e,t,r){var n=t.pendingProps;switch(Wu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return Nt(t.type)&&Lo(),ct(t),null;case 3:return n=t.stateNode,qs(),Ce(jt),Ce(ut),Zu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qt!==null&&(qd(Qt),Qt=null))),Ld(e,t),ct(t),null;case 5:Xu(t);var a=Un(ci.current);if(r=t.type,e!==null&&t.stateNode!=null)jg(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(K(166));return ct(t),null}if(e=Un(dr.current),Wi(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[or]=t,n[oi]=i,e=(t.mode&1)!==0,r){case"dialog":ke("cancel",n),ke("close",n);break;case"iframe":case"object":case"embed":ke("load",n);break;case"video":case"audio":for(a=0;a<Aa.length;a++)ke(Aa[a],n);break;case"source":ke("error",n);break;case"img":case"image":case"link":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"input":mm(n,i),ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ke("invalid",n);break;case"textarea":pm(n,i),ke("invalid",n)}ud(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Hi(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Hi(n.textContent,l,e),a=["children",""+l]):Ja.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",n)}switch(r){case"input":Ii(n),fm(n,i,!0);break;case"textarea":Ii(n),xm(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=$o)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[or]=t,e[oi]=n,bg(e,t,!1,!1),t.stateNode=e;e:{switch(o=hd(r,n),r){case"dialog":ke("cancel",e),ke("close",e),a=n;break;case"iframe":case"object":case"embed":ke("load",e),a=n;break;case"video":case"audio":for(a=0;a<Aa.length;a++)ke(Aa[a],e);a=n;break;case"source":ke("error",e),a=n;break;case"img":case"image":case"link":ke("error",e),ke("load",e),a=n;break;case"details":ke("toggle",e),a=n;break;case"input":mm(e,n),a=id(e,n),ke("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Oe({},n,{value:void 0}),ke("invalid",e);break;case"textarea":pm(e,n),a=cd(e,n),ke("invalid",e);break;default:a=n}ud(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ex(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Xp(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Xa(e,c):typeof c=="number"&&Xa(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ja.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",e):c!=null&&Mu(e,i,c,o))}switch(r){case"input":Ii(e),fm(e,n,!1);break;case"textarea":Ii(e),xm(e);break;case"option":n.value!=null&&e.setAttribute("value",""+gn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ds(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ds(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=$o)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ct(t),null;case 6:if(e&&t.stateNode!=null)Ng(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(K(166));if(r=Un(ci.current),Un(dr.current),Wi(t)){if(n=t.stateNode,r=t.memoizedProps,n[or]=t,(i=n.nodeValue!==r)&&(e=Mt,e!==null))switch(e.tag){case 3:Hi(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hi(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[or]=t,t.stateNode=n}return ct(t),null;case 13:if(Ce(Te),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&Et!==null&&t.mode&1&&!(t.flags&128))zx(),Ws(),t.flags|=98560,i=!1;else if(i=Wi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(K(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[or]=t}else Ws(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ct(t),i=!1}else Qt!==null&&(qd(Qt),Qt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?Xe===0&&(Xe=3):uh())),t.updateQueue!==null&&(t.flags|=4),ct(t),null);case 4:return qs(),Ld(e,t),e===null&&ai(t.stateNode.containerInfo),ct(t),null;case 10:return Yu(t.type._context),ct(t),null;case 17:return Nt(t.type)&&Lo(),ct(t),null;case 19:if(Ce(Te),i=t.memoizedState,i===null)return ct(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Na(i,!1);else{if(Xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Vo(e),o!==null){for(t.flags|=128,Na(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ne(Te,Te.current&1|2),t.child}e=e.sibling}i.tail!==null&&Le()>Ys&&(t.flags|=128,n=!0,Na(i,!1),t.lanes=4194304)}else{if(!n)if(e=Vo(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Na(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return ct(t),null}else 2*Le()-i.renderingStartTime>Ys&&r!==1073741824&&(t.flags|=128,n=!0,Na(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Le(),t.sibling=null,r=Te.current,Ne(Te,n?r&1|2:r&1),t):(ct(t),null);case 22:case 23:return dh(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?St&1073741824&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function Ab(e,t){switch(Wu(t),t.tag){case 1:return Nt(t.type)&&Lo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qs(),Ce(jt),Ce(ut),Zu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xu(t),null;case 13:if(Ce(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));Ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Te),null;case 4:return qs(),null;case 10:return Yu(t.type._context),null;case 22:case 23:return dh(),null;case 24:return null;default:return null}}var Gi=!1,dt=!1,$b=typeof WeakSet=="function"?WeakSet:Set,se=null;function Es(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){$e(e,t,n)}else r.current=null}function Fd(e,t,r){try{r()}catch(n){$e(e,t,n)}}var af=!1;function Lb(e,t){if(jd=Oo,e=Ex(),Bu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,p=e,y=null;t:for(;;){for(var x;p!==r||a!==0&&p.nodeType!==3||(l=o+a),p!==i||n!==0&&p.nodeType!==3||(c=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)y=p,p=x;for(;;){if(p===e)break t;if(y===r&&++d===a&&(l=o),y===i&&++u===n&&(c=o),(x=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nd={focusedElem:e,selectionRange:r},Oo=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var f=b.memoizedProps,g=b.memoizedState,h=t.stateNode,v=h.getSnapshotBeforeUpdate(t.elementType===t.type?f:qt(t.type,f),g);h.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(j){$e(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return b=af,af=!1,b}function Va(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Fd(t,r,i)}a=a.next}while(a!==n)}}function _l(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ud(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function _g(e){var t=e.alternate;t!==null&&(e.alternate=null,_g(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[or],delete t[oi],delete t[Sd],delete t[wb],delete t[bb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kg(e){return e.tag===5||e.tag===3||e.tag===4}function of(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=$o));else if(n!==4&&(e=e.child,e!==null))for(zd(e,t,r),e=e.sibling;e!==null;)zd(e,t,r),e=e.sibling}function Bd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Bd(e,t,r),e=e.sibling;e!==null;)Bd(e,t,r),e=e.sibling}var st=null,Gt=!1;function Hr(e,t,r){for(r=r.child;r!==null;)Sg(e,t,r),r=r.sibling}function Sg(e,t,r){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(xl,r)}catch{}switch(r.tag){case 5:dt||Es(r,t);case 6:var n=st,a=Gt;st=null,Hr(e,t,r),st=n,Gt=a,st!==null&&(Gt?(e=st,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):st.removeChild(r.stateNode));break;case 18:st!==null&&(Gt?(e=st,r=r.stateNode,e.nodeType===8?kc(e.parentNode,r):e.nodeType===1&&kc(e,r),ri(e)):kc(st,r.stateNode));break;case 4:n=st,a=Gt,st=r.stateNode.containerInfo,Gt=!0,Hr(e,t,r),st=n,Gt=a;break;case 0:case 11:case 14:case 15:if(!dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fd(r,t,o),a=a.next}while(a!==n)}Hr(e,t,r);break;case 1:if(!dt&&(Es(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){$e(r,t,l)}Hr(e,t,r);break;case 21:Hr(e,t,r);break;case 22:r.mode&1?(dt=(n=dt)||r.memoizedState!==null,Hr(e,t,r),dt=n):Hr(e,t,r);break;default:Hr(e,t,r)}}function lf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new $b),t.forEach(function(n){var a=Gb.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Wt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,Gt=!1;break e;case 3:st=l.stateNode.containerInfo,Gt=!0;break e;case 4:st=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(st===null)throw Error(K(160));Sg(i,o,a),st=null,Gt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){$e(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cg(t,e),t=t.sibling}function Cg(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wt(t,e),sr(e),n&4){try{Va(3,e,e.return),_l(3,e)}catch(f){$e(e,e.return,f)}try{Va(5,e,e.return)}catch(f){$e(e,e.return,f)}}break;case 1:Wt(t,e),sr(e),n&512&&r!==null&&Es(r,r.return);break;case 5:if(Wt(t,e),sr(e),n&512&&r!==null&&Es(r,r.return),e.flags&32){var a=e.stateNode;try{Xa(a,"")}catch(f){$e(e,e.return,f)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Qp(a,i),hd(l,o);var d=hd(l,i);for(o=0;o<c.length;o+=2){var u=c[o],p=c[o+1];u==="style"?ex(a,p):u==="dangerouslySetInnerHTML"?Xp(a,p):u==="children"?Xa(a,p):Mu(a,u,p,d)}switch(l){case"input":od(a,i);break;case"textarea":Kp(a,i);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Ds(a,!!i.multiple,x,!1):y!==!!i.multiple&&(i.defaultValue!=null?Ds(a,!!i.multiple,i.defaultValue,!0):Ds(a,!!i.multiple,i.multiple?[]:"",!1))}a[oi]=i}catch(f){$e(e,e.return,f)}}break;case 6:if(Wt(t,e),sr(e),n&4){if(e.stateNode===null)throw Error(K(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(f){$e(e,e.return,f)}}break;case 3:if(Wt(t,e),sr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ri(t.containerInfo)}catch(f){$e(e,e.return,f)}break;case 4:Wt(t,e),sr(e);break;case 13:Wt(t,e),sr(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(lh=Le())),n&4&&lf(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(dt=(d=dt)||u,Wt(t,e),dt=d):Wt(t,e),sr(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(se=e,u=e.child;u!==null;){for(p=se=u;se!==null;){switch(y=se,x=y.child,y.tag){case 0:case 11:case 14:case 15:Va(4,y,y.return);break;case 1:Es(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){n=y,r=y.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(f){$e(n,r,f)}}break;case 5:Es(y,y.return);break;case 22:if(y.memoizedState!==null){df(p);continue}}x!==null?(x.return=y,se=x):df(p)}u=u.sibling}e:for(u=null,p=e;;){if(p.tag===5){if(u===null){u=p;try{a=p.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Zp("display",o))}catch(f){$e(e,e.return,f)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(f){$e(e,e.return,f)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Wt(t,e),sr(e),n&4&&lf(e);break;case 21:break;default:Wt(t,e),sr(e)}}function sr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(kg(r)){var n=r;break e}r=r.return}throw Error(K(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Xa(a,""),n.flags&=-33);var i=of(e);Bd(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=of(e);zd(e,l,o);break;default:throw Error(K(161))}}catch(c){$e(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fb(e,t,r){se=e,Eg(e)}function Eg(e,t,r){for(var n=(e.mode&1)!==0;se!==null;){var a=se,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Gi;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||dt;l=Gi;var d=dt;if(Gi=o,(dt=c)&&!d)for(se=a;se!==null;)o=se,c=o.child,o.tag===22&&o.memoizedState!==null?uf(a):c!==null?(c.return=o,se=c):uf(a);for(;i!==null;)se=i,Eg(i),i=i.sibling;se=a,Gi=l,dt=d}cf(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,se=i):cf(e)}}function cf(e){for(;se!==null;){var t=se;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||_l(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:qt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&qm(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}qm(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&ri(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}dt||t.flags&512&&Ud(t)}catch(y){$e(t,t.return,y)}}if(t===e){se=null;break}if(r=t.sibling,r!==null){r.return=t.return,se=r;break}se=t.return}}function df(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var r=t.sibling;if(r!==null){r.return=t.return,se=r;break}se=t.return}}function uf(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{_l(4,t)}catch(c){$e(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){$e(t,a,c)}}var i=t.return;try{Ud(t)}catch(c){$e(t,i,c)}break;case 5:var o=t.return;try{Ud(t)}catch(c){$e(t,o,c)}}}catch(c){$e(t,t.return,c)}if(t===e){se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,se=l;break}se=t.return}}var Ub=Math.ceil,Yo=Fr.ReactCurrentDispatcher,ih=Fr.ReactCurrentOwner,Ut=Fr.ReactCurrentBatchConfig,ge=0,rt=null,Ve=null,it=0,St=0,Ms=Nn(0),Xe=0,mi=null,qn=0,kl=0,oh=0,qa=null,vt=null,lh=0,Ys=1/0,br=null,Qo=!1,Hd=null,hn=null,Yi=!1,sn=null,Ko=0,Ga=0,Wd=null,wo=-1,bo=0;function ft(){return ge&6?Le():wo!==-1?wo:wo=Le()}function mn(e){return e.mode&1?ge&2&&it!==0?it&-it:Nb.transition!==null?(bo===0&&(bo=hx()),bo):(e=ve,e!==0||(e=window.event,e=e===void 0?16:vx(e.type)),e):1}function Jt(e,t,r,n){if(50<Ga)throw Ga=0,Wd=null,Error(K(185));bi(e,r,n),(!(ge&2)||e!==rt)&&(e===rt&&(!(ge&2)&&(kl|=r),Xe===4&&en(e,it)),_t(e,n),r===1&&ge===0&&!(t.mode&1)&&(Ys=Le()+500,bl&&_n()))}function _t(e,t){var r=e.callbackNode;Nw(e,t);var n=Ro(e,e===rt?it:0);if(n===0)r!==null&&vm(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&vm(r),t===1)e.tag===0?jb(hf.bind(null,e)):Lx(hf.bind(null,e)),yb(function(){!(ge&6)&&_n()}),r=null;else{switch(mx(n)){case 1:r=Ou;break;case 4:r=dx;break;case 16:r=To;break;case 536870912:r=ux;break;default:r=To}r=Ag(r,Mg.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Mg(e,t){if(wo=-1,bo=0,ge&6)throw Error(K(327));var r=e.callbackNode;if(As()&&e.callbackNode!==r)return null;var n=Ro(e,e===rt?it:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Jo(e,n);else{t=n;var a=ge;ge|=2;var i=Dg();(rt!==e||it!==t)&&(br=null,Ys=Le()+500,zn(e,t));do try{Hb();break}catch(l){Pg(e,l)}while(!0);Gu(),Yo.current=i,ge=a,Ve!==null?t=0:(rt=null,it=0,t=Xe)}if(t!==0){if(t===2&&(a=gd(e),a!==0&&(n=a,t=Vd(e,a))),t===1)throw r=mi,zn(e,0),en(e,n),_t(e,Le()),r;if(t===6)en(e,n);else{if(a=e.current.alternate,!(n&30)&&!zb(a)&&(t=Jo(e,n),t===2&&(i=gd(e),i!==0&&(n=i,t=Vd(e,i))),t===1))throw r=mi,zn(e,0),en(e,n),_t(e,Le()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(K(345));case 2:Rn(e,vt,br);break;case 3:if(en(e,n),(n&130023424)===n&&(t=lh+500-Le(),10<t)){if(Ro(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ft(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=kd(Rn.bind(null,e,vt,br),t);break}Rn(e,vt,br);break;case 4:if(en(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Kt(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Le()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ub(n/1960))-n,10<n){e.timeoutHandle=kd(Rn.bind(null,e,vt,br),n);break}Rn(e,vt,br);break;case 5:Rn(e,vt,br);break;default:throw Error(K(329))}}}return _t(e,Le()),e.callbackNode===r?Mg.bind(null,e):null}function Vd(e,t){var r=qa;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=Jo(e,t),e!==2&&(t=vt,vt=r,t!==null&&qd(t)),e}function qd(e){vt===null?vt=e:vt.push.apply(vt,e)}function zb(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Xt(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function en(e,t){for(t&=~oh,t&=~kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kt(t),n=1<<r;e[r]=-1,t&=~n}}function hf(e){if(ge&6)throw Error(K(327));As();var t=Ro(e,0);if(!(t&1))return _t(e,Le()),null;var r=Jo(e,t);if(e.tag!==0&&r===2){var n=gd(e);n!==0&&(t=n,r=Vd(e,n))}if(r===1)throw r=mi,zn(e,0),en(e,t),_t(e,Le()),r;if(r===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rn(e,vt,br),_t(e,Le()),null}function ch(e,t){var r=ge;ge|=1;try{return e(t)}finally{ge=r,ge===0&&(Ys=Le()+500,bl&&_n())}}function Gn(e){sn!==null&&sn.tag===0&&!(ge&6)&&As();var t=ge;ge|=1;var r=Ut.transition,n=ve;try{if(Ut.transition=null,ve=1,e)return e()}finally{ve=n,Ut.transition=r,ge=t,!(ge&6)&&_n()}}function dh(){St=Ms.current,Ce(Ms)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,gb(r)),Ve!==null)for(r=Ve.return;r!==null;){var n=r;switch(Wu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Lo();break;case 3:qs(),Ce(jt),Ce(ut),Zu();break;case 5:Xu(n);break;case 4:qs();break;case 13:Ce(Te);break;case 19:Ce(Te);break;case 10:Yu(n.type._context);break;case 22:case 23:dh()}r=r.return}if(rt=e,Ve=e=fn(e.current,null),it=St=t,Xe=0,mi=null,oh=kl=qn=0,vt=qa=null,Fn!==null){for(t=0;t<Fn.length;t++)if(r=Fn[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Fn=null}return e}function Pg(e,t){do{var r=Ve;try{if(Gu(),go.current=Go,qo){for(var n=Re.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}qo=!1}if(Vn=0,tt=Je=Re=null,Wa=!1,di=0,ih.current=null,r===null||r.return===null){Xe=1,mi=t,Ve=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=it,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var y=u.alternate;y?(u.updateQueue=y.updateQueue,u.memoizedState=y.memoizedState,u.lanes=y.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=Xm(o);if(x!==null){x.flags&=-257,Zm(x,o,l,i,t),x.mode&1&&Jm(i,d,t),t=x,c=d;var b=t.updateQueue;if(b===null){var f=new Set;f.add(c),t.updateQueue=f}else b.add(c);break e}else{if(!(t&1)){Jm(i,d,t),uh();break e}c=Error(K(426))}}else if(Pe&&l.mode&1){var g=Xm(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Zm(g,o,l,i,t),Vu(Gs(c,l));break e}}i=c=Gs(c,l),Xe!==4&&(Xe=2),qa===null?qa=[i]:qa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=mg(i,c,t);Vm(i,h);break e;case 1:l=c;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(hn===null||!hn.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=fg(i,l,t);Vm(i,j);break e}}i=i.return}while(i!==null)}Rg(r)}catch(N){t=N,Ve===r&&r!==null&&(Ve=r=r.return);continue}break}while(!0)}function Dg(){var e=Yo.current;return Yo.current=Go,e===null?Go:e}function uh(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),rt===null||!(qn&268435455)&&!(kl&268435455)||en(rt,it)}function Jo(e,t){var r=ge;ge|=2;var n=Dg();(rt!==e||it!==t)&&(br=null,zn(e,t));do try{Bb();break}catch(a){Pg(e,a)}while(!0);if(Gu(),ge=r,Yo.current=n,Ve!==null)throw Error(K(261));return rt=null,it=0,Xe}function Bb(){for(;Ve!==null;)Tg(Ve)}function Hb(){for(;Ve!==null&&!fw();)Tg(Ve)}function Tg(e){var t=Ig(e.alternate,e,St);e.memoizedProps=e.pendingProps,t===null?Rg(e):Ve=t,ih.current=null}function Rg(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ab(r,t),r!==null){r.flags&=32767,Ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xe=6,Ve=null;return}}else if(r=Ib(r,t,St),r!==null){Ve=r;return}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Xe===0&&(Xe=5)}function Rn(e,t,r){var n=ve,a=Ut.transition;try{Ut.transition=null,ve=1,Wb(e,t,r,n)}finally{Ut.transition=a,ve=n}return null}function Wb(e,t,r,n){do As();while(sn!==null);if(ge&6)throw Error(K(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(_w(e,i),e===rt&&(Ve=rt=null,it=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Yi||(Yi=!0,Ag(To,function(){return As(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ut.transition,Ut.transition=null;var o=ve;ve=1;var l=ge;ge|=4,ih.current=null,Lb(e,r),Cg(r,e),db(Nd),Oo=!!jd,Nd=jd=null,e.current=r,Fb(r),pw(),ge=l,ve=o,Ut.transition=i}else e.current=r;if(Yi&&(Yi=!1,sn=e,Ko=a),i=e.pendingLanes,i===0&&(hn=null),yw(r.stateNode),_t(e,Le()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Qo)throw Qo=!1,e=Hd,Hd=null,e;return Ko&1&&e.tag!==0&&As(),i=e.pendingLanes,i&1?e===Wd?Ga++:(Ga=0,Wd=e):Ga=0,_n(),null}function As(){if(sn!==null){var e=mx(Ko),t=Ut.transition,r=ve;try{if(Ut.transition=null,ve=16>e?16:e,sn===null)var n=!1;else{if(e=sn,sn=null,Ko=0,ge&6)throw Error(K(331));var a=ge;for(ge|=4,se=e.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(se=d;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:Va(8,u,i)}var p=u.child;if(p!==null)p.return=u,se=p;else for(;se!==null;){u=se;var y=u.sibling,x=u.return;if(_g(u),u===d){se=null;break}if(y!==null){y.return=x,se=y;break}se=x}}}var b=i.alternate;if(b!==null){var f=b.child;if(f!==null){b.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(f!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Va(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,se=h;break e}se=i.return}}var v=e.current;for(se=v;se!==null;){o=se;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,se=w;else e:for(o=v;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_l(9,l)}}catch(N){$e(l,l.return,N)}if(l===o){se=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,se=j;break e}se=l.return}}if(ge=a,_n(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(xl,e)}catch{}n=!0}return n}finally{ve=r,Ut.transition=t}}return!1}function mf(e,t,r){t=Gs(r,t),t=mg(e,t,1),e=un(e,t,1),t=ft(),e!==null&&(bi(e,1,t),_t(e,t))}function $e(e,t,r){if(e.tag===3)mf(e,e,r);else for(;t!==null;){if(t.tag===3){mf(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hn===null||!hn.has(n))){e=Gs(r,e),e=fg(t,e,1),t=un(t,e,1),e=ft(),t!==null&&(bi(t,1,e),_t(t,e));break}}t=t.return}}function Vb(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&r,rt===e&&(it&r)===r&&(Xe===4||Xe===3&&(it&130023424)===it&&500>Le()-lh?zn(e,0):oh|=r),_t(e,t)}function Og(e,t){t===0&&(e.mode&1?(t=Li,Li<<=1,!(Li&130023424)&&(Li=4194304)):t=1);var r=ft();e=Mr(e,t),e!==null&&(bi(e,t,r),_t(e,r))}function qb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Og(e,r)}function Gb(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(K(314))}n!==null&&n.delete(t),Og(e,r)}var Ig;Ig=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)bt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return bt=!1,Ob(e,t,r);bt=!!(e.flags&131072)}else bt=!1,Pe&&t.flags&1048576&&Fx(t,zo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;vo(e,t),e=t.pendingProps;var a=Hs(t,ut.current);Is(t,r),a=th(null,t,n,e,a,r);var i=rh();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(n)?(i=!0,Fo(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ku(t),a.updater=Nl,t.stateNode=a,a._reactInternals=t,Td(t,n,e,r),t=Id(null,t,n,!0,i,r)):(t.tag=0,Pe&&i&&Hu(t),ht(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(vo(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Qb(n),e=qt(n,e),a){case 0:t=Od(null,t,n,e,r);break e;case 1:t=rf(null,t,n,e,r);break e;case 11:t=ef(null,t,n,e,r);break e;case 14:t=tf(null,t,n,qt(n.type,e),r);break e}throw Error(K(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:qt(n,a),Od(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:qt(n,a),rf(e,t,n,a,r);case 3:e:{if(yg(t),e===null)throw Error(K(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Vx(e,t),Wo(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Gs(Error(K(423)),t),t=nf(e,t,n,r,a);break e}else if(n!==a){a=Gs(Error(K(424)),t),t=nf(e,t,n,r,a);break e}else for(Et=dn(t.stateNode.containerInfo.firstChild),Mt=t,Pe=!0,Qt=null,r=Hx(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ws(),n===a){t=Pr(e,t,r);break e}ht(e,t,n,r)}t=t.child}return t;case 5:return qx(t),e===null&&Md(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,_d(n,a)?o=null:i!==null&&_d(n,i)&&(t.flags|=32),gg(e,t),ht(e,t,o,r),t.child;case 6:return e===null&&Md(t),null;case 13:return vg(e,t,r);case 4:return Ju(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Vs(t,null,n,r):ht(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:qt(n,a),ef(e,t,n,a,r);case 7:return ht(e,t,t.pendingProps,r),t.child;case 8:return ht(e,t,t.pendingProps.children,r),t.child;case 12:return ht(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ne(Bo,n._currentValue),n._currentValue=o,i!==null)if(Xt(i.value,o)){if(i.children===a.children&&!jt.current){t=Pr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Sr(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Pd(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Pd(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ht(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Is(t,r),a=Bt(a),n=n(a),t.flags|=1,ht(e,t,n,r),t.child;case 14:return n=t.type,a=qt(n,t.pendingProps),a=qt(n.type,a),tf(e,t,n,a,r);case 15:return pg(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:qt(n,a),vo(e,t),t.tag=1,Nt(n)?(e=!0,Fo(t)):e=!1,Is(t,r),hg(t,n,a),Td(t,n,a,r),Id(null,t,n,!0,e,r);case 19:return wg(e,t,r);case 22:return xg(e,t,r)}throw Error(K(156,t.tag))};function Ag(e,t){return cx(e,t)}function Yb(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,r,n){return new Yb(e,t,r,n)}function hh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qb(e){if(typeof e=="function")return hh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Du)return 11;if(e===Tu)return 14}return 2}function fn(e,t){var r=e.alternate;return r===null?(r=Lt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function jo(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")hh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case vs:return Bn(r.children,a,i,t);case Pu:o=8,a|=8;break;case rd:return e=Lt(12,r,t,a|2),e.elementType=rd,e.lanes=i,e;case nd:return e=Lt(13,r,t,a),e.elementType=nd,e.lanes=i,e;case sd:return e=Lt(19,r,t,a),e.elementType=sd,e.lanes=i,e;case qp:return Sl(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wp:o=10;break e;case Vp:o=9;break e;case Du:o=11;break e;case Tu:o=14;break e;case Kr:o=16,n=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Lt(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Bn(e,t,r,n){return e=Lt(7,e,n,t),e.lanes=r,e}function Sl(e,t,r,n){return e=Lt(22,e,n,t),e.elementType=qp,e.lanes=r,e.stateNode={isHidden:!1},e}function Rc(e,t,r){return e=Lt(6,e,null,t),e.lanes=r,e}function Oc(e,t,r){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kb(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fc(0),this.expirationTimes=fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function mh(e,t,r,n,a,i,o,l,c){return e=new Kb(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Lt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ku(i),e}function Jb(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ys,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function $g(e){if(!e)return yn;e=e._reactInternals;e:{if(es(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var r=e.type;if(Nt(r))return $x(e,r,t)}return t}function Lg(e,t,r,n,a,i,o,l,c){return e=mh(r,n,!0,e,a,i,o,l,c),e.context=$g(null),r=e.current,n=ft(),a=mn(r),i=Sr(n,a),i.callback=t??null,un(r,i,a),e.current.lanes=a,bi(e,a,n),_t(e,n),e}function Cl(e,t,r,n){var a=t.current,i=ft(),o=mn(a);return r=$g(r),t.context===null?t.context=r:t.pendingContext=r,t=Sr(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=un(a,t,o),e!==null&&(Jt(e,a,o,i),xo(e,a,o)),o}function Xo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ff(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function fh(e,t){ff(e,t),(e=e.alternate)&&ff(e,t)}function Xb(){return null}var Fg=typeof reportError=="function"?reportError:function(e){console.error(e)};function ph(e){this._internalRoot=e}El.prototype.render=ph.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Cl(e,t,null,null)};El.prototype.unmount=ph.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gn(function(){Cl(null,e,null,null)}),t[Er]=null}};function El(e){this._internalRoot=e}El.prototype.unstable_scheduleHydration=function(e){if(e){var t=xx();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Zr.length&&t!==0&&t<Zr[r].priority;r++);Zr.splice(r,0,e),r===0&&yx(e)}};function xh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ml(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pf(){}function Zb(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Xo(o);i.call(d)}}var o=Lg(t,n,e,0,null,!1,!1,"",pf);return e._reactRootContainer=o,e[Er]=o.current,ai(e.nodeType===8?e.parentNode:e),Gn(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Xo(c);l.call(d)}}var c=mh(e,0,!1,null,null,!1,!1,"",pf);return e._reactRootContainer=c,e[Er]=c.current,ai(e.nodeType===8?e.parentNode:e),Gn(function(){Cl(t,c,r,n)}),c}function Pl(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Xo(o);l.call(c)}}Cl(t,o,e,a)}else o=Zb(r,t,e,a,n);return Xo(o)}fx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ia(t.pendingLanes);r!==0&&(Iu(t,r|1),_t(t,Le()),!(ge&6)&&(Ys=Le()+500,_n()))}break;case 13:Gn(function(){var n=Mr(e,1);if(n!==null){var a=ft();Jt(n,e,1,a)}}),fh(e,1)}};Au=function(e){if(e.tag===13){var t=Mr(e,134217728);if(t!==null){var r=ft();Jt(t,e,134217728,r)}fh(e,134217728)}};px=function(e){if(e.tag===13){var t=mn(e),r=Mr(e,t);if(r!==null){var n=ft();Jt(r,e,t,n)}fh(e,t)}};xx=function(){return ve};gx=function(e,t){var r=ve;try{return ve=e,t()}finally{ve=r}};fd=function(e,t,r){switch(t){case"input":if(od(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=wl(n);if(!a)throw Error(K(90));Yp(n),od(n,a)}}}break;case"textarea":Kp(e,r);break;case"select":t=r.value,t!=null&&Ds(e,!!r.multiple,t,!1)}};nx=ch;sx=Gn;var ej={usingClientEntryPoint:!1,Events:[Ni,Ns,wl,tx,rx,ch]},_a={findFiberByHostInstance:Ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tj={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ox(e),e===null?null:e.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||Xb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qi.isDisabled&&Qi.supportsFiber)try{xl=Qi.inject(tj),cr=Qi}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ej;Rt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(t))throw Error(K(200));return Jb(e,t,null,r)};Rt.createRoot=function(e,t){if(!xh(e))throw Error(K(299));var r=!1,n="",a=Fg;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=mh(e,1,!1,null,null,r,!1,n,a),e[Er]=t.current,ai(e.nodeType===8?e.parentNode:e),new ph(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=ox(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return Gn(e)};Rt.hydrate=function(e,t,r){if(!Ml(t))throw Error(K(200));return Pl(null,e,t,!0,r)};Rt.hydrateRoot=function(e,t,r){if(!xh(e))throw Error(K(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Fg;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Lg(t,null,e,1,r??null,a,!1,i,o),e[Er]=t.current,ai(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new El(t)};Rt.render=function(e,t,r){if(!Ml(t))throw Error(K(200));return Pl(null,e,t,!1,r)};Rt.unmountComponentAtNode=function(e){if(!Ml(e))throw Error(K(40));return e._reactRootContainer?(Gn(function(){Pl(null,null,e,!1,function(){e._reactRootContainer=null,e[Er]=null})}),!0):!1};Rt.unstable_batchedUpdates=ch;Rt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ml(r))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Pl(e,t,r,!1,n)};Rt.version="18.3.1-next-f1338f8080-20240426";function Ug(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ug)}catch(e){console.error(e)}}Ug(),Up.exports=Rt;var aa=Up.exports;const rj=ju(aa);var zg,xf=aa;zg=xf.createRoot,xf.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fi.apply(this,arguments)}var an;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(an||(an={}));const gf="popstate";function nj(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Gd("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Zo(a)}return aj(t,r,null,e)}function Ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bg(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sj(){return Math.random().toString(36).substr(2,8)}function yf(e,t){return{usr:e.state,key:e.key,idx:t}}function Gd(e,t,r,n){return r===void 0&&(r=null),fi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ia(t):t,{state:r,key:t&&t.key||n||sj()})}function Zo(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ia(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function aj(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=an.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(fi({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function p(){l=an.Pop;let g=u(),h=g==null?null:g-d;d=g,c&&c({action:l,location:f.location,delta:h})}function y(g,h){l=an.Push;let v=Gd(f.location,g,h);d=u()+1;let w=yf(v,d),j=f.createHref(v);try{o.pushState(w,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(j)}i&&c&&c({action:l,location:f.location,delta:1})}function x(g,h){l=an.Replace;let v=Gd(f.location,g,h);d=u();let w=yf(v,d),j=f.createHref(v);o.replaceState(w,"",j),i&&c&&c({action:l,location:f.location,delta:0})}function b(g){let h=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof g=="string"?g:Zo(g);return v=v.replace(/ $/,"%20"),Ue(h,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,h)}let f={get action(){return l},get location(){return e(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(gf,p),c=g,()=>{a.removeEventListener(gf,p),c=null}},createHref(g){return t(a,g)},createURL:b,encodeLocation(g){let h=b(g);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:y,replace:x,go(g){return o.go(g)}};return f}var vf;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vf||(vf={}));function ij(e,t,r){return r===void 0&&(r="/"),oj(e,t,r,!1)}function oj(e,t,r,n){let a=typeof t=="string"?ia(t):t,i=gh(a.pathname||"/",r);if(i==null)return null;let o=Hg(e);lj(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=vj(i);l=gj(o[c],d,n)}return l}function Hg(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ue(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=pn([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Ue(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Hg(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:pj(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of Wg(i.path))a(i,o,c)}),t}function Wg(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Wg(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function lj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:xj(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const cj=/^:[\w-]+$/,dj=3,uj=2,hj=1,mj=10,fj=-2,wf=e=>e==="*";function pj(e,t){let r=e.split("/"),n=r.length;return r.some(wf)&&(n+=fj),t&&(n+=uj),r.filter(a=>!wf(a)).reduce((a,i)=>a+(cj.test(i)?dj:i===""?hj:mj),n)}function xj(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function gj(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",p=bf({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),y=c.route;if(!p&&d&&r&&!n[n.length-1].route.index&&(p=bf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:pn([i,p.pathname]),pathnameBase:Nj(pn([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=pn([i,p.pathnameBase]))}return o}function bf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=yj(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,p)=>{let{paramName:y,isOptional:x}=u;if(y==="*"){let f=l[p]||"";o=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}const b=l[p];return x&&!b?d[y]=void 0:d[y]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function yj(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Bg(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function vj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bg(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function gh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function wj(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?ia(e):e;return{pathname:r?r.startsWith("/")?r:bj(r,t):t,search:_j(n),hash:kj(a)}}function bj(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ic(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jj(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function yh(e,t){let r=jj(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function vh(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ia(e):(a=fi({},e),Ue(!a.pathname||!a.pathname.includes("?"),Ic("?","pathname","search",a)),Ue(!a.pathname||!a.pathname.includes("#"),Ic("#","pathname","hash",a)),Ue(!a.search||!a.search.includes("#"),Ic("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let p=t.length-1;if(!n&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;a.pathname=y.join("/")}l=p>=0?t[p]:"/"}let c=wj(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const pn=e=>e.join("/").replace(/\/\/+/g,"/"),Nj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_j=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,kj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Sj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Vg=["post","put","patch","delete"];new Set(Vg);const Cj=["get",...Vg];new Set(Cj);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pi(){return pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pi.apply(this,arguments)}const wh=m.createContext(null),Ej=m.createContext(null),kn=m.createContext(null),Dl=m.createContext(null),fr=m.createContext({outlet:null,matches:[],isDataRoute:!1}),qg=m.createContext(null);function Mj(e,t){let{relative:r}=t===void 0?{}:t;oa()||Ue(!1);let{basename:n,navigator:a}=m.useContext(kn),{hash:i,pathname:o,search:l}=Yg(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:pn([n,o])),a.createHref({pathname:c,search:l,hash:i})}function oa(){return m.useContext(Dl)!=null}function pr(){return oa()||Ue(!1),m.useContext(Dl).location}function Gg(e){m.useContext(kn).static||m.useLayoutEffect(e)}function Be(){let{isDataRoute:e}=m.useContext(fr);return e?Wj():Pj()}function Pj(){oa()||Ue(!1);let e=m.useContext(wh),{basename:t,future:r,navigator:n}=m.useContext(kn),{matches:a}=m.useContext(fr),{pathname:i}=pr(),o=JSON.stringify(yh(a,r.v7_relativeSplatPath)),l=m.useRef(!1);return Gg(()=>{l.current=!0}),m.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=vh(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:pn([t,p.pathname])),(u.replace?n.replace:n.push)(p,u.state,u)},[t,n,o,i,e])}const Dj=m.createContext(null);function Tj(e){let t=m.useContext(fr).outlet;return t&&m.createElement(Dj.Provider,{value:e},t)}function la(){let{matches:e}=m.useContext(fr),t=e[e.length-1];return t?t.params:{}}function Yg(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=m.useContext(kn),{matches:a}=m.useContext(fr),{pathname:i}=pr(),o=JSON.stringify(yh(a,n.v7_relativeSplatPath));return m.useMemo(()=>vh(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Rj(e,t){return Oj(e,t)}function Oj(e,t,r,n){oa()||Ue(!1);let{navigator:a,static:i}=m.useContext(kn),{matches:o}=m.useContext(fr),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let u=pr(),p;if(t){var y;let h=typeof t=="string"?ia(t):t;d==="/"||(y=h.pathname)!=null&&y.startsWith(d)||Ue(!1),p=h}else p=u;let x=p.pathname||"/",b=x;if(d!=="/"){let h=d.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(h.length).join("/")}let f=!i&&r&&r.matches&&r.matches.length>0?r.matches:ij(e,{pathname:b}),g=Fj(f&&f.map(h=>Object.assign({},h,{params:Object.assign({},c,h.params),pathname:pn([d,a.encodeLocation?a.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?d:pn([d,a.encodeLocation?a.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),o,r,n);return t&&g?m.createElement(Dl.Provider,{value:{location:pi({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:an.Pop}},g):g}function Ij(){let e=Hj(),t=Sj(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:a},r):null,null)}const Aj=m.createElement(Ij,null);class $j extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?m.createElement(fr.Provider,{value:this.props.routeContext},m.createElement(qg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lj(e){let{routeContext:t,match:r,children:n}=e,a=m.useContext(wh);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(fr.Provider,{value:t},n)}function Fj(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);u>=0||Ue(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let p=o[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=u),p.route.id){let{loaderData:y,errors:x}=r,b=p.route.loader&&y[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,p,y)=>{let x,b=!1,f=null,g=null;r&&(x=l&&p.route.id?l[p.route.id]:void 0,f=p.route.errorElement||Aj,c&&(d<0&&y===0?(b=!0,g=null):d===y&&(b=!0,g=p.route.hydrateFallbackElement||null)));let h=t.concat(o.slice(0,y+1)),v=()=>{let w;return x?w=f:b?w=g:p.route.Component?w=m.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=u,m.createElement(Lj,{match:p,routeContext:{outlet:u,matches:h,isDataRoute:r!=null},children:w})};return r&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?m.createElement($j,{location:r.location,revalidation:r.revalidation,component:f,error:x,children:v(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):v()},null)}var Qg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Qg||{}),el=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(el||{});function Uj(e){let t=m.useContext(wh);return t||Ue(!1),t}function zj(e){let t=m.useContext(Ej);return t||Ue(!1),t}function Bj(e){let t=m.useContext(fr);return t||Ue(!1),t}function Kg(e){let t=Bj(),r=t.matches[t.matches.length-1];return r.route.id||Ue(!1),r.route.id}function Hj(){var e;let t=m.useContext(qg),r=zj(el.UseRouteError),n=Kg(el.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Wj(){let{router:e}=Uj(Qg.UseNavigateStable),t=Kg(el.UseNavigateStable),r=m.useRef(!1);return Gg(()=>{r.current=!0}),m.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,pi({fromRouteId:t},i)))},[e,t])}function Vj(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function tl(e){let{to:t,replace:r,state:n,relative:a}=e;oa()||Ue(!1);let{future:i,static:o}=m.useContext(kn),{matches:l}=m.useContext(fr),{pathname:c}=pr(),d=Be(),u=vh(t,yh(l,i.v7_relativeSplatPath),c,a==="path"),p=JSON.stringify(u);return m.useEffect(()=>d(JSON.parse(p),{replace:r,state:n,relative:a}),[d,p,a,r,n]),null}function qj(e){return Tj(e.context)}function xe(e){Ue(!1)}function Gj(e){let{basename:t="/",children:r=null,location:n,navigationType:a=an.Pop,navigator:i,static:o=!1,future:l}=e;oa()&&Ue(!1);let c=t.replace(/^\/*/,"/"),d=m.useMemo(()=>({basename:c,navigator:i,static:o,future:pi({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=ia(n));let{pathname:u="/",search:p="",hash:y="",state:x=null,key:b="default"}=n,f=m.useMemo(()=>{let g=gh(u,c);return g==null?null:{location:{pathname:g,search:p,hash:y,state:x,key:b},navigationType:a}},[c,u,p,y,x,b,a]);return f==null?null:m.createElement(kn.Provider,{value:d},m.createElement(Dl.Provider,{children:r,value:f}))}function Tl(e){let{children:t,location:r}=e;return Rj(Yd(t),r)}new Promise(()=>{});function Yd(e,t){t===void 0&&(t=[]);let r=[];return m.Children.forEach(e,(n,a)=>{if(!m.isValidElement(n))return;let i=[...t,a];if(n.type===m.Fragment){r.push.apply(r,Yd(n.props.children,i));return}n.type!==xe&&Ue(!1),!n.props.index||!n.props.children||Ue(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Yd(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qd(){return Qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qd.apply(this,arguments)}function Yj(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Qj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Kj(e,t){return e.button===0&&(!t||t==="_self")&&!Qj(e)}const Jj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xj="6";try{window.__reactRouterVersion=Xj}catch{}const Zj="startTransition",jf=Lp[Zj];function e1(e){let{basename:t,children:r,future:n,window:a}=e,i=m.useRef();i.current==null&&(i.current=nj({window:a,v5Compat:!0}));let o=i.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=m.useCallback(p=>{d&&jf?jf(()=>c(p)):c(p)},[c,d]);return m.useLayoutEffect(()=>o.listen(u),[o,u]),m.useEffect(()=>Vj(n),[n]),m.createElement(Gj,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const t1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ft=m.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:p}=t,y=Yj(t,Jj),{basename:x}=m.useContext(kn),b,f=!1;if(typeof d=="string"&&r1.test(d)&&(b=d,t1))try{let w=new URL(window.location.href),j=d.startsWith("//")?new URL(w.protocol+d):new URL(d),N=gh(j.pathname,x);j.origin===w.origin&&N!=null?d=N+j.search+j.hash:f=!0}catch{}let g=Mj(d,{relative:a}),h=n1(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:p});function v(w){n&&n(w),w.defaultPrevented||h(w)}return m.createElement("a",Qd({},y,{href:b||g,onClick:f||i?n:v,ref:r,target:c}))});var Nf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Nf||(Nf={}));var _f;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_f||(_f={}));function n1(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Be(),d=pr(),u=Yg(e,{relative:o});return m.useCallback(p=>{if(Kj(p,r)){p.preventDefault();let y=n!==void 0?n:Zo(d)===Zo(u);c(e,{replace:y,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,r,e,i,o,l])}let s1={data:""},a1=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||s1,i1=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,o1=/\/\*[^]*?\*\/|  +/g,kf=/\n+/g,tn=(e,t)=>{let r="",n="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?tn(o,i):i+"{"+tn(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=tn(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=tn.p?tn.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},yr={},Jg=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Jg(e[r]);return t}return e},l1=(e,t,r,n,a)=>{let i=Jg(e),o=yr[i]||(yr[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!yr[o]){let c=i!==e?e:(d=>{let u,p,y=[{}];for(;u=i1.exec(d.replace(o1,""));)u[4]?y.shift():u[3]?(p=u[3].replace(kf," ").trim(),y.unshift(y[0][p]=y[0][p]||{})):y[0][u[1]]=u[2].replace(kf," ").trim();return y[0]})(e);yr[o]=tn(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&yr.g?yr.g:null;return r&&(yr.g=yr[o]),((c,d,u,p)=>{p?d.data=d.data.replace(p,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(yr[o],t,n,l),o},c1=(e,t,r)=>e.reduce((n,a,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":tn(l,""):l===!1?"":l}return n+a+(o??"")},"");function Rl(e){let t=this||{},r=e.call?e(t.p):e;return l1(r.unshift?r.raw?c1(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,a1(t.target),t.g,t.o,t.k)}let Xg,Kd,Jd;Rl.bind({g:1});let Dr=Rl.bind({k:1});function d1(e,t,r,n){tn.p=t,Xg=e,Kd=r,Jd=n}function Sn(e,t){let r=this||{};return function(){let n=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;r.p=Object.assign({theme:Kd&&Kd()},l),r.o=/ *go\d+/.test(c),l.className=Rl.apply(r,n)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),Jd&&d[0]&&Jd(l),Xg(d,l)}return a}}var u1=e=>typeof e=="function",rl=(e,t)=>u1(e)?e(t):e,h1=(()=>{let e=0;return()=>(++e).toString()})(),Zg=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),m1=20,ey=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,m1)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:r}=t;return ey(e,{type:e.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},No=[],_o={toasts:[],pausedAt:void 0},ts=e=>{_o=ey(_o,e),No.forEach(t=>{t(_o)})},f1={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},p1=(e={})=>{let[t,r]=m.useState(_o);m.useEffect(()=>(No.push(r),()=>{let a=No.indexOf(r);a>-1&&No.splice(a,1)}),[t]);let n=t.toasts.map(a=>{var i,o,l;return{...e,...e[a.type],...a,removeDelay:a.removeDelay||((i=e[a.type])==null?void 0:i.removeDelay)||(e==null?void 0:e.removeDelay),duration:a.duration||((o=e[a.type])==null?void 0:o.duration)||(e==null?void 0:e.duration)||f1[a.type],style:{...e.style,...(l=e[a.type])==null?void 0:l.style,...a.style}}});return{...t,toasts:n}},x1=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||h1()}),ki=e=>(t,r)=>{let n=x1(t,e,r);return ts({type:2,toast:n}),n.id},mt=(e,t)=>ki("blank")(e,t);mt.error=ki("error");mt.success=ki("success");mt.loading=ki("loading");mt.custom=ki("custom");mt.dismiss=e=>{ts({type:3,toastId:e})};mt.remove=e=>ts({type:4,toastId:e});mt.promise=(e,t,r)=>{let n=mt.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?rl(t.success,a):void 0;return i?mt.success(i,{id:n,...r,...r==null?void 0:r.success}):mt.dismiss(n),a}).catch(a=>{let i=t.error?rl(t.error,a):void 0;i?mt.error(i,{id:n,...r,...r==null?void 0:r.error}):mt.dismiss(n)}),e};var g1=(e,t)=>{ts({type:1,toast:{id:e,height:t}})},y1=()=>{ts({type:5,time:Date.now()})},Ya=new Map,v1=1e3,w1=(e,t=v1)=>{if(Ya.has(e))return;let r=setTimeout(()=>{Ya.delete(e),ts({type:4,toastId:e})},t);Ya.set(e,r)},b1=e=>{let{toasts:t,pausedAt:r}=p1(e);m.useEffect(()=>{if(r)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&mt.dismiss(l.id);return}return setTimeout(()=>mt.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,r]);let n=m.useCallback(()=>{r&&ts({type:6,time:Date.now()})},[r]),a=m.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=o||{},u=t.filter(x=>(x.position||d)===(i.position||d)&&x.height),p=u.findIndex(x=>x.id===i.id),y=u.filter((x,b)=>b<p&&x.visible).length;return u.filter(x=>x.visible).slice(...l?[y+1]:[0,y]).reduce((x,b)=>x+(b.height||0)+c,0)},[t]);return m.useEffect(()=>{t.forEach(i=>{if(i.dismissed)w1(i.id,i.removeDelay);else{let o=Ya.get(i.id);o&&(clearTimeout(o),Ya.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:g1,startPause:y1,endPause:n,calculateOffset:a}}},j1=Dr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,N1=Dr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_1=Dr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,k1=Sn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${j1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${N1} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${_1} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,S1=Dr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,C1=Sn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${S1} 1s linear infinite;
`,E1=Dr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,M1=Dr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,P1=Sn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${E1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${M1} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,D1=Sn("div")`
  position: absolute;
`,T1=Sn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,R1=Dr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,O1=Sn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${R1} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,I1=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?m.createElement(O1,null,t):t:r==="blank"?null:m.createElement(T1,null,m.createElement(C1,{...n}),r!=="loading"&&m.createElement(D1,null,r==="error"?m.createElement(k1,{...n}):m.createElement(P1,{...n})))},A1=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,$1=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,L1="0%{opacity:0;} 100%{opacity:1;}",F1="0%{opacity:1;} 100%{opacity:0;}",U1=Sn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,z1=Sn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,B1=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=Zg()?[L1,F1]:[A1(r),$1(r)];return{animation:t?`${Dr(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Dr(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},H1=m.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?B1(e.position||t||"top-center",e.visible):{opacity:0},i=m.createElement(I1,{toast:e}),o=m.createElement(z1,{...e.ariaProps},rl(e.message,e));return m.createElement(U1,{className:e.className,style:{...a,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):m.createElement(m.Fragment,null,i,o))});d1(m.createElement);var W1=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=m.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return m.createElement("div",{ref:i,className:t,style:r},a)},V1=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Zg()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},q1=Rl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ki=16,G1=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=b1(r);return m.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ki,left:Ki,right:Ki,bottom:Ki,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let u=d.position||t,p=c.calculateOffset(d,{reverseOrder:e,gutter:n,defaultPosition:t}),y=V1(u,p);return m.createElement(W1,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?q1:"",style:y},d.type==="custom"?rl(d.message,d):a?a(d):m.createElement(H1,{toast:d,position:u}))}))},B=mt;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),oe=(e,t)=>{const r=m.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>m.createElement("svg",{ref:u,...Y1,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Q1(e)}`,l].join(" "),...d},[...t.map(([p,y])=>m.createElement(p,y)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=oe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=oe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=oe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=oe("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=oe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=oe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=oe("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=oe("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=oe("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=oe("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=oe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=oe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=oe("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=oe("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=oe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=oe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=oe("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=oe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=oe("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=oe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=oe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=oe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=oe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=oe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=oe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=oe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=oe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=oe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=oe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=oe("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=oe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=oe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function iy(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=iy(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function oy(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=iy(e))&&(n&&(n+=" "),n+=t);return n}const Pf=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Df=oy,hN=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Df(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],p=i==null?void 0:i[d];if(u===null)return null;const y=Pf(u)||Pf(p);return a[d][y]}),l=r&&Object.entries(r).reduce((d,u)=>{let[p,y]=u;return y===void 0||(d[p]=y),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:p,className:y,...x}=u;return Object.entries(x).every(b=>{let[f,g]=b;return Array.isArray(g)?g.includes({...i,...l}[f]):{...i,...l}[f]===g})?[...d,p,y]:d},[]);return Df(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},Nh="-",mN=e=>{const t=pN(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Nh);return l[0]===""&&l.length!==1&&l.shift(),ly(l,t)||fN(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},ly=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?ly(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Nh);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Tf=/^\[(.+)\]$/,fN=e=>{if(Tf.test(e)){const t=Tf.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},pN=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return gN(Object.entries(e.classGroups),r).forEach(([i,o])=>{ru(o,n,i,t)}),n},ru=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Rf(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(xN(a)){ru(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{ru(o,Rf(t,i),r,n)})})},Rf=(e,t)=>{let r=e;return t.split(Nh).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},xN=e=>e.isThemeGetter,gN=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,yN=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},cy="!",vN=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,p;for(let g=0;g<l.length;g++){let h=l[g];if(d===0){if(h===a&&(n||l.slice(g,g+i)===t)){c.push(l.slice(u,g)),u=g+i;continue}if(h==="/"){p=g;continue}}h==="["?d++:h==="]"&&d--}const y=c.length===0?l:l.substring(u),x=y.startsWith(cy),b=x?y.substring(1):y,f=p&&p>u?p-u:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:b,maybePostfixModifierPosition:f}};return r?l=>r({className:l,parseClassName:o}):o},wN=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},bN=e=>({cache:yN(e.cacheSize),parseClassName:vN(e),...mN(e)}),jN=/\s+/,NN=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(jN);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:x}=r(d);let b=!!x,f=n(b?y.substring(0,x):y);if(!f){if(!b){l=d+(l.length>0?" "+l:l);continue}if(f=n(y),!f){l=d+(l.length>0?" "+l:l);continue}b=!1}const g=wN(u).join(":"),h=p?g+cy:g,v=h+f;if(i.includes(v))continue;i.push(v);const w=a(f,b);for(let j=0;j<w.length;++j){const N=w[j];i.push(h+N)}l=d+(l.length>0?" "+l:l)}return l};function _N(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=dy(t))&&(n&&(n+=" "),n+=r);return n}const dy=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=dy(e[n]))&&(r&&(r+=" "),r+=t);return r};function kN(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,p)=>p(u),e());return r=bN(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=NN(c,r);return a(c,u),u}return function(){return i(_N.apply(null,arguments))}}const _e=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},uy=/^\[(?:([a-z-]+):)?(.+)\]$/i,SN=/^\d+\/\d+$/,CN=new Set(["px","full","screen"]),EN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vr=e=>$s(e)||CN.has(e)||SN.test(e),Wr=e=>da(e,"length",UN),$s=e=>!!e&&!Number.isNaN(Number(e)),Ac=e=>da(e,"number",$s),ka=e=>!!e&&Number.isInteger(Number(e)),RN=e=>e.endsWith("%")&&$s(e.slice(0,-1)),de=e=>uy.test(e),Vr=e=>EN.test(e),ON=new Set(["length","size","percentage"]),IN=e=>da(e,ON,hy),AN=e=>da(e,"position",hy),$N=new Set(["image","url"]),LN=e=>da(e,$N,BN),FN=e=>da(e,"",zN),Sa=()=>!0,da=(e,t,r)=>{const n=uy.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},UN=e=>MN.test(e)&&!PN.test(e),hy=()=>!1,zN=e=>DN.test(e),BN=e=>TN.test(e),HN=()=>{const e=_e("colors"),t=_e("spacing"),r=_e("blur"),n=_e("brightness"),a=_e("borderColor"),i=_e("borderRadius"),o=_e("borderSpacing"),l=_e("borderWidth"),c=_e("contrast"),d=_e("grayscale"),u=_e("hueRotate"),p=_e("invert"),y=_e("gap"),x=_e("gradientColorStops"),b=_e("gradientColorStopPositions"),f=_e("inset"),g=_e("margin"),h=_e("opacity"),v=_e("padding"),w=_e("saturate"),j=_e("scale"),N=_e("sepia"),_=_e("skew"),k=_e("space"),C=_e("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",de,t],A=()=>[de,t],V=()=>["",vr,Wr],Q=()=>["auto",$s,de],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],S=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],T=()=>["","0",de],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[$s,de];return{cacheSize:500,separator:":",theme:{colors:[Sa],spacing:[vr,Wr],blur:["none","",Vr,de],brightness:U(),borderColor:[e],borderRadius:["none","","full",Vr,de],borderSpacing:A(),borderWidth:V(),contrast:U(),grayscale:T(),hueRotate:U(),invert:T(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[RN,Wr],inset:O(),margin:O(),opacity:U(),padding:A(),saturate:U(),scale:U(),sepia:T(),skew:U(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[Vr]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),de]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ka,de]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",ka,de]}],"grid-cols":[{"grid-cols":[Sa]}],"col-start-end":[{col:["auto",{span:["full",ka,de]},de]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[Sa]}],"row-start-end":[{row:["auto",{span:[ka,de]},de]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,t]}],"min-w":[{"min-w":[de,t,"min","max","fit"]}],"max-w":[{"max-w":[de,t,"none","full","min","max","fit","prose",{screen:[Vr]},Vr]}],h:[{h:[de,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Vr,Wr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ac]}],"font-family":[{font:[Sa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",$s,Ac]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vr,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[h]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[h]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...S(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vr,Wr]}],"underline-offset":[{"underline-offset":["auto",vr,de]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[h]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),AN]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",IN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},LN]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[h]}],"border-style":[{border:[...S(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[h]}],"divide-style":[{divide:S()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...S()]}],"outline-offset":[{"outline-offset":[vr,de]}],"outline-w":[{outline:[vr,Wr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[h]}],"ring-offset-w":[{"ring-offset":[vr,Wr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Vr,FN]}],"shadow-color":[{shadow:[Sa]}],opacity:[{opacity:[h]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Vr,de]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[p]}],saturate:[{saturate:[w]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[h]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ka,de]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[vr,Wr,Ac]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},WN=kN(HN),VN="modulepreload",qN=function(e){return"/"+e},Of={},Ks=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=qN(c),c in Of)return;Of[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":VN,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((y,x)=>{p.addEventListener("load",y),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},GN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ks(async()=>{const{default:n}=await Promise.resolve().then(()=>ua);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class _h extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class YN extends _h{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class QN extends _h{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class KN extends _h{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var nu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(nu||(nu={}));var JN=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(p){o(p)}}function c(u){try{d(n.throw(u))}catch(p){o(p)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class XN{constructor(t,{headers:r={},customFetch:n,region:a=nu.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=GN(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return JN(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(b=>{throw new YN(b)}),p=u.headers.get("x-relay-error");if(p&&p==="true")throw new QN(u);if(!u.ok)throw new KN(u);let y=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return y==="application/json"?x=yield u.json():y==="application/octet-stream"?x=yield u.blob():y==="text/event-stream"?x=u:y==="multipart/form-data"?x=yield u.formData():x=yield u.text(),{data:x,error:null}}catch(a){return{data:null,error:a}}})}}var wt={},kh={},$l={},Si={},Ll={},Fl={},ZN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Js=ZN();const e_=Js.fetch,my=Js.fetch.bind(Js),fy=Js.Headers,t_=Js.Request,r_=Js.Response,ua=Object.freeze(Object.defineProperty({__proto__:null,Headers:fy,Request:t_,Response:r_,default:my,fetch:e_},Symbol.toStringTag,{value:"Module"})),n_=Pv(ua);var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});let s_=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ul.default=s_;var py=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fl,"__esModule",{value:!0});const a_=py(n_),i_=py(Ul);let o_=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=a_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,p=null,y=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const h=await i.text();h===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=h:u=JSON.parse(h))}const f=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");f&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,p=null,y=406,x="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const f=await i.text();try{d=JSON.parse(f),Array.isArray(d)&&i.status===404&&(u=[],d=null,y=200,x="OK")}catch{i.status===404&&f===""?(y=204,x="No Content"):d={message:f}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,y=200,x="OK"),d&&this.shouldThrowOnError)throw new i_.default(d)}return{error:d,data:u,count:p,status:y,statusText:x}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}};Fl.default=o_;var l_=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ll,"__esModule",{value:!0});const c_=l_(Fl);let d_=class extends c_.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ll.default=d_;var u_=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Si,"__esModule",{value:!0});const h_=u_(Ll);let m_=class extends h_.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Si.default=m_;var f_=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($l,"__esModule",{value:!0});const Ca=f_(Si);let p_=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ca.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ca.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ca.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Ca.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ca.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};$l.default=p_;var zl={},Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.version=void 0;Bl.version="0.0.0-automated";Object.defineProperty(zl,"__esModule",{value:!0});zl.DEFAULT_HEADERS=void 0;const x_=Bl;zl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${x_.version}`};var xy=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kh,"__esModule",{value:!0});const g_=xy($l),y_=xy(Si),v_=zl;let w_=class gy{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},v_.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new g_.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new gy(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,p])=>p!==void 0).map(([u,p])=>[u,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([u,p])=>{l.searchParams.append(u,p)})):(o="POST",c=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new y_.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};kh.default=w_;var ha=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wt,"__esModule",{value:!0});wt.PostgrestError=wt.PostgrestBuilder=wt.PostgrestTransformBuilder=wt.PostgrestFilterBuilder=wt.PostgrestQueryBuilder=wt.PostgrestClient=void 0;const yy=ha(kh);wt.PostgrestClient=yy.default;const vy=ha($l);wt.PostgrestQueryBuilder=vy.default;const wy=ha(Si);wt.PostgrestFilterBuilder=wy.default;const by=ha(Ll);wt.PostgrestTransformBuilder=by.default;const jy=ha(Fl);wt.PostgrestBuilder=jy.default;const Ny=ha(Ul);wt.PostgrestError=Ny.default;var b_=wt.default={PostgrestClient:yy.default,PostgrestQueryBuilder:vy.default,PostgrestFilterBuilder:wy.default,PostgrestTransformBuilder:by.default,PostgrestBuilder:jy.default,PostgrestError:Ny.default};const{PostgrestClient:j_,PostgrestQueryBuilder:aP,PostgrestFilterBuilder:iP,PostgrestTransformBuilder:oP,PostgrestBuilder:lP,PostgrestError:cP}=b_,N_="2.11.2",__={"X-Client-Info":`realtime-js/${N_}`},k_="1.0.0",_y=1e4,S_=1e3;var Ls;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ls||(Ls={}));var kt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(kt||(kt={}));var Yt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Yt||(Yt={}));var su;(function(e){e.websocket="websocket"})(su||(su={}));var $n;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})($n||($n={}));class C_{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class ky{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var je;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(je||(je={}));const If=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=E_(o,e,t,a),i),{})},E_=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?Sy(i,o):au(o)},Sy=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return T_(t,r)}switch(e){case je.bool:return M_(t);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return P_(t);case je.json:case je.jsonb:return D_(t);case je.timestamp:return R_(t);case je.abstime:case je.date:case je.daterange:case je.int4range:case je.int8range:case je.money:case je.reltime:case je.text:case je.time:case je.timestamptz:case je.timetz:case je.tsrange:case je.tstzrange:return au(t);default:return au(t)}},au=e=>e,M_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},P_=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},D_=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},T_=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Sy(t,l))}return e},R_=e=>typeof e=="string"?e.replace(" ","T"):e,Cy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class $c{constructor(t,r,n={},a=_y){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Af;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Af||(Af={}));class Qa{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qa.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Qa.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Qa.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const p=i[d];if(p){const y=u.map(g=>g.presence_ref),x=p.map(g=>g.presence_ref),b=u.filter(g=>x.indexOf(g.presence_ref)<0),f=p.filter(g=>y.indexOf(g.presence_ref)<0);b.length>0&&(l[d]=b),f.length>0&&(c[d]=f)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const p=t[l].map(x=>x.presence_ref),y=u.filter(x=>p.indexOf(x.presence_ref)<0);t[l].unshift(...y)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(p=>p.presence_ref);d=d.filter(p=>u.indexOf(p.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $f;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})($f||($f={}));var Lf;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Lf||(Lf={}));var jr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(jr||(jr={}));class Sh{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new $c(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new ky(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Qa(this),this.broadcastEndpointURL=Cy(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(jr.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(jr.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var p;if(this.socket.setAuth(),u===void 0){t==null||t(jr.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(p=y==null?void 0:y.length)!==null&&p!==void 0?p:0,b=[];for(let f=0;f<x;f++){const g=y[f],{filter:{event:h,schema:v,table:w,filter:j}}=g,N=u&&u[f];if(N&&N.event===h&&N.schema===v&&N.table===w&&N.filter===j)b.push(Object.assign(Object.assign({},g),{id:N.id}));else{this.unsubscribe(),t==null||t(jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(jr.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(jr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=kt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const a=new $c(this,Yt.leave,{},t);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new $c(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Yt;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let y=this._onMessage(o,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(x=>{var b,f,g;return((b=x.filter)===null||b===void 0?void 0:b.event)==="*"||((g=(f=x.filter)===null||f===void 0?void 0:f.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(x=>x.callback(y,n)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var b,f,g,h,v,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const j=x.id,N=(b=x.filter)===null||b===void 0?void 0:b.event;return j&&((f=r.ids)===null||f===void 0?void 0:f.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const j=(v=(h=x==null?void 0:x.filter)===null||h===void 0?void 0:h.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:f,table:g,commit_timestamp:h,type:v,errors:w}=b;y=Object.assign(Object.assign({},{schema:f,table:g,commit_timestamp:h,eventType:v,new:{},old:{},errors:w}),this._getPayloadRecords(b))}x.callback(y,n)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Sh.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Yt.close,{},t)}_onError(t){this._on(Yt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=If(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=If(t.columns,t.old_record)),r}}const O_=()=>{},I_=typeof WebSocket<"u",A_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $_{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=__,this.params={},this.timeout=_y,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=O_,this.conn=null,this.sendBuffer=[],this.serializer=new C_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Ks(async()=>{const{default:c}=await Promise.resolve().then(()=>ua);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${su.websocket}`,this.httpEndpoint=Cy(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ky(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(I_){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new L_(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ks(async()=>{const{default:t}=await import("./browser-uPpraigf.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:k_}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ls.connecting:return $n.Connecting;case Ls.open:return $n.Open;case Ls.closing:return $n.Closing;default:return $n.Closed}}isConnected(){return this.connectionState()===$n.Open}channel(t,r={config:{}}){const n=new Sh(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(a=>{r&&a.updateJoinPayload({access_token:r}),a.joinedOnce&&a._isJoined()&&a._push(Yt.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(S_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:o}=r;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Yt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([A_],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class L_{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ls.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class Ch extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function et(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class F_ extends Ch{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class iu extends Ch{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var U_=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(p){o(p)}}function c(u){try{d(n.throw(u))}catch(p){o(p)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Ey=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ks(async()=>{const{default:n}=await Promise.resolve().then(()=>ua);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},z_=()=>U_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ks(()=>Promise.resolve().then(()=>ua),void 0)).Response:Response}),ou=e=>{if(Array.isArray(e))return e.map(r=>ou(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=ou(n)}),t};var ss=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(p){o(p)}}function c(u){try{d(n.throw(u))}catch(p){o(p)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Lc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),B_=(e,t,r)=>ss(void 0,void 0,void 0,function*(){const n=yield z_();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new F_(Lc(a),e.status||500))}).catch(a=>{t(new iu(Lc(a),a))}):t(new iu(Lc(e),e))}),H_=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function Ci(e,t,r,n,a,i){return ss(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,H_(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>B_(c,l,n))})})}function ol(e,t,r,n){return ss(this,void 0,void 0,function*(){return Ci(e,"GET",t,r,n)})}function Xr(e,t,r,n,a){return ss(this,void 0,void 0,function*(){return Ci(e,"POST",t,n,a,r)})}function W_(e,t,r,n,a){return ss(this,void 0,void 0,function*(){return Ci(e,"PUT",t,n,a,r)})}function V_(e,t,r,n){return ss(this,void 0,void 0,function*(){return Ci(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function My(e,t,r,n,a){return ss(this,void 0,void 0,function*(){return Ci(e,"DELETE",t,n,a,r)})}var yt=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(p){o(p)}}function c(u){try{d(n.throw(u))}catch(p){o(p)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const q_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ff={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class G_{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Ey(a)}uploadOrUpdate(t,r,n,a){return yt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ff),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),p=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),y=yield p.json();return p.ok?{data:{path:d,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(i){if(et(i))return{data:null,error:i};throw i}})}upload(t,r,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return yt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Ff.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const p=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),y=yield p.json();return p.ok?{data:{path:i,fullPath:y.Key},error:null}:{data:null,error:y}}catch(c){if(et(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return yt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Xr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Ch("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}})}update(t,r,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return yt(this,void 0,void 0,function*(){try{return{data:yield Xr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(et(a))return{data:null,error:a};throw a}})}copy(t,r,n){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield Xr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(et(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return yt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Xr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(et(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return yt(this,void 0,void 0,function*(){try{const a=yield Xr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(et(a))return{data:null,error:a};throw a}})}download(t,r){return yt(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ol(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(et(l))return{data:null,error:l};throw l}})}info(t){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ol(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ou(n),error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}})}exists(t){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield V_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(et(n)&&n instanceof iu){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return yt(this,void 0,void 0,function*(){try{return{data:yield My(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(et(r))return{data:null,error:r};throw r}})}list(t,r,n){return yt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},q_),r),{prefix:t||""});return{data:yield Xr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(et(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Y_="2.7.1",Q_={"X-Client-Info":`storage-js/${Y_}`};var ds=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(p){o(p)}}function c(u){try{d(n.throw(u))}catch(p){o(p)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class K_{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Q_),r),this.fetch=Ey(n)}listBuckets(){return ds(this,void 0,void 0,function*(){try{return{data:yield ol(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(et(t))return{data:null,error:t};throw t}})}getBucket(t){return ds(this,void 0,void 0,function*(){try{return{data:yield ol(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(et(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ds(this,void 0,void 0,function*(){try{return{data:yield Xr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ds(this,void 0,void 0,function*(){try{return{data:yield W_(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ds(this,void 0,void 0,function*(){try{return{data:yield Xr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(et(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ds(this,void 0,void 0,function*(){try{return{data:yield My(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(et(r))return{data:null,error:r};throw r}})}}class J_ extends K_{constructor(t,r={},n){super(t,r,n)}from(t){return new G_(this.url,this.headers,t,this.fetch)}}const X_="2.48.1";let $a="";typeof Deno<"u"?$a="deno":typeof document<"u"?$a="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$a="react-native":$a="node";const Z_={"X-Client-Info":`supabase-js-${$a}/${X_}`},ek={headers:Z_},tk={schema:"public"},rk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nk={};var sk=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(p){o(p)}}function c(u){try{d(n.throw(u))}catch(p){o(p)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const ak=e=>{let t;return e?t=e:typeof fetch>"u"?t=my:t=fetch,(...r)=>t(...r)},ik=()=>typeof Headers>"u"?fy:Headers,ok=(e,t,r)=>{const n=ak(r),a=ik();return(i,o)=>sk(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var lk=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(p){o(p)}}function c(u){try{d(n.throw(u))}catch(p){o(p)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};function ck(e){return e.replace(/\/$/,"")}function dk(e,t){const{db:r,auth:n,realtime:a,global:i}=e,{db:o,auth:l,realtime:c,global:d}=t,u={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),a),global:Object.assign(Object.assign({},d),i),accessToken:()=>lk(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}const Py="2.67.3",uk="http://localhost:9999",hk="supabase.auth.token",mk={"X-Client-Info":`gotrue-js/${Py}`},Uf=10,lu="X-Supabase-Api-Version",Dy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function fk(e){return Math.round(Date.now()/1e3)+e}function pk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ar=()=>typeof window<"u"&&typeof document<"u",Dn={tested:!1,writable:!1},Ka=()=>{if(!ar())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Dn.tested)return Dn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Dn.tested=!0,Dn.writable=!0}catch{Dn.tested=!0,Dn.writable=!1}return Dn.writable};function xk(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const Ty=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ks(async()=>{const{default:n}=await Promise.resolve().then(()=>ua);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},gk=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ry=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ji=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Xi=async(e,t)=>{await e.removeItem(t)};function yk(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,a,i,o,l,c,d,u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)o=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),d=t.indexOf(e.charAt(u++)),n=o<<2|l>>4,a=(l&15)<<4|c>>2,i=(c&3)<<6|d,r=r+String.fromCharCode(n),c!=64&&a!=0&&(r=r+String.fromCharCode(a)),d!=64&&i!=0&&(r=r+String.fromCharCode(i));return r}class Hl{constructor(){this.promise=new Hl.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Hl.promiseConstructor=Promise;function zf(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=e.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse(yk(n))}async function vk(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function wk(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function bk(e){return("0"+e.toString(16)).substr(-2)}function jk(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,bk).join("")}async function Nk(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}function _k(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kk(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Nk(e);return _k(r)}async function us(e,t,r=!1){const n=jk();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Ry(e,`${t}-code-verifier`,a);const i=await kk(n);return[i,n===i?"plain":"s256"]}const Sk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ck(e){const t=e.headers.get(lu);if(!t||!t.match(Sk))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class Eh extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Ek extends Eh{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Mk(e){return ue(e)&&e.name==="AuthApiError"}class Oy extends Eh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class as extends Eh{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Gr extends as{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Pk(e){return ue(e)&&e.name==="AuthSessionMissingError"}class Fc extends as{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zi extends as{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class eo extends as{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Dk(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bf extends as{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cu extends as{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Uc(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class Hf extends as{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}var Tk=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const On=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Rk=[502,503,504];async function Wf(e){var t;if(!gk(e))throw new cu(On(e),0);if(Rk.includes(e.status))throw new cu(On(e),e.status);let r;try{r=await e.json()}catch(i){throw new Oy(On(i),i)}let n;const a=Ck(e);if(a&&a.getTime()>=Dy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Hf(On(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Gr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Hf(On(r),e.status,r.weak_password.reasons);throw new Ek(On(r),e.status||500,n)}const Ok=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function pe(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[lu]||(i[lu]=Dy["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Ik(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Ik(e,t,r,n,a,i){const o=Ok(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new cu(On(c),0)}if(l.ok||await Wf(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Wf(c)}}function Yr(e){var t;let r=null;Fk(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=fk(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Vf(e){const t=Yr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function rn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ak(e){return{data:e,error:null}}function $k(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=Tk(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Lk(e){return e}function Fk(e){return e.access_token&&e.refresh_token&&e.expires_in}var Uk=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class zk{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Ty(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:rn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Uk(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:$k,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:rn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Lk});if(u.error)throw u.error;const p=await u.json(),y=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(b=>{const f=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(b.split(";")[1].split("=")[1]);d[`${g}Page`]=f}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(ue(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:rn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:rn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:rn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}}const Bk={getItem:e=>Ka()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ka()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ka()&&globalThis.localStorage.removeItem(e)}};function qf(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Hk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const hs={debug:!!(globalThis&&Ka()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Iy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Wk extends Iy{}async function Vk(e,t,r){hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),hs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Wk(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(hs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Hk();const qk={url:uk,storageKey:hk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Ea=30*1e3,Gf=3;async function Yf(e,t,r){return await r()}class gi{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gi.nextInstanceID,gi.nextInstanceID+=1,this.instanceID>0&&ar()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},qk),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new zk({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Ty(a.fetch),this.lock=a.lock||Yf,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ar()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Vk:this.lock=Yf,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Ka()?this.storage=Bk:(this.memoryStorage={},this.storage=qf(this.memoryStorage)):(this.memoryStorage={},this.storage=qf(this.memoryStorage)),ar()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Py}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=xk(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ar()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Dk(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ue(r)?{error:r}:{error:new Oy("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Yr}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:p,options:y}=t;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await us(this.storage,this.storageKey)),i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:u,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:b},xform:Yr})}else if("phone"in t){const{phone:u,password:p,options:y}=t;i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Yr})}else throw new Zi("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vf})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vf})}else throw new Zi("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Fc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await Ji(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Yr});if(await Xi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Fc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(ue(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Yr}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Fc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await us(this.storage,this.storageKey));const{error:p}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Zi("You must provide either an email or phone number.")}catch(l){if(ue(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Yr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await us(this.storage,this.storageKey)),await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ak})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Gr;const{error:a}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Zi("You must provide either an email or phone number and a type")}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ji(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:rn}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gr}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:rn})})}catch(r){if(ue(r))return Pk(r)&&(await this._removeSession(),await Xi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Gr;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await us(this.storage,this.storageKey));const{data:d,error:u}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:rn});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return zf(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Gr;const r=Date.now()/1e3;let n=r,a=!0,i=null;const o=zf(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ue(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Gr;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ar())throw new eo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new eo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bf("No code detected.");const{data:v,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new eo("No session defined in URL");const u=Math.round(Date.now()/1e3),p=parseInt(l);let y=u+p;c&&(y=parseInt(c));const x=y-u;x*1e3<=Ea&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const b=y-p;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,u);const{data:f,error:g}=await this._getUser(i);if(g)throw g;const h={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:p,expires_at:y,refresh_token:o,token_type:d,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:h,redirectType:t.type},error:null}}catch(n){if(ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ji(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Mk(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Xi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=pk(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await us(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:p,error:y}=i;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",x,{headers:this.headers,jwt:(u=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return ar()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ue(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await wk(async a=>(a>0&&await vk(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Yr})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Uc(i)&&Date.now()+o-n<Ea})}catch(n){if(this._debug(r,"error",n),ue(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ar()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Ji(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)<a+Uf;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Uf}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Uc(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Gr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Hl;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Gr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),ue(i)){const o={session:null,error:i};return Uc(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ry(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Xi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ar()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ea);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Ea);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ea}ms, refresh threshold is ${Gf} ticks`),a<=Gf&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Iy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ar()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await us(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}gi.nextInstanceID=0;const Gk=gi;class Yk extends Gk{constructor(t){super(t)}}var Qk=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(p){o(p)}}function c(u){try{d(n.throw(u))}catch(p){o(p)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class Kk{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=ck(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:tk,realtime:nk,auth:Object.assign(Object.assign({},rk),{storageKey:c}),global:ek},u=dk(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=ok(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new j_(`${l}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new XN(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new J_(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Qk(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,u){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yk({url:this.authUrl,headers:Object.assign(Object.assign({},p),d),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new $_(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Jk=(e,t,r)=>new Kk(e,t,r),Xk="https://gtvyyyuipmbnutzgnupb.supabase.co",Zk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0dnl5eXVpcG1ibnV0emdudXBiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkxMTc0ODksImV4cCI6MjA1NDY5MzQ4OX0.t7EAX9LoVM2TVHqy-3VgSwwiutlYGDz37g4xGNwtqn0",I=Jk(Xk,Zk,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});function Ze(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Zt(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Or(e,t){const r=Ze(e);return isNaN(t)?Zt(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Ay(e,t){const r=Ze(e);if(isNaN(t))return Zt(e,NaN);if(!t)return r;const n=r.getDate(),a=Zt(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function eS(e,t){const r=+Ze(e);return Zt(e,r+t)}const $y=6048e5,tS=864e5,rS=36e5;function nS(e,t){return eS(e,t*rS)}let sS={};function Ei(){return sS}function Ir(e,t){var l,c,d,u;const r=Ei(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Ze(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ll(e){return Ir(e,{weekStartsOn:1})}function Ly(e){const t=Ze(e),r=t.getFullYear(),n=Zt(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=ll(n),i=Zt(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=ll(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Xs(e){const t=Ze(e);return t.setHours(0,0,0,0),t}function Qf(e){const t=Ze(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function aS(e,t){const r=Xs(e),n=Xs(t),a=+r-Qf(r),i=+n-Qf(n);return Math.round((a-i)/tS)}function iS(e){const t=Ly(e),r=Zt(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ll(r)}function oS(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function lS(e){if(!oS(e)&&typeof e!="number")return!1;const t=Ze(e);return!isNaN(Number(t))}function Wl(e){const t=Ze(e);return t.setHours(23,59,59,999),t}function Vl(e){const t=Ze(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function ql(e){const t=Ze(e);return t.setDate(1),t.setHours(0,0,0,0),t}function cS(e){const t=Ze(e),r=Zt(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Gl(e,t){var l,c,d,u;const r=Ei(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Ze(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}const dS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uS=(e,t,r)=>{let n;const a=dS[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function zc(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const hS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mS={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pS={date:zc({formats:hS,defaultWidth:"full"}),time:zc({formats:mS,defaultWidth:"full"}),dateTime:zc({formats:fS,defaultWidth:"full"})},xS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gS=(e,t,r,n)=>xS[e];function Ma(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const yS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},NS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_S=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},kS={ordinalNumber:_S,era:Ma({values:yS,defaultWidth:"wide"}),quarter:Ma({values:vS,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ma({values:wS,defaultWidth:"wide"}),day:Ma({values:bS,defaultWidth:"wide"}),dayPeriod:Ma({values:jS,defaultWidth:"wide",formattingValues:NS,defaultFormattingWidth:"wide"})};function Pa(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?CS(l,p=>p.test(o)):SS(l,p=>p.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function SS(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function CS(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function ES(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const MS=/^(\d+)(th|st|nd|rd)?/i,PS=/\d+/i,DS={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TS={any:[/^b/i,/^(a|c)/i]},RS={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},OS={any:[/1/i,/2/i,/3/i,/4/i]},IS={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},AS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$S={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},LS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},FS={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},US={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zS={ordinalNumber:ES({matchPattern:MS,parsePattern:PS,valueCallback:e=>parseInt(e,10)}),era:Pa({matchPatterns:DS,defaultMatchWidth:"wide",parsePatterns:TS,defaultParseWidth:"any"}),quarter:Pa({matchPatterns:RS,defaultMatchWidth:"wide",parsePatterns:OS,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pa({matchPatterns:IS,defaultMatchWidth:"wide",parsePatterns:AS,defaultParseWidth:"any"}),day:Pa({matchPatterns:$S,defaultMatchWidth:"wide",parsePatterns:LS,defaultParseWidth:"any"}),dayPeriod:Pa({matchPatterns:FS,defaultMatchWidth:"any",parsePatterns:US,defaultParseWidth:"any"})},BS={code:"en-US",formatDistance:uS,formatLong:pS,formatRelative:gS,localize:kS,match:zS,options:{weekStartsOn:0,firstWeekContainsDate:1}};function HS(e){const t=Ze(e);return aS(t,cS(t))+1}function WS(e){const t=Ze(e),r=+ll(t)-+iS(t);return Math.round(r/$y)+1}function Fy(e,t){var u,p,y,x;const r=Ze(e),n=r.getFullYear(),a=Ei(),i=(t==null?void 0:t.firstWeekContainsDate)??((p=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:p.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(y=a.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??1,o=Zt(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Ir(o,t),c=Zt(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=Ir(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function VS(e,t){var l,c,d,u;const r=Ei(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=Fy(e,t),i=Zt(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Ir(i,t)}function qS(e,t){const r=Ze(e),n=+Ir(r,t)-+VS(r,t);return Math.round(n/$y)+1}function ye(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const qr={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return ye(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):ye(r+1,2)},d(e,t){return ye(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return ye(e.getHours()%12||12,t.length)},H(e,t){return ye(e.getHours(),t.length)},m(e,t){return ye(e.getMinutes(),t.length)},s(e,t){return ye(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return ye(a,t.length)}},ms={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Kf={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return qr.y(e,t)},Y:function(e,t,r,n){const a=Fy(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return ye(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):ye(i,t.length)},R:function(e,t){const r=Ly(e);return ye(r,t.length)},u:function(e,t){const r=e.getFullYear();return ye(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ye(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ye(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return qr.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ye(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=qS(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):ye(a,t.length)},I:function(e,t,r){const n=WS(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):ye(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):qr.d(e,t)},D:function(e,t,r){const n=HS(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ye(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ye(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ye(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return ye(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=ms.noon:n===0?a=ms.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=ms.evening:n>=12?a=ms.afternoon:n>=4?a=ms.morning:a=ms.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return qr.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):qr.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ye(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):ye(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):qr.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):qr.s(e,t)},S:function(e,t){return qr.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Xf(n);case"XXXX":case"XX":return In(n);case"XXXXX":case"XXX":default:return In(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Xf(n);case"xxxx":case"xx":return In(n);case"xxxxx":case"xxx":default:return In(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Jf(n,":");case"OOOO":default:return"GMT"+In(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Jf(n,":");case"zzzz":default:return"GMT"+In(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return ye(n,t.length)},T:function(e,t,r){const n=e.getTime();return ye(n,t.length)}};function Jf(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+ye(i,2)}function Xf(e,t){return e%60===0?(e>0?"-":"+")+ye(Math.abs(e)/60,2):In(e,t)}function In(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=ye(Math.trunc(n/60),2),i=ye(n%60,2);return r+a+t+i}const Zf=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Uy=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},GS=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return Zf(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Zf(n,t)).replace("{{time}}",Uy(a,t))},YS={p:Uy,P:GS},QS=/^D+$/,KS=/^Y+$/,JS=["D","DD","YY","YYYY"];function XS(e){return QS.test(e)}function ZS(e){return KS.test(e)}function eC(e,t,r){const n=tC(e,t,r);if(console.warn(n),JS.includes(e))throw new RangeError(n)}function tC(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sC=/^'([^]*?)'?$/,aC=/''/g,iC=/[a-zA-Z]/;function H(e,t,r){var u,p,y,x;const n=Ei(),a=n.locale??BS,i=n.firstWeekContainsDate??((p=(u=n.locale)==null?void 0:u.options)==null?void 0:p.firstWeekContainsDate)??1,o=n.weekStartsOn??((x=(y=n.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,l=Ze(e);if(!lS(l))throw new RangeError("Invalid time value");let c=t.match(nC).map(b=>{const f=b[0];if(f==="p"||f==="P"){const g=YS[f];return g(b,a.formatLong)}return b}).join("").match(rC).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const f=b[0];if(f==="'")return{isToken:!1,value:oC(b)};if(Kf[f])return{isToken:!0,value:b};if(f.match(iC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(b=>{if(!b.isToken)return b.value;const f=b.value;(ZS(f)||XS(f))&&eC(f,t,String(e));const g=Kf[f[0]];return g(l,f,a.localize,d)}).join("")}function oC(e){const t=e.match(sC);return t?t[1].replace(aC,"'"):e}function lC(e){return+Ze(e)>Date.now()}function Mi(e,t){return Or(e,-t)}function Tt(...e){return WN(oy(e))}function Ee(e){const t=new Date(e);return nS(t,8)}function cC(e,t){return H(Ee(new Date(e)),t)}async function Yl(e){return new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=a=>{var o;const i=new Image;i.src=(o=a.target)==null?void 0:o.result,i.onload=()=>{const l=document.createElement("canvas"),c=800,d=800;let u=i.width,p=i.height;u>p?u>c&&(p*=c/u,u=c):p>d&&(u*=d/p,p=d),l.width=u,l.height=p;const y=l.getContext("2d");y==null||y.drawImage(i,0,0,u,p),l.toBlob(x=>{x?t(x):r(new Error("Canvas to Blob conversion failed"))},"image/jpeg",.8)}},n.onerror=a=>r(a)})}function Br(e,t){const r=Object.keys(e[0]),n=[r.join(","),...e.map(o=>r.map(l=>{const c=o[l];return c==null?"":typeof c=="string"?'"'+c.replace(/"/g,'""')+'"':typeof c=="boolean"?c?"Yes":"No":c instanceof Date?cC(c,"yyyy-MM-dd HH:mm:ss"):c}).join(","))].join(`
`),a=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");if(i.download!==void 0){const o=URL.createObjectURL(a);i.setAttribute("href",o),i.setAttribute("download",t),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}async function zy(e,t){var r;try{if(t==="suspended")return"suspended";const{data:n,error:a}=await I.from("settings").select("value").eq("key","membership").single();if(a)return console.error("Error fetching settings:",a),t;const i=((r=n==null?void 0:n.value)==null?void 0:r.grace_period_days)||7,o=Ee(new Date),l=Ee(new Date(e)),c=new Date(l);return c.setDate(c.getDate()+i),l>o?"active":c>o?"grace":"expired"}catch(n){return console.error("Error calculating member status:",n),t}}async function By(e){try{const t=await zy(e.expiry_date,e.status);if(t!==e.status){const{error:r}=await I.from("members").update({status:t}).eq("id",e.id);if(r)throw r}}catch(t){throw console.error("Error updating member status:",t),t}}function to(e){return new Promise(t=>{try{let r;switch(e){case"active":r="https://cdn.pixabay.com/audio/2022/03/15/audio_163a75c6ce.mp3";break;case"grace":r="https://cdn.pixabay.com/audio/2022/11/17/audio_8049345f8b.mp3";break;case"expired":r="https://cdn.pixabay.com/audio/2022/03/10/audio_c8f90efa8b.mp3";break;case"suspended":r="https://cdn.pixabay.com/audio/2022/03/10/audio_c8f90efa8b.mp3";break;default:r="https://cdn.pixabay.com/audio/2022/03/10/audio_c8f90efa8b.mp3"}const n=new Audio(r),a=n.play();a!==void 0?a.then(()=>{n.onended=()=>t()}).catch(i=>{console.warn("Audio playback failed:",i),t()}):n.onended=()=>t()}catch(r){console.warn("Error setting up audio:",r),t()}})}const dC=hN("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none active:scale-95",{variants:{variant:{default:"bg-orange-600 text-white hover:bg-orange-700 shadow-sm",outline:"border border-orange-600 text-orange-600 hover:bg-orange-50 shadow-sm",ghost:"hover:bg-orange-50 text-orange-600",link:"text-orange-600 underline-offset-4 hover:underline"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 text-xs",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),M=We.forwardRef(({className:e,variant:t,size:r,...n},a)=>s.jsx("button",{className:Tt(dC({variant:t,size:r,className:e})),ref:a,...n}));M.displayName="Button";const re=We.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Tt("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white","placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-600 focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","shadow-sm",e),ref:n,...r}));re.displayName="Input";const uC={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0dnl5eXVpcG1ibnV0emdudXBiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkxMTc0ODksImV4cCI6MjA1NDY5MzQ4OX0.t7EAX9LoVM2TVHqy-3VgSwwiutlYGDz37g4xGNwtqn0",VITE_SUPABASE_URL:"https://gtvyyyuipmbnutzgnupb.supabase.co"},ep=e=>{let t;const r=new Set,n=(u,p)=>{const y=typeof u=="function"?u(t):u;if(!Object.is(y,t)){const x=t;t=p??(typeof y!="object"||y===null)?y:Object.assign({},t,y),r.forEach(b=>b(t,x))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>d,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(uC?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=t=e(n,a,c);return c},hC=e=>e?ep(e):ep;var Hy={exports:{}},Wy={},Vy={exports:{}},qy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs=m;function mC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fC=typeof Object.is=="function"?Object.is:mC,pC=Zs.useState,xC=Zs.useEffect,gC=Zs.useLayoutEffect,yC=Zs.useDebugValue;function vC(e,t){var r=t(),n=pC({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return gC(function(){a.value=r,a.getSnapshot=t,Bc(a)&&i({inst:a})},[e,r,t]),xC(function(){return Bc(a)&&i({inst:a}),e(function(){Bc(a)&&i({inst:a})})},[e]),yC(r),r}function Bc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fC(e,r)}catch{return!0}}function wC(e,t){return t()}var bC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wC:vC;qy.useSyncExternalStore=Zs.useSyncExternalStore!==void 0?Zs.useSyncExternalStore:bC;Vy.exports=qy;var jC=Vy.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=m,NC=jC;function _C(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kC=typeof Object.is=="function"?Object.is:_C,SC=NC.useSyncExternalStore,CC=Ql.useRef,EC=Ql.useEffect,MC=Ql.useMemo,PC=Ql.useDebugValue;Wy.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=CC(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=MC(function(){function c(x){if(!d){if(d=!0,u=x,x=n(x),a!==void 0&&o.hasValue){var b=o.value;if(a(b,x))return p=b}return p=x}if(b=p,kC(u,x))return b;var f=n(x);return a!==void 0&&a(b,f)?(u=x,b):(u=x,p=f)}var d=!1,u,p,y=r===void 0?null:r;return[function(){return c(t())},y===null?void 0:function(){return c(y())}]},[t,r,n,a]);var l=SC(e,i[0],i[1]);return EC(function(){o.hasValue=!0,o.value=l},[l]),PC(l),l};Hy.exports=Wy;var DC=Hy.exports;const TC=ju(DC),Gy={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0dnl5eXVpcG1ibnV0emdudXBiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkxMTc0ODksImV4cCI6MjA1NDY5MzQ4OX0.t7EAX9LoVM2TVHqy-3VgSwwiutlYGDz37g4xGNwtqn0",VITE_SUPABASE_URL:"https://gtvyyyuipmbnutzgnupb.supabase.co"},{useDebugValue:RC}=We,{useSyncExternalStoreWithSelector:OC}=TC;let tp=!1;const IC=e=>e;function AC(e,t=IC,r){(Gy?"production":void 0)!=="production"&&r&&!tp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),tp=!0);const n=OC(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return RC(n),n}const rp=e=>{(Gy?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?hC(e):e,r=(n,a)=>AC(t,n,a);return Object.assign(r,t),r},$C=e=>e?rp(e):rp,Fe=$C(e=>({user:null,loading:!0,setUser:t=>e({user:t,loading:!1}),signIn:async(t,r)=>{try{const{data:n,error:a}=await I.auth.signInWithPassword({email:t,password:r});if(a)throw a.message==="Invalid login credentials"?new Error("Invalid login credentials"):a;if(!n.user)throw new Error("No user data returned");const{data:i,error:o}=await I.from("users").select("id, email, role, active, name, created_at").eq("id",n.user.id).single();if(o)throw new Error("Error fetching user data");if(!i)throw new Error("No account found with this email");if(i.active===!1)throw await I.auth.signOut(),new Error("Your account has been deactivated. Please contact an administrator.");e({user:i,loading:!1})}catch(n){throw e({user:null,loading:!1}),n}},signOut:async()=>{try{const{error:t}=await I.auth.signOut();if(t)throw t;e({user:null,loading:!1})}catch(t){throw console.error("Error signing out:",t),t}},resetPassword:async t=>{try{const{data:r,error:n}=await I.auth.signInWithPassword({email:t,password:"dummy-password"});if(n&&n.message!=="Invalid login credentials"&&n.message!=="Email not confirmed"){const{data:i,error:o}=await I.from("users").select("id, is_active").eq("email",t).single();if(o||!i)throw new Error("No account found with this email");if(!i.is_active)throw new Error("This account has been deactivated. Please contact your administrator.")}const{error:a}=await I.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});if(a)throw new Error("Failed to send password reset email. Please try again later.")}catch(r){throw console.error("Error in resetPassword:",r),r}}}));let fs=null;const LC=e=>new Promise((t,r)=>{const n=new Image;n.onload=()=>t(),n.onerror=()=>r(),n.src=e});function Mh({className:e="",showText:t=!1,size:r="default"}){const[n,a]=We.useState(()=>fs||{logo_text:"Friendly Muscle Fitness",icon_enabled:!0,icon_color:"#ea580c",logo_url:null}),[i,o]=We.useState(!!fs),[l,c]=We.useState(!1);We.useEffect(()=>{let x=!0;return fs||(async()=>{try{if(fs){x&&(a(fs),o(!0));return}const{data:f,error:g}=await I.from("settings").select("value").eq("key","branding").maybeSingle();if(g)throw g;if(f!=null&&f.value&&x){const h={logo_text:f.value.logo_text||"Friendly Muscle Fitness",icon_enabled:f.value.icon_enabled??!0,icon_color:f.value.icon_color||"#ea580c",logo_url:f.value.logo_url||null};if(fs=h,h.logo_url)try{await LC(h.logo_url)}catch{x&&c(!0)}x&&a(h)}}catch(f){console.error("Error fetching logo settings:",f)}finally{x&&o(!0)}})(),()=>{x=!1}},[]);const d=()=>{switch(r){case"menu":return"h-24 w-24";case"large":return"h-16 w-16";case"medium":return"h-12 w-12";default:return"h-8 w-8"}},u=()=>{switch(r){case"menu":return"h-96 w-96";case"large":return"h-64 w-64";case"medium":return"h-48 w-48";default:return"h-32 w-32"}},p=()=>{switch(r){case"menu":return"text-3xl";case"large":return"text-2xl";case"medium":return"text-xl";default:return"text-lg"}},y=()=>s.jsxs(s.Fragment,{children:[n.icon_enabled&&s.jsx(rN,{className:d(),style:{color:n.icon_color}}),t&&s.jsx("span",{className:`font-semibold ${p()} ${n.icon_enabled?"ml-2":""}`,children:n.logo_text})]});return i?s.jsx("div",{className:`flex-shrink-0 flex items-center ${e}`,children:n.logo_url&&!l?s.jsx("img",{src:n.logo_url,alt:n.logo_text,className:`object-contain ${u()}`,onError:()=>c(!0),loading:"eager",crossOrigin:"anonymous"}):y()}):s.jsx("div",{className:`flex-shrink-0 flex items-center ${e}`,children:s.jsx("div",{className:`animate-pulse bg-gray-200 rounded ${u()}`})})}function FC(){const[e,t]=m.useState(""),[r,n]=m.useState(""),[a,i]=m.useState(!1),[o,l]=m.useState(!1),[c,d]=m.useState(!0),u=Be(),p=Fe(g=>g.signIn),y=Fe(g=>g.user),x=Fe(g=>g.resetPassword);m.useEffect(()=>{y&&u("/")},[y,u]),m.useEffect(()=>{(async()=>{try{const{data:h,error:v}=await I.rpc("get_public_settings");if(v){console.error("Error fetching public settings:",v);return}h&&typeof h.enable_password_reset=="boolean"?d(h.enable_password_reset):console.warn("Public settings format unexpected or missing enable_password_reset flag.")}catch(h){console.error("Exception fetching public settings:",h)}})()},[]);const b=async g=>{g.preventDefault(),i(!0);try{await p(e,r);const h=Fe.getState().user;(h==null?void 0:h.role)==="admin"||(h==null?void 0:h.role)==="superadmin"?u("/admin/daily-summary"):u("/")}catch(h){let v="Error signing in";if(h.message==="Invalid login credentials"?v="Invalid email or password":h.message==="No account found with this email"?v="No account found with this email":h.message.includes("Email not confirmed")&&(v="Please confirm your email before signing in"),B.error(v),n(""),h.message==="Invalid login credentials"){const w=document.getElementById("password");w&&w.focus()}}finally{i(!1)}},f=async g=>{g.preventDefault(),i(!0);try{if(!e){B.error("Please enter your email address");return}await x(e),B.success("If an account exists with this email, you will receive a password reset link shortly."),l(!1)}catch(h){h.message==="No account found with this email"?B.error("No account found with this email. Please check your email address and try again."):B.error(h.message||"Error sending reset link. Please try again later.")}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[s.jsxs("div",{className:"flex flex-col items-center mb-6",children:[s.jsx(Mh,{className:"mb-1 h-[130px]",showText:!1,size:"large"}),s.jsx("p",{className:"text-gray-600",children:"Gym Membership System"})]}),o?s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"resetEmail",className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx(re,{id:"resetEmail",type:"email",value:e,onChange:g=>t(g.target.value),required:!0,disabled:a,autoComplete:"email",autoFocus:!0,className:"mt-1"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:a,children:"Back to Login"}),s.jsx(M,{type:"submit",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Reset Link"})]})]}):s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx(re,{id:"email",type:"email",value:e,onChange:g=>t(g.target.value),required:!0,disabled:a,autoComplete:"email",autoFocus:!0,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsx(re,{id:"password",type:"password",value:r,onChange:g=>n(g.target.value),required:!0,disabled:a,autoComplete:"current-password",className:"mt-1"}),s.jsx("div",{className:"mt-1 text-right",children:c&&s.jsx("button",{type:"button",onClick:()=>l(!0),className:"text-sm text-orange-600 hover:text-orange-500",disabled:a,children:"Forgot Password?"})})]}),s.jsx(M,{type:"submit",className:"w-full",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})]})})}function Se(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function np(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Yy(...e){return t=>{let r=!1;const n=e.map(a=>{const i=np(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():np(e[a],null)}}}}function ze(...e){return m.useCallback(Yy(...e),e)}function UC(e,t){const r=m.createContext(t),n=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=m.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function Kl(e,t=[]){let r=[];function n(i,o){const l=m.createContext(o),c=r.length;r=[...r,o];const d=p=>{var h;const{scope:y,children:x,...b}=p,f=((h=y==null?void 0:y[e])==null?void 0:h[c])||l,g=m.useMemo(()=>b,Object.values(b));return s.jsx(f.Provider,{value:g,children:x})};d.displayName=i+"Provider";function u(p,y){var f;const x=((f=y==null?void 0:y[e])==null?void 0:f[c])||l,b=m.useContext(x);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,zC(a,...t)]}function zC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const p=c(i)[`__scope${d}`];return{...l,...p}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var pt=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},BC=Lp.useId||(()=>{}),HC=0;function Fs(e){const[t,r]=m.useState(BC());return pt(()=>{r(n=>n??String(HC++))},[e]),t?`radix-${t}`:""}function Ar(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function du({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=WC({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,l=Ar(r),c=m.useCallback(d=>{if(i){const p=typeof d=="function"?d(e):d;p!==e&&l(p)}else a(d)},[i,e,a,l]);return[o,c]}function WC({defaultProp:e,onChange:t}){const r=m.useState(e),[n]=r,a=m.useRef(n),i=Ar(t);return m.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var ea=m.forwardRef((e,t)=>{const{children:r,...n}=e,a=m.Children.toArray(r),i=a.find(qC);if(i){const o=i.props.children,l=a.map(c=>c===i?m.Children.count(o)>1?m.Children.only(null):m.isValidElement(o)?o.props.children:null:c);return s.jsx(uu,{...n,ref:t,children:m.isValidElement(o)?m.cloneElement(o,void 0,l):null})}return s.jsx(uu,{...n,ref:t,children:r})});ea.displayName="Slot";var uu=m.forwardRef((e,t)=>{const{children:r,...n}=e;if(m.isValidElement(r)){const a=YC(r),i=GC(n,r.props);return r.type!==m.Fragment&&(i.ref=t?Yy(t,a):a),m.cloneElement(r,i)}return m.Children.count(r)>1?m.Children.only(null):null});uu.displayName="SlotClone";var VC=({children:e})=>s.jsx(s.Fragment,{children:e});function qC(e){return m.isValidElement(e)&&e.type===VC}function GC(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{i(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function YC(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var QC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Me=QC.reduce((e,t)=>{const r=m.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?ea:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function KC(e,t){e&&aa.flushSync(()=>e.dispatchEvent(t))}function JC(e,t=globalThis==null?void 0:globalThis.document){const r=Ar(e);m.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var XC="DismissableLayer",hu="dismissableLayer.update",ZC="dismissableLayer.pointerDownOutside",e2="dismissableLayer.focusOutside",sp,Qy=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ph=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=m.useContext(Qy),[u,p]=m.useState(null),y=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=m.useState({}),b=ze(t,k=>p(k)),f=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),h=f.indexOf(g),v=u?f.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,j=v>=h,N=n2(k=>{const C=k.target,R=[...d.branches].some(P=>P.contains(C));!j||R||(a==null||a(k),o==null||o(k),k.defaultPrevented||l==null||l())},y),_=s2(k=>{const C=k.target;[...d.branches].some(P=>P.contains(C))||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},y);return JC(k=>{v===d.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},y),m.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(sp=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),ap(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=sp)}},[u,y,r,d]),m.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),ap())},[u,d]),m.useEffect(()=>{const k=()=>x({});return document.addEventListener(hu,k),()=>document.removeEventListener(hu,k)},[]),s.jsx(Me.div,{...c,ref:b,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:Se(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Se(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Se(e.onPointerDownCapture,N.onPointerDownCapture)})});Ph.displayName=XC;var t2="DismissableLayerBranch",r2=m.forwardRef((e,t)=>{const r=m.useContext(Qy),n=m.useRef(null),a=ze(t,n);return m.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Me.div,{...e,ref:a})});r2.displayName=t2;function n2(e,t=globalThis==null?void 0:globalThis.document){const r=Ar(e),n=m.useRef(!1),a=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){Ky(ZC,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function s2(e,t=globalThis==null?void 0:globalThis.document){const r=Ar(e),n=m.useRef(!1);return m.useEffect(()=>{const a=i=>{i.target&&!n.current&&Ky(e2,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ap(){const e=new CustomEvent(hu);document.dispatchEvent(e)}function Ky(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?KC(a,i):a.dispatchEvent(i)}var Hc="focusScope.autoFocusOnMount",Wc="focusScope.autoFocusOnUnmount",ip={bubbles:!1,cancelable:!0},a2="FocusScope",Dh=m.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=m.useState(null),d=Ar(a),u=Ar(i),p=m.useRef(null),y=ze(t,f=>c(f)),x=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(n){let f=function(w){if(x.paused||!l)return;const j=w.target;l.contains(j)?p.current=j:Qr(p.current,{select:!0})},g=function(w){if(x.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||Qr(p.current,{select:!0}))},h=function(w){if(document.activeElement===document.body)for(const N of w)N.removedNodes.length>0&&Qr(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",g);const v=new MutationObserver(h);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",g),v.disconnect()}}},[n,l,x.paused]),m.useEffect(()=>{if(l){lp.add(x);const f=document.activeElement;if(!l.contains(f)){const h=new CustomEvent(Hc,ip);l.addEventListener(Hc,d),l.dispatchEvent(h),h.defaultPrevented||(i2(u2(Jy(l)),{select:!0}),document.activeElement===f&&Qr(l))}return()=>{l.removeEventListener(Hc,d),setTimeout(()=>{const h=new CustomEvent(Wc,ip);l.addEventListener(Wc,u),l.dispatchEvent(h),h.defaultPrevented||Qr(f??document.body,{select:!0}),l.removeEventListener(Wc,u),lp.remove(x)},0)}}},[l,d,u,x]);const b=m.useCallback(f=>{if(!r&&!n||x.paused)return;const g=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,h=document.activeElement;if(g&&h){const v=f.currentTarget,[w,j]=o2(v);w&&j?!f.shiftKey&&h===j?(f.preventDefault(),r&&Qr(w,{select:!0})):f.shiftKey&&h===w&&(f.preventDefault(),r&&Qr(j,{select:!0})):h===v&&f.preventDefault()}},[r,n,x.paused]);return s.jsx(Me.div,{tabIndex:-1,...o,ref:y,onKeyDown:b})});Dh.displayName=a2;function i2(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Qr(n,{select:t}),document.activeElement!==r)return}function o2(e){const t=Jy(e),r=op(t,e),n=op(t.reverse(),e);return[r,n]}function Jy(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function op(e,t){for(const r of e)if(!l2(r,{upTo:t}))return r}function l2(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function c2(e){return e instanceof HTMLInputElement&&"select"in e}function Qr(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&c2(e)&&t&&e.select()}}var lp=d2();function d2(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=cp(e,t),e.unshift(t)},remove(t){var r;e=cp(e,t),(r=e[0])==null||r.resume()}}}function cp(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function u2(e){return e.filter(t=>t.tagName!=="A")}var h2="Portal",Th=m.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=m.useState(!1);pt(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?rj.createPortal(s.jsx(Me.div,{...n,ref:t}),o):null});Th.displayName=h2;function m2(e,t){return m.useReducer((r,n)=>t[r][n]??r,e)}var Jl=e=>{const{present:t,children:r}=e,n=f2(t),a=typeof r=="function"?r({present:n.isPresent}):m.Children.only(r),i=ze(n.ref,p2(a));return typeof r=="function"||n.isPresent?m.cloneElement(a,{ref:i}):null};Jl.displayName="Presence";function f2(e){const[t,r]=m.useState(),n=m.useRef({}),a=m.useRef(e),i=m.useRef("none"),o=e?"mounted":"unmounted",[l,c]=m2(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const d=ro(n.current);i.current=l==="mounted"?d:"none"},[l]),pt(()=>{const d=n.current,u=a.current;if(u!==e){const y=i.current,x=ro(d);e?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&y!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),pt(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,p=x=>{const f=ro(n.current).includes(x.animationName);if(x.target===t&&f&&(c("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},y=x=>{x.target===t&&(i.current=ro(n.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function ro(e){return(e==null?void 0:e.animationName)||"none"}function p2(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Vc=0;function Xy(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dp()),document.body.insertAdjacentElement("beforeend",e[1]??dp()),Vc++,()=>{Vc===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Vc--}},[])}function dp(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var lr=function(){return lr=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},lr.apply(this,arguments)};function Zy(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function x2(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var So="right-scroll-bar-position",Co="width-before-scroll-bar",g2="with-scroll-bars-hidden",y2="--removed-body-scroll-bar-size";function qc(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function v2(e,t){var r=m.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var w2=typeof window<"u"?m.useLayoutEffect:m.useEffect,up=new WeakMap;function b2(e,t){var r=v2(null,function(n){return e.forEach(function(a){return qc(a,n)})});return w2(function(){var n=up.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||qc(l,null)}),i.forEach(function(l){a.has(l)||qc(l,o)})}up.set(r,e)},[e]),r}function j2(e){return e}function N2(e,t){t===void 0&&(t=j2);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function _2(e){e===void 0&&(e={});var t=N2(null);return t.options=lr({async:!0,ssr:!1},e),t}var e0=function(e){var t=e.sideCar,r=Zy(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return m.createElement(n,lr({},r))};e0.isSideCarExport=!0;function k2(e,t){return e.useMedium(t),e0}var t0=_2(),Gc=function(){},Xl=m.forwardRef(function(e,t){var r=m.useRef(null),n=m.useState({onScrollCapture:Gc,onWheelCapture:Gc,onTouchMoveCapture:Gc}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,p=e.shards,y=e.sideCar,x=e.noIsolation,b=e.inert,f=e.allowPinchZoom,g=e.as,h=g===void 0?"div":g,v=e.gapMode,w=Zy(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=y,N=b2([r,t]),_=lr(lr({},w),a);return m.createElement(m.Fragment,null,u&&m.createElement(j,{sideCar:t0,removeScrollBar:d,shards:p,noIsolation:x,inert:b,setCallbacks:i,allowPinchZoom:!!f,lockRef:r,gapMode:v}),o?m.cloneElement(m.Children.only(l),lr(lr({},_),{ref:N})):m.createElement(h,lr({},_,{className:c,ref:N}),l))});Xl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xl.classNames={fullWidth:Co,zeroRight:So};var S2=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function C2(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=S2();return t&&e.setAttribute("nonce",t),e}function E2(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function M2(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var P2=function(){var e=0,t=null;return{add:function(r){e==0&&(t=C2())&&(E2(t,r),M2(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},D2=function(){var e=P2();return function(t,r){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},r0=function(){var e=D2(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},T2={left:0,top:0,right:0,gap:0},Yc=function(e){return parseInt(e||"",10)||0},R2=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Yc(r),Yc(n),Yc(a)]},O2=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return T2;var t=R2(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},I2=r0(),Us="data-scroll-locked",A2=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(g2,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Us,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(So,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Co,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(So," .").concat(So,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Co," .").concat(Co,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Us,`] {
    `).concat(y2,": ").concat(l,`px;
  }
`)},hp=function(){var e=parseInt(document.body.getAttribute(Us)||"0",10);return isFinite(e)?e:0},$2=function(){m.useEffect(function(){return document.body.setAttribute(Us,(hp()+1).toString()),function(){var e=hp()-1;e<=0?document.body.removeAttribute(Us):document.body.setAttribute(Us,e.toString())}},[])},L2=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;$2();var i=m.useMemo(function(){return O2(a)},[a]);return m.createElement(I2,{styles:A2(i,!t,a,r?"":"!important")})},mu=!1;if(typeof window<"u")try{var no=Object.defineProperty({},"passive",{get:function(){return mu=!0,!0}});window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{mu=!1}var ps=mu?{passive:!1}:!1,F2=function(e){return e.tagName==="TEXTAREA"},n0=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!F2(e)&&r[t]==="visible")},U2=function(e){return n0(e,"overflowY")},z2=function(e){return n0(e,"overflowX")},mp=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=s0(e,n);if(a){var i=a0(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},B2=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},H2=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},s0=function(e,t){return e==="v"?U2(t):z2(t)},a0=function(e,t){return e==="v"?B2(t):H2(t)},W2=function(e,t){return e==="h"&&t==="rtl"?-1:1},V2=function(e,t,r,n,a){var i=W2(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),d=!1,u=o>0,p=0,y=0;do{var x=a0(e,l),b=x[0],f=x[1],g=x[2],h=f-g-i*b;(b||h)&&s0(e,l)&&(p+=h,y+=b),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(p)<1||!a)||!u&&(Math.abs(y)<1||!a))&&(d=!0),d},so=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fp=function(e){return[e.deltaX,e.deltaY]},pp=function(e){return e&&"current"in e?e.current:e},q2=function(e,t){return e[0]===t[0]&&e[1]===t[1]},G2=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Y2=0,xs=[];function Q2(e){var t=m.useRef([]),r=m.useRef([0,0]),n=m.useRef(),a=m.useState(Y2++)[0],i=m.useState(r0)[0],o=m.useRef(e);m.useEffect(function(){o.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var f=x2([e.lockRef.current],(e.shards||[]).map(pp),!0).filter(Boolean);return f.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),f.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=m.useCallback(function(f,g){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!o.current.allowPinchZoom;var h=so(f),v=r.current,w="deltaX"in f?f.deltaX:v[0]-h[0],j="deltaY"in f?f.deltaY:v[1]-h[1],N,_=f.target,k=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in f&&k==="h"&&_.type==="range")return!1;var C=mp(k,_);if(!C)return!0;if(C?N=k:(N=k==="v"?"h":"v",C=mp(k,_)),!C)return!1;if(!n.current&&"changedTouches"in f&&(w||j)&&(n.current=N),!N)return!0;var R=n.current||N;return V2(R,g,f,R==="h"?w:j,!0)},[]),c=m.useCallback(function(f){var g=f;if(!(!xs.length||xs[xs.length-1]!==i)){var h="deltaY"in g?fp(g):so(g),v=t.current.filter(function(N){return N.name===g.type&&(N.target===g.target||g.target===N.shadowParent)&&q2(N.delta,h)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var w=(o.current.shards||[]).map(pp).filter(Boolean).filter(function(N){return N.contains(g.target)}),j=w.length>0?l(g,w[0]):!o.current.noIsolation;j&&g.cancelable&&g.preventDefault()}}},[]),d=m.useCallback(function(f,g,h,v){var w={name:f,delta:g,target:h,should:v,shadowParent:K2(h)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),u=m.useCallback(function(f){r.current=so(f),n.current=void 0},[]),p=m.useCallback(function(f){d(f.type,fp(f),f.target,l(f,e.lockRef.current))},[]),y=m.useCallback(function(f){d(f.type,so(f),f.target,l(f,e.lockRef.current))},[]);m.useEffect(function(){return xs.push(i),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",c,ps),document.addEventListener("touchmove",c,ps),document.addEventListener("touchstart",u,ps),function(){xs=xs.filter(function(f){return f!==i}),document.removeEventListener("wheel",c,ps),document.removeEventListener("touchmove",c,ps),document.removeEventListener("touchstart",u,ps)}},[]);var x=e.removeScrollBar,b=e.inert;return m.createElement(m.Fragment,null,b?m.createElement(i,{styles:G2(a)}):null,x?m.createElement(L2,{gapMode:e.gapMode}):null)}function K2(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const J2=k2(t0,Q2);var Rh=m.forwardRef(function(e,t){return m.createElement(Xl,lr({},e,{ref:t,sideCar:J2}))});Rh.classNames=Xl.classNames;var X2=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},gs=new WeakMap,ao=new WeakMap,io={},Qc=0,i0=function(e){return e&&(e.host||i0(e.parentNode))},Z2=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=i0(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},eE=function(e,t,r,n){var a=Z2(t,Array.isArray(e)?e:[e]);io[r]||(io[r]=new WeakMap);var i=io[r],o=[],l=new Set,c=new Set(a),d=function(p){!p||l.has(p)||(l.add(p),d(p.parentNode))};a.forEach(d);var u=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(y){if(l.has(y))u(y);else try{var x=y.getAttribute(n),b=x!==null&&x!=="false",f=(gs.get(y)||0)+1,g=(i.get(y)||0)+1;gs.set(y,f),i.set(y,g),o.push(y),f===1&&b&&ao.set(y,!0),g===1&&y.setAttribute(r,"true"),b||y.setAttribute(n,"true")}catch(h){console.error("aria-hidden: cannot operate on ",y,h)}})};return u(t),l.clear(),Qc++,function(){o.forEach(function(p){var y=gs.get(p)-1,x=i.get(p)-1;gs.set(p,y),i.set(p,x),y||(ao.has(p)||p.removeAttribute(n),ao.delete(p)),x||p.removeAttribute(r)}),Qc--,Qc||(gs=new WeakMap,gs=new WeakMap,ao=new WeakMap,io={})}},o0=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=X2(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),eE(n,a,r,"aria-hidden")):function(){return null}},Oh="Dialog",[l0,dP]=Kl(Oh),[tE,rr]=l0(Oh),c0=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=m.useRef(null),c=m.useRef(null),[d=!1,u]=du({prop:n,defaultProp:a,onChange:i});return s.jsx(tE,{scope:t,triggerRef:l,contentRef:c,contentId:Fs(),titleId:Fs(),descriptionId:Fs(),open:d,onOpenChange:u,onOpenToggle:m.useCallback(()=>u(p=>!p),[u]),modal:o,children:r})};c0.displayName=Oh;var d0="DialogTrigger",rE=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rr(d0,r),i=ze(t,a.triggerRef);return s.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":$h(a.open),...n,ref:i,onClick:Se(e.onClick,a.onOpenToggle)})});rE.displayName=d0;var Ih="DialogPortal",[nE,u0]=l0(Ih,{forceMount:void 0}),h0=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=rr(Ih,t);return s.jsx(nE,{scope:t,forceMount:r,children:m.Children.map(n,o=>s.jsx(Jl,{present:r||i.open,children:s.jsx(Th,{asChild:!0,container:a,children:o})}))})};h0.displayName=Ih;var cl="DialogOverlay",m0=m.forwardRef((e,t)=>{const r=u0(cl,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=rr(cl,e.__scopeDialog);return i.modal?s.jsx(Jl,{present:n||i.open,children:s.jsx(sE,{...a,ref:t})}):null});m0.displayName=cl;var sE=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rr(cl,r);return s.jsx(Rh,{as:ea,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Me.div,{"data-state":$h(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Kn="DialogContent",f0=m.forwardRef((e,t)=>{const r=u0(Kn,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=rr(Kn,e.__scopeDialog);return s.jsx(Jl,{present:n||i.open,children:i.modal?s.jsx(aE,{...a,ref:t}):s.jsx(iE,{...a,ref:t})})});f0.displayName=Kn;var aE=m.forwardRef((e,t)=>{const r=rr(Kn,e.__scopeDialog),n=m.useRef(null),a=ze(t,r.contentRef,n);return m.useEffect(()=>{const i=n.current;if(i)return o0(i)},[]),s.jsx(p0,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Se(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Se(e.onFocusOutside,i=>i.preventDefault())})}),iE=m.forwardRef((e,t)=>{const r=rr(Kn,e.__scopeDialog),n=m.useRef(!1),a=m.useRef(!1);return s.jsx(p0,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),p0=m.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=rr(Kn,r),c=m.useRef(null),d=ze(t,c);return Xy(),s.jsxs(s.Fragment,{children:[s.jsx(Dh,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Ph,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":$h(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(oE,{titleId:l.titleId}),s.jsx(cE,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Ah="DialogTitle",x0=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rr(Ah,r);return s.jsx(Me.h2,{id:a.titleId,...n,ref:t})});x0.displayName=Ah;var g0="DialogDescription",y0=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rr(g0,r);return s.jsx(Me.p,{id:a.descriptionId,...n,ref:t})});y0.displayName=g0;var v0="DialogClose",w0=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rr(v0,r);return s.jsx(Me.button,{type:"button",...n,ref:t,onClick:Se(e.onClick,()=>a.onOpenChange(!1))})});w0.displayName=v0;function $h(e){return e?"open":"closed"}var b0="DialogTitleWarning",[uP,j0]=UC(b0,{contentName:Kn,titleName:Ah,docsSlug:"dialog"}),oE=({titleId:e})=>{const t=j0(b0),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},lE="DialogDescriptionWarning",cE=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${j0(lE).contentName}}.`;return m.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},dE=c0,uE=h0,N0=m0,_0=f0,k0=x0,S0=y0,C0=w0;const Lh=dE,hE=uE,mE=C0,E0=m.forwardRef(({className:e,...t},r)=>s.jsx(N0,{ref:r,className:Tt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));E0.displayName=N0.displayName;const Zl=m.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(hE,{children:[s.jsx(E0,{}),s.jsxs(_0,{ref:n,className:Tt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(C0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(at,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zl.displayName=_0.displayName;const Fh=({className:e,...t})=>s.jsx("div",{className:Tt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Fh.displayName="DialogHeader";const ec=({className:e,...t})=>s.jsx("div",{className:Tt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ec.displayName="DialogFooter";const tc=m.forwardRef(({className:e,...t},r)=>s.jsx(k0,{ref:r,className:Tt("text-lg font-semibold leading-none tracking-tight",e),...t}));tc.displayName=k0.displayName;const rc=m.forwardRef(({className:e,...t},r)=>s.jsx(S0,{ref:r,className:Tt("text-sm text-muted-foreground",e),...t}));rc.displayName=S0.displayName;function fE(){const e=Be(),t=pr(),{user:r,signOut:n}=Fe(),[a,i]=We.useState(!1),[o,l]=We.useState(!1),[c,d]=We.useState(!1),u=()=>{d(!0)},p=async()=>{try{await n(),d(!1),e("/login")}catch(f){console.error("Error signing out:",f),d(!1)}},y=f=>f==="/"?t.pathname===f:t.pathname.startsWith(f),x=({to:f,icon:g,children:h})=>s.jsxs(Ft,{to:f,onClick:()=>i(!1),className:`
        inline-flex items-center px-3 py-2 text-sm font-medium w-full sm:w-auto rounded-md
        transition-colors duration-200 ease-in-out
        ${y(f)?"text-orange-600 bg-orange-50 sm:bg-transparent sm:border-b-2 sm:border-orange-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50 sm:hover:bg-transparent sm:hover:border-b-2 sm:hover:border-gray-300"}
      `,children:[s.jsx(g,{className:"mr-2 h-4 w-4 flex-shrink-0"}),h]}),b=()=>s.jsxs("div",{className:"mt-1 space-y-1 pl-8 sm:pl-0 sm:mt-0 sm:space-y-0",children:[s.jsx(x,{to:"/admin/users",icon:xn,children:"Users"}),s.jsx(x,{to:"/admin/products",icon:Ol,children:"Products"}),s.jsx(x,{to:"/admin/coupons",icon:bh,children:"Coupons"}),s.jsx(x,{to:"/admin/plans",icon:sN,children:"Plans"}),s.jsx(x,{to:"/admin/settings",icon:ko,children:"Settings"})]});return s.jsxs("div",{className:"min-h-screen bg-gray-100",children:[s.jsx("nav",{className:"bg-white shadow-sm sticky top-0 z-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[s.jsxs("div",{className:"relative flex justify-between h-16",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Mh,{showText:!0}),s.jsx("div",{className:"sm:hidden ml-4",children:s.jsx(M,{variant:"ghost",onClick:()=>i(!a),className:"p-2",children:a?s.jsx(at,{className:"h-6 w-6"}):s.jsx(iN,{className:"h-6 w-6"})})}),s.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-2",children:[((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="superadmin")&&s.jsx(x,{to:"/admin/daily-summary",icon:Mf,children:"Dashboard"}),s.jsx(x,{to:"/",icon:Qs,children:"Validation"}),s.jsx(x,{to:"/walk-ins",icon:il,children:"Walk-In"}),s.jsx(x,{to:"/coupons",icon:Zd,children:"Coupons"}),s.jsx(x,{to:"/pos",icon:xi,children:"POS"}),s.jsx(x,{to:"/members",icon:xn,children:"Members"}),s.jsx(x,{to:"/reports",icon:Xd,children:"Reports"}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="superadmin")&&s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>l(!o),onBlur:()=>setTimeout(()=>l(!1),150),className:`
                        inline-flex items-center px-3 py-2 text-sm font-medium w-full sm:w-auto rounded-md
                        transition-colors duration-200 ease-in-out
                        ${t.pathname.startsWith("/admin")&&!t.pathname.startsWith("/admin/daily-summary")?"text-orange-600 bg-orange-50 sm:bg-transparent sm:border-b-2 sm:border-orange-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50 sm:hover:bg-transparent sm:hover:border-b-2 sm:hover:border-gray-300"}
                      `,children:[s.jsx(ko,{className:"mr-2 h-4 w-4 flex-shrink-0"}),"Admin",s.jsx(nl,{className:`ml-1 h-4 w-4 transition-transform ${o?"rotate-180":""}`})]}),o&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:s.jsx("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:b()})})]})]})]}),s.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[s.jsxs(Ft,{to:"/end-shift",className:`inline-flex items-center text-sm font-medium ${y("/end-shift")?"text-orange-600":"text-gray-500 hover:text-gray-700"}`,children:[s.jsx(Yn,{className:"mr-2 h-4 w-4"}),"End Shift"]}),s.jsx("span",{className:"text-sm text-gray-500 hidden lg:inline",children:(r==null?void 0:r.name)||(r==null?void 0:r.email)}),s.jsx(M,{variant:"ghost",size:"sm",onClick:u,className:"text-gray-500",children:s.jsx(Ef,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:`
              fixed inset-0 top-16 bg-white z-40 transition-transform duration-300 ease-in-out transform
              ${a?"translate-x-0":"-translate-x-full"}
              sm:hidden
            `,children:s.jsxs("div",{className:"p-4 space-y-2 overflow-y-auto max-h-[calc(100vh-4rem)]",children:[((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="superadmin")&&s.jsx(x,{to:"/admin/daily-summary",icon:Mf,children:"Dashboard"}),s.jsx(x,{to:"/",icon:Qs,children:"Validation"}),s.jsx(x,{to:"/walk-ins",icon:il,children:"Walk-In"}),s.jsx(x,{to:"/coupons",icon:Zd,children:"Coupons"}),s.jsx(x,{to:"/pos",icon:xi,children:"POS"}),s.jsx(x,{to:"/members",icon:xn,children:"Members"}),s.jsx(x,{to:"/reports",icon:Xd,children:"Reports"}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="superadmin")&&s.jsxs("details",{className:"group",children:[s.jsxs("summary",{className:`
                    flex items-center px-3 py-2 text-sm font-medium w-full rounded-md cursor-pointer
                    ${t.pathname.startsWith("/admin")&&!t.pathname.startsWith("/admin/daily-summary")?"text-orange-600 bg-orange-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}
                  `,children:[s.jsx(ko,{className:"mr-2 h-4 w-4 flex-shrink-0"}),"Admin",s.jsx(nl,{className:"ml-auto h-4 w-4 transition-transform group-open:rotate-180"})]}),b()]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[s.jsx(x,{to:"/end-shift",icon:Yn,children:"End Shift"}),s.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:(r==null?void 0:r.name)||(r==null?void 0:r.email)}),s.jsxs(M,{variant:"ghost",size:"sm",onClick:u,className:"w-full justify-start text-gray-500",children:[s.jsx(Ef,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})})]})}),s.jsx("main",{className:"py-6 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx(qj,{})})}),s.jsx(Lh,{open:c,onOpenChange:d,children:s.jsxs(Zl,{className:"sm:max-w-[425px]",children:[s.jsxs(Fh,{children:[s.jsx(tc,{children:"Confirm Logout"}),s.jsx(rc,{children:"Are you sure you want to log out?"})]}),s.jsxs(ec,{children:[s.jsx(mE,{asChild:!0,children:s.jsx(M,{type:"button",variant:"outline",children:"Cancel"})}),s.jsx(M,{type:"button",onClick:p,children:"Log Out"})]})]})})]})}function pE({isOpen:e,onClose:t,checkIns:r,loading:n,currentPage:a,totalPages:i,totalCount:o,onPageChange:l,onDateChange:c,selectedDate:d,sortField:u,sortOrder:p,onSort:y,type:x,onSearch:b}){if(m.useEffect(()=>{e||b("")},[e,b]),!e)return null;const f=g=>{const h=g.target.value;l(1),b(h)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:x==="member"?"Member Check-in History":"Walk-in History"}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(xr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{type:"text",placeholder:x==="member"?"Search by member ID or name...":"Search by name...",onChange:f,className:"pl-10"})]}),o===r.length&&!n&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(M,{variant:"outline",size:"sm",onClick:()=>{const g=new Date(d);g.setDate(g.getDate()-1),c(H(g,"yyyy-MM-dd"))},children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsxs("div",{className:"relative",children:[s.jsx(Ur,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{type:"date",value:d,onChange:g=>c(g.target.value),className:"pl-10"})]}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>{const g=new Date(d);g.setDate(g.getDate()+1),c(H(g,"yyyy-MM-dd"))},children:s.jsx(Ge,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>y("check_in_time"),children:["Date & Time ",u==="check_in_time"?p==="asc"?"":"":""]}),x==="member"?s.jsxs(s.Fragment,{children:[s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>y("member_id"),children:["Member ID ",u==="member_id"?p==="asc"?"":"":""]}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>y("name"),children:["Name ",u==="name"?p==="asc"?"":"":""]})]}):s.jsx(s.Fragment,{children:s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Checked in by"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})})}):r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:o>0?"No results match current filters":"No check-ins found"})}):r.map((g,h)=>{var v,w,j,N;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(a-1)*10+h+1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(g.check_in_time),"dd MMM yyyy HH:mm")}),x==="member"?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:((v=g.member)==null?void 0:v.member_id)||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((w=g.member)==null?void 0:w.name)||"-"})]}):s.jsx(s.Fragment,{children:s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.name})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((j=g.user)==null?void 0:j.name)||((N=g.user)==null?void 0:N.email)||"System"})]},g.id)})})]})}),!n&&o>0&&s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(a-1)*10+1," to ",Math.min(a*10,o)," of ",o," results"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(a-1),disabled:a<=1,children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsx("select",{value:a,onChange:g=>l(Number(g.target.value)),className:"block w-full rounded-md border-gray-300 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6","aria-label":"Select page",children:Array.from({length:i},(g,h)=>h+1).map(g=>s.jsxs("option",{value:g,children:["Page ",g," of ",i]},g))}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(a+1),disabled:a>=i,children:s.jsx(Ge,{className:"h-4 w-4"})})]})]})]})]})})}function xE({isOpen:e,onClose:t,onConfirm:r,lastCheckIn:n}){return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Multiple Check-ins"}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center text-yellow-600 mb-4",children:[s.jsx(hr,{className:"h-5 w-5 mr-2"}),s.jsx("p",{className:"text-sm",children:"This member has already checked in today."})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Last check-in: ",s.jsx("span",{className:"font-medium",children:H(new Date(n),"dd MMM yyyy HH:mm")})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(M,{variant:"outline",onClick:t,children:"Cancel"}),s.jsxs(M,{onClick:r,children:[s.jsx(Qs,{className:"mr-2 h-4 w-4"}),"Check In Again"]})]})]})})}):null}function gE(){const e=Be(),t=Fe(Y=>Y.user),[r,n]=m.useState(""),[a,i]=m.useState([]),[o,l]=m.useState(null),[c,d]=m.useState(!1),[u,p]=m.useState(!1),y=m.useRef(null),[x,b]=m.useState(!1),[f,g]=m.useState([]),[h,v]=m.useState(!1),[w,j]=m.useState(1),[N,_]=m.useState(1),[k,C]=m.useState(H(new Date,"yyyy-MM-dd")),[R,P]=m.useState("check_in_time"),[O,A]=m.useState("desc"),[V,Q]=m.useState(""),[W,S]=m.useState(0),[z,D]=m.useState(!1),[T,$]=m.useState(""),[U,E]=m.useState("default"),q=10,X=m.useCallback(async(Y,ie,le,he,fe)=>{v(!0),g([]);try{const ce=new Date(ie+"T00:00:00Z");if(isNaN(ce.getTime()))throw console.error("Invalid selectedDate format",ie),new Error("Invalid date format");const De=new Date(Date.UTC(ce.getUTCFullYear(),ce.getUTCMonth(),ce.getUTCDate(),0,0,0,0)),Ie=new Date(Date.UTC(ce.getUTCFullYear(),ce.getUTCMonth(),ce.getUTCDate(),23,59,59,999)),ae=De.toISOString(),Qe=Ie.toISOString(),It=(le-1)*q,He=(Y==null?void 0:Y.trim())||null,Pn={search_term:He,start_date:He?null:ae,end_date:He?null:Qe,filter_type:"member"},{data:we,error:Ke}=await I.rpc("count_check_ins",Pn);if(Ke)throw Ke;const be=we||0;if(S(be),_(Math.ceil(be/q)),be===0){g([]),v(!1);return}const Ti={search_term:He,start_date:He?null:ae,end_date:He?null:Qe,page_limit:q,page_offset:It,filter_type:"member"},{data:Cv,error:Zh}=await I.rpc("search_check_ins",Ti);if(Zh)throw Zh;const em=Cv||[],Ev=em.map(Ae=>Ae.user_id).filter(Ae=>Ae!==null),tm=[...new Set(Ev)],rm=new Map;if(tm.length>0){const{data:Ae,error:nr}=await I.from("users").select("id, email, name").in("id",tm);if(nr)throw console.error("Error fetching user details:",nr),nr;Ae&&Ae.forEach(is=>rm.set(is.id,{email:is.email,name:is.name}))}const nm=em.map(Ae=>{const nr=Ae.user_id?rm.get(Ae.user_id):void 0;return{id:Ae.id,type:Ae.type,check_in_time:Ae.check_in_time,...Ae.type==="member"&&{member:{member_id:Ae.member_id_col,name:Ae.member_name_col},name:null},...Ae.type==="walk-in"&&{member:null,name:Ae.name},user:nr}});nm.sort((Ae,nr)=>{var is,sm,am,im;if(he==="check_in_time"){const os=new Date(Ae.check_in_time).getTime(),ls=new Date(nr.check_in_time).getTime();return fe==="asc"?os-ls:ls-os}if(he==="member_id"){const os=((is=Ae.member)==null?void 0:is.member_id)||"",ls=((sm=nr.member)==null?void 0:sm.member_id)||"",xa=os.localeCompare(ls);return fe==="asc"?xa:-xa}if(he==="name"){const os=((am=Ae.member)==null?void 0:am.name)||Ae.name||"",ls=((im=nr.member)==null?void 0:im.name)||nr.name||"",xa=os.localeCompare(ls);return fe==="asc"?xa:-xa}return 0}),g(nm)}catch(ce){console.error("Error during fetchCheckInHistory process:",ce),B.error("Error loading check-in history"),g([]),_(1)}finally{v(!1)}},[v,g,_,I]),J=m.useCallback(Y=>{Q(Y),j(1),X(Y,k,1,R,O)},[Q,j,X]),L=m.useCallback(Y=>{const ie=R===Y&&O==="asc"?"desc":"asc";P(Y),A(ie),j(1)},[R,O]);m.useEffect(()=>{x&&X(V,k,w,R,O)},[x,w,k,R,O,V,X]),m.useEffect(()=>{var ie;(ie=y.current)==null||ie.focus();const Y=le=>{var he;le.key==="Escape"?(n(""),i([]),l(null),(he=y.current)==null||he.focus()):le.ctrlKey&&le.key==="Enter"&&o&&Z()};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[o]),m.useEffect(()=>{if(U!=="default"){document.body.classList.add(`bg-validation-${U}`);const Y=setTimeout(()=>{document.body.classList.remove(`bg-validation-${U}`),E("default")},2e3);return()=>{clearTimeout(Y),document.body.classList.remove(`bg-validation-${U}`)}}},[U]);const F=async()=>{if(r.trim()){d(!0);try{const{data:Y,error:ie}=await I.from("members").select("*").or(`member_id.ilike.%${r}%,name.ilike.%${r}%,nric.ilike.%${r}%,phone.ilike.%${r}%`).limit(5);if(ie)throw ie;if(Y&&Y.length>0){const le=await Promise.all(Y.map(async he=>{try{await By(he);const{data:fe}=await I.from("members").select("*").eq("id",he.id).single();return fe||he}catch(fe){return console.error("Error updating member status:",fe),he}}));i(le),le.length===1?(l(le[0]),E(le[0].status),to(le[0].status)):(l(null),E("default"))}else i([]),l(null),E("not-found"),B.error("No members found"),to("expired")}catch(Y){console.error("Error searching for members:",Y),B.error("Error searching for members"),E("not-found"),to("expired")}finally{d(!1)}}},G=async Y=>{try{const ie=new Date,le=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()).toISOString(),he=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate(),23,59,59).toISOString(),{data:fe,error:ce}=await I.from("check_ins").select("check_in_time").eq("member_id",Y).eq("type","member").gte("check_in_time",le).lte("check_in_time",he).order("check_in_time",{ascending:!1}).limit(1);if(ce)throw ce;return fe&&fe.length>0?($(fe[0].check_in_time),!0):!1}catch(ie){return console.error("Error checking previous check-in:",ie),!1}},Z=async()=>{if(!o||u)return;if(o.status==="suspended"){B.error("Cannot check in suspended member");return}if(o.status==="expired"){e("/walk-ins",{state:{name:o.name}});return}if(await G(o.id)){D(!0);return}await ee()},ee=async()=>{var Y,ie;if(o){p(!0);try{const{data:le,error:he}=await I.from("check_ins").insert({member_id:o.id,type:"member",name:o.name,phone:"",user_id:t==null?void 0:t.id}).select().single();if(he)throw he;if(o.status==="grace"){const{data:fe}=await I.from("settings").select("value").eq("key","membership").single(),ce=((Y=fe==null?void 0:fe.value)==null?void 0:Y.grace_period_days)||7,{error:De}=await I.from("grace_period_access").insert({member_id:o.id,check_in_time:le.check_in_time,expiry_date:o.expiry_date,grace_period_days:ce,user_id:t==null?void 0:t.id});De&&console.error("Error recording grace period access:",De)}await to(o.status),B.success("Check-in successful"),n(""),i([]),l(null),(ie=y.current)==null||ie.focus(),x&&X(V,k,w,R,O),E(o.status)}catch(le){console.error("Check-in error:",le),B.error("Error checking in member"),E("default")}finally{p(!1),D(!1)}}},ne=()=>{o&&e(`/members/${o.id}/renew`)},te=Y=>{switch(Y){case"active":return"bg-green-100 text-green-800 transition-colors duration-500";case"grace":return"bg-yellow-100 text-yellow-800 transition-colors duration-500";case"expired":return"bg-red-100 text-red-800 transition-colors duration-500";case"suspended":return"bg-gray-100 text-gray-800 transition-colors duration-500";case"not-found":return"bg-red-200 text-red-900 transition-colors duration-500";default:return"bg-gray-50 text-gray-800 transition-colors duration-500"}};return s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Member Validation"}),s.jsxs(M,{variant:"outline",onClick:()=>b(!0),children:[s.jsx(Qn,{className:"mr-2 h-4 w-4"}),"View History"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(xr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{ref:y,type:"text",placeholder:"Search by ID, name, NRIC, or phone number...",value:r,onChange:Y=>n(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&F(),className:"pl-10"})]})}),c&&s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}),a.length>0&&!o&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Search Results"}),s.jsx("div",{className:"grid gap-4",children:a.map(Y=>s.jsxs("button",{onClick:()=>l(Y),className:"flex items-center space-x-4 p-4 rounded-lg border hover:bg-gray-50 transition-colors text-left w-full",children:[s.jsx("img",{src:Y.photo_url||"https://via.placeholder.com/100",alt:Y.name,className:"h-16 w-16 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:Y.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",Y.member_id]}),s.jsx("p",{className:"text-sm text-gray-500",children:Y.nric})]})]},Y.id))})]}),o&&s.jsx("div",{className:`rounded-lg p-6 ${te(U)}`,children:s.jsxs("div",{className:"flex items-start space-x-6",children:[s.jsx("div",{className:"relative group",children:s.jsxs("div",{className:"relative w-32 h-32",children:[s.jsx("img",{src:o.photo_url||"https://via.placeholder.com/200",alt:o.name,className:"absolute top-0 left-0 w-full h-full rounded-lg object-cover transition-transform duration-300 ease-out transform-gpu group-hover:scale-[2] group-hover:z-50"}),s.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-25 transition-opacity duration-300 rounded-lg"})]})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-bold mb-1",children:o.name}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["ID: ",o.member_id]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Membership Type"}),s.jsx("p",{className:"font-medium capitalize",children:o.type})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),s.jsx("p",{className:"font-medium capitalize",children:o.status})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Expiry Date"}),s.jsx("p",{className:"font-medium",children:H(new Date(o.expiry_date),"dd MMM yyyy")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"NRIC"}),s.jsx("p",{className:"font-medium",children:o.nric})]})]}),o.status==="expired"&&s.jsx("div",{className:"mb-4 bg-red-50 border-l-4 border-red-400 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(hr,{className:"h-5 w-5 text-red-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:"This membership has expired. Member needs to renew to continue accessing the gym."})})]})}),o.status==="grace"&&s.jsx("div",{className:"mb-4 bg-orange-50 border-l-4 border-orange-400 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(hr,{className:"h-5 w-5 text-orange-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-orange-700",children:"This member is in their grace period. They should renew their membership soon."})})]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(M,{onClick:Z,disabled:u||o.status==="suspended",className:"flex-1",children:u?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[o.status==="active"?s.jsx(Qs,{className:"mr-2 h-4 w-4"}):o.status==="grace"?s.jsx(Yn,{className:"mr-2 h-4 w-4"}):s.jsx(dN,{className:"mr-2 h-4 w-4"}),o.status==="expired"?"Register as Walk-in":"Check In"]})}),(o.status==="active"||o.status==="grace"||o.status==="expired")&&s.jsxs(M,{variant:"outline",onClick:ne,className:"flex-1",children:[s.jsx(al,{className:"mr-2 h-4 w-4"}),"Renew Membership"]}),s.jsx(M,{variant:"outline",onClick:()=>{var Y;l(null),n(""),(Y=y.current)==null||Y.focus()},children:"Clear"})]})]})]})})]}),s.jsx(pE,{isOpen:x,onClose:()=>{b(!1),Q("")},checkIns:f,loading:h,currentPage:w,totalPages:N,totalCount:W,onPageChange:j,onDateChange:C,selectedDate:k,sortField:R,sortOrder:O,onSort:L,type:"member",onSearch:J}),s.jsx(xE,{isOpen:z,onClose:()=>D(!1),onConfirm:ee,lastCheckIn:T})]})}function yE({isOpen:e,onClose:t,history:r,loading:n,currentPage:a,totalPages:i,onPageChange:o,couponCode:l,ownerName:c}){if(!e)return null;const d=()=>{const u=[];let y=Math.max(1,a-Math.floor(2.5)),x=Math.min(i,y+5-1);x-y+1<5&&(y=Math.max(1,x-5+1));for(let b=y;b<=x;b++)u.push(b);return u};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Coupon Usage History: ",s.jsx("span",{className:"font-mono",children:l}),c&&s.jsxs("span",{className:"text-sm text-gray-500",children:[" (Owner: ",c,")"]}),"  "]}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cashier"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-4 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})})}):r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:"No usage records found"})}):r.map(u=>{var p,y;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(u.used_at),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(u.used_at),"HH:mm")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((p=u.user)==null?void 0:p.name)||((y=u.user)==null?void 0:y.email)||"System"})]},u.id)})})]})}),i>1&&s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx(M,{onClick:()=>o(a-1),disabled:a===1,variant:"outline",children:"Previous"}),s.jsx(M,{onClick:()=>o(a+1),disabled:a===i,variant:"outline",children:"Next"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",s.jsx("span",{className:"font-medium",children:a})," of"," ",s.jsx("span",{className:"font-medium",children:i})]})}),s.jsx("div",{children:s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[s.jsx(M,{onClick:()=>o(1),disabled:a===1,variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"First"}),s.jsx(M,{onClick:()=>o(a-1),disabled:a===1,variant:"outline",className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:s.jsx(qe,{className:"h-4 w-4"})}),d().map(u=>s.jsx(M,{onClick:()=>o(u),variant:a===u?"default":"outline",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${a===u?"z-10 bg-orange-600 border-orange-600 text-white":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"}`,children:u},u)),s.jsx(M,{onClick:()=>o(a+1),disabled:a===i,variant:"outline",className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:s.jsx(Ge,{className:"h-4 w-4"})}),s.jsx(M,{onClick:()=>o(i),disabled:a===i,variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Last"})]})})]})]})]})]})})}function xp(e,[t,r]){return Math.min(r,Math.max(t,e))}function vE(e){const t=e+"CollectionProvider",[r,n]=Kl(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:b,children:f}=x,g=We.useRef(null),h=We.useRef(new Map).current;return s.jsx(a,{scope:b,itemMap:h,collectionRef:g,children:f})};o.displayName=t;const l=e+"CollectionSlot",c=We.forwardRef((x,b)=>{const{scope:f,children:g}=x,h=i(l,f),v=ze(b,h.collectionRef);return s.jsx(ea,{ref:v,children:g})});c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",p=We.forwardRef((x,b)=>{const{scope:f,children:g,...h}=x,v=We.useRef(null),w=ze(b,v),j=i(d,f);return We.useEffect(()=>(j.itemMap.set(v,{ref:v,...h}),()=>void j.itemMap.delete(v))),s.jsx(ea,{[u]:"",ref:w,children:g})});p.displayName=d;function y(x){const b=i(e+"CollectionConsumer",x);return We.useCallback(()=>{const g=b.collectionRef.current;if(!g)return[];const h=Array.from(g.querySelectorAll(`[${u}]`));return Array.from(b.itemMap.values()).sort((j,N)=>h.indexOf(j.ref.current)-h.indexOf(N.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},y,n]}var wE=m.createContext(void 0);function bE(e){const t=m.useContext(wE);return e||t||"ltr"}const jE=["top","right","bottom","left"],vn=Math.min,Ct=Math.max,dl=Math.round,oo=Math.floor,ur=e=>({x:e,y:e}),NE={left:"right",right:"left",bottom:"top",top:"bottom"},_E={start:"end",end:"start"};function fu(e,t,r){return Ct(e,vn(t,r))}function $r(e,t){return typeof e=="function"?e(t):e}function Lr(e){return e.split("-")[0]}function ma(e){return e.split("-")[1]}function Uh(e){return e==="x"?"y":"x"}function zh(e){return e==="y"?"height":"width"}function wn(e){return["top","bottom"].includes(Lr(e))?"y":"x"}function Bh(e){return Uh(wn(e))}function kE(e,t,r){r===void 0&&(r=!1);const n=ma(e),a=Bh(e),i=zh(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=ul(o)),[o,ul(o)]}function SE(e){const t=ul(e);return[pu(e),t,pu(t)]}function pu(e){return e.replace(/start|end/g,t=>_E[t])}function CE(e,t,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?i:o;default:return[]}}function EE(e,t,r,n){const a=ma(e);let i=CE(Lr(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(pu)))),i}function ul(e){return e.replace(/left|right|bottom|top/g,t=>NE[t])}function ME(e){return{top:0,right:0,bottom:0,left:0,...e}}function M0(e){return typeof e!="number"?ME(e):{top:e,right:e,bottom:e,left:e}}function hl(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function gp(e,t,r){let{reference:n,floating:a}=e;const i=wn(t),o=Bh(t),l=zh(o),c=Lr(t),d=i==="y",u=n.x+n.width/2-a.width/2,p=n.y+n.height/2-a.height/2,y=n[l]/2-a[l]/2;let x;switch(c){case"top":x={x:u,y:n.y-a.height};break;case"bottom":x={x:u,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:p};break;case"left":x={x:n.x-a.width,y:p};break;default:x={x:n.x,y:n.y}}switch(ma(t)){case"start":x[o]-=y*(r&&d?-1:1);break;case"end":x[o]+=y*(r&&d?-1:1);break}return x}const PE=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:p}=gp(d,n,c),y=n,x={},b=0;for(let f=0;f<l.length;f++){const{name:g,fn:h}=l[f],{x:v,y:w,data:j,reset:N}=await h({x:u,y:p,initialPlacement:n,placement:y,strategy:a,middlewareData:x,rects:d,platform:o,elements:{reference:e,floating:t}});u=v??u,p=w??p,x={...x,[g]:{...x[g],...j}},N&&b<=50&&(b++,typeof N=="object"&&(N.placement&&(y=N.placement),N.rects&&(d=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):N.rects),{x:u,y:p}=gp(d,y,c)),f=-1)}return{x:u,y:p,placement:y,strategy:a,middlewareData:x}};async function yi(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:y=!1,padding:x=0}=$r(t,e),b=M0(x),g=l[y?p==="floating"?"reference":"floating":p],h=hl(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(g)))==null||r?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=p==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},N=hl(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:w,strategy:c}):v);return{top:(h.top-N.top+b.top)/j.y,bottom:(N.bottom-h.bottom+b.bottom)/j.y,left:(h.left-N.left+b.left)/j.x,right:(N.right-h.right+b.right)/j.x}}const DE=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=$r(e,t)||{};if(d==null)return{};const p=M0(u),y={x:r,y:n},x=Bh(a),b=zh(x),f=await o.getDimensions(d),g=x==="y",h=g?"top":"left",v=g?"bottom":"right",w=g?"clientHeight":"clientWidth",j=i.reference[b]+i.reference[x]-y[x]-i.floating[b],N=y[x]-i.reference[x],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let k=_?_[w]:0;(!k||!await(o.isElement==null?void 0:o.isElement(_)))&&(k=l.floating[w]||i.floating[b]);const C=j/2-N/2,R=k/2-f[b]/2-1,P=vn(p[h],R),O=vn(p[v],R),A=P,V=k-f[b]-O,Q=k/2-f[b]/2+C,W=fu(A,Q,V),S=!c.arrow&&ma(a)!=null&&Q!==W&&i.reference[b]/2-(Q<A?P:O)-f[b]/2<0,z=S?Q<A?Q-A:Q-V:0;return{[x]:y[x]+z,data:{[x]:W,centerOffset:Q-W-z,...S&&{alignmentOffset:z}},reset:S}}}),TE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:f=!0,...g}=$r(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const h=Lr(a),v=wn(l),w=Lr(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=y||(w||!f?[ul(l)]:SE(l)),_=b!=="none";!y&&_&&N.push(...EE(l,f,b,j));const k=[l,...N],C=await yi(t,g),R=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&R.push(C[h]),p){const Q=kE(a,o,j);R.push(C[Q[0]],C[Q[1]])}if(P=[...P,{placement:a,overflows:R}],!R.every(Q=>Q<=0)){var O,A;const Q=(((O=i.flip)==null?void 0:O.index)||0)+1,W=k[Q];if(W)return{data:{index:Q,overflows:P},reset:{placement:W}};let S=(A=P.filter(z=>z.overflows[0]<=0).sort((z,D)=>z.overflows[1]-D.overflows[1])[0])==null?void 0:A.placement;if(!S)switch(x){case"bestFit":{var V;const z=(V=P.filter(D=>{if(_){const T=wn(D.placement);return T===v||T==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(T=>T>0).reduce((T,$)=>T+$,0)]).sort((D,T)=>D[1]-T[1])[0])==null?void 0:V[0];z&&(S=z);break}case"initialPlacement":S=l;break}if(a!==S)return{reset:{placement:S}}}return{}}}};function yp(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function vp(e){return jE.some(t=>e[t]>=0)}const RE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=$r(e,t);switch(n){case"referenceHidden":{const i=await yi(t,{...a,elementContext:"reference"}),o=yp(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vp(o)}}}case"escaped":{const i=await yi(t,{...a,altBoundary:!0}),o=yp(i,r.floating);return{data:{escapedOffsets:o,escaped:vp(o)}}}default:return{}}}}};async function OE(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Lr(r),l=ma(r),c=wn(r)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,p=$r(t,e);let{mainAxis:y,crossAxis:x,alignmentAxis:b}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof b=="number"&&(x=l==="end"?b*-1:b),c?{x:x*u,y:y*d}:{x:y*d,y:x*u}}const IE=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await OE(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},AE=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:h,y:v}=g;return{x:h,y:v}}},...c}=$r(e,t),d={x:r,y:n},u=await yi(t,c),p=wn(Lr(a)),y=Uh(p);let x=d[y],b=d[p];if(i){const g=y==="y"?"top":"left",h=y==="y"?"bottom":"right",v=x+u[g],w=x-u[h];x=fu(v,x,w)}if(o){const g=p==="y"?"top":"left",h=p==="y"?"bottom":"right",v=b+u[g],w=b-u[h];b=fu(v,b,w)}const f=l.fn({...t,[y]:x,[p]:b});return{...f,data:{x:f.x-r,y:f.y-n,enabled:{[y]:i,[p]:o}}}}}},$E=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=$r(e,t),u={x:r,y:n},p=wn(a),y=Uh(p);let x=u[y],b=u[p];const f=$r(l,t),g=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(c){const w=y==="y"?"height":"width",j=i.reference[y]-i.floating[w]+g.mainAxis,N=i.reference[y]+i.reference[w]-g.mainAxis;x<j?x=j:x>N&&(x=N)}if(d){var h,v;const w=y==="y"?"width":"height",j=["top","left"].includes(Lr(a)),N=i.reference[p]-i.floating[w]+(j&&((h=o.offset)==null?void 0:h[p])||0)+(j?0:g.crossAxis),_=i.reference[p]+i.reference[w]+(j?0:((v=o.offset)==null?void 0:v[p])||0)-(j?g.crossAxis:0);b<N?b=N:b>_&&(b=_)}return{[y]:x,[p]:b}}}},LE=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=$r(e,t),u=await yi(t,d),p=Lr(a),y=ma(a),x=wn(a)==="y",{width:b,height:f}=i.floating;let g,h;p==="top"||p==="bottom"?(g=p,h=y===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(h=p,g=y==="end"?"top":"bottom");const v=f-u.top-u.bottom,w=b-u.left-u.right,j=vn(f-u[g],v),N=vn(b-u[h],w),_=!t.middlewareData.shift;let k=j,C=N;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(k=v),_&&!y){const P=Ct(u.left,0),O=Ct(u.right,0),A=Ct(u.top,0),V=Ct(u.bottom,0);x?C=b-2*(P!==0||O!==0?P+O:Ct(u.left,u.right)):k=f-2*(A!==0||V!==0?A+V:Ct(u.top,u.bottom))}await c({...t,availableWidth:C,availableHeight:k});const R=await o.getDimensions(l.floating);return b!==R.width||f!==R.height?{reset:{rects:!0}}:{}}}};function nc(){return typeof window<"u"}function fa(e){return P0(e)?(e.nodeName||"").toLowerCase():"#document"}function Pt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gr(e){var t;return(t=(P0(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function P0(e){return nc()?e instanceof Node||e instanceof Pt(e).Node:!1}function er(e){return nc()?e instanceof Element||e instanceof Pt(e).Element:!1}function mr(e){return nc()?e instanceof HTMLElement||e instanceof Pt(e).HTMLElement:!1}function wp(e){return!nc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Pt(e).ShadowRoot}function Pi(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=tr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function FE(e){return["table","td","th"].includes(fa(e))}function sc(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Hh(e){const t=Wh(),r=er(e)?tr(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function UE(e){let t=bn(e);for(;mr(t)&&!ta(t);){if(Hh(t))return t;if(sc(t))return null;t=bn(t)}return null}function Wh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ta(e){return["html","body","#document"].includes(fa(e))}function tr(e){return Pt(e).getComputedStyle(e)}function ac(e){return er(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function bn(e){if(fa(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wp(e)&&e.host||gr(e);return wp(t)?t.host:t}function D0(e){const t=bn(e);return ta(t)?e.ownerDocument?e.ownerDocument.body:e.body:mr(t)&&Pi(t)?t:D0(t)}function vi(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=D0(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=Pt(a);if(i){const l=xu(o);return t.concat(o,o.visualViewport||[],Pi(a)?a:[],l&&r?vi(l):[])}return t.concat(a,vi(a,[],r))}function xu(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function T0(e){const t=tr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=mr(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=dl(r)!==i||dl(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Vh(e){return er(e)?e:e.contextElement}function zs(e){const t=Vh(e);if(!mr(t))return ur(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=T0(t);let o=(i?dl(r.width):r.width)/n,l=(i?dl(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const zE=ur(0);function R0(e){const t=Pt(e);return!Wh()||!t.visualViewport?zE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function BE(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Pt(e)?!1:t}function Jn(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=Vh(e);let o=ur(1);t&&(n?er(n)&&(o=zs(n)):o=zs(e));const l=BE(i,r,n)?R0(i):ur(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,p=a.height/o.y;if(i){const y=Pt(i),x=n&&er(n)?Pt(n):n;let b=y,f=xu(b);for(;f&&n&&x!==b;){const g=zs(f),h=f.getBoundingClientRect(),v=tr(f),w=h.left+(f.clientLeft+parseFloat(v.paddingLeft))*g.x,j=h.top+(f.clientTop+parseFloat(v.paddingTop))*g.y;c*=g.x,d*=g.y,u*=g.x,p*=g.y,c+=w,d+=j,b=Pt(f),f=xu(b)}}return hl({width:u,height:p,x:c,y:d})}function qh(e,t){const r=ac(e).scrollLeft;return t?t.left+r:Jn(gr(e)).left+r}function O0(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:qh(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function HE(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=gr(n),l=t?sc(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=ur(1);const u=ur(0),p=mr(n);if((p||!p&&!i)&&((fa(n)!=="body"||Pi(o))&&(c=ac(n)),mr(n))){const x=Jn(n);d=zs(n),u.x=x.x+n.clientLeft,u.y=x.y+n.clientTop}const y=o&&!p&&!i?O0(o,c,!0):ur(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+y.x,y:r.y*d.y-c.scrollTop*d.y+u.y+y.y}}function WE(e){return Array.from(e.getClientRects())}function VE(e){const t=gr(e),r=ac(e),n=e.ownerDocument.body,a=Ct(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Ct(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+qh(e);const l=-r.scrollTop;return tr(n).direction==="rtl"&&(o+=Ct(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function qE(e,t){const r=Pt(e),n=gr(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=Wh();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function GE(e,t){const r=Jn(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=mr(e)?zs(e):ur(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function bp(e,t,r){let n;if(t==="viewport")n=qE(e,r);else if(t==="document")n=VE(gr(e));else if(er(t))n=GE(t,r);else{const a=R0(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return hl(n)}function I0(e,t){const r=bn(e);return r===t||!er(r)||ta(r)?!1:tr(r).position==="fixed"||I0(r,t)}function YE(e,t){const r=t.get(e);if(r)return r;let n=vi(e,[],!1).filter(l=>er(l)&&fa(l)!=="body"),a=null;const i=tr(e).position==="fixed";let o=i?bn(e):e;for(;er(o)&&!ta(o);){const l=tr(o),c=Hh(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Pi(o)&&!c&&I0(e,o))?n=n.filter(u=>u!==o):a=l,o=bn(o)}return t.set(e,n),n}function QE(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?sc(t)?[]:YE(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const p=bp(t,u,a);return d.top=Ct(p.top,d.top),d.right=vn(p.right,d.right),d.bottom=vn(p.bottom,d.bottom),d.left=Ct(p.left,d.left),d},bp(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function KE(e){const{width:t,height:r}=T0(e);return{width:t,height:r}}function JE(e,t,r){const n=mr(t),a=gr(t),i=r==="fixed",o=Jn(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=ur(0);if(n||!n&&!i)if((fa(t)!=="body"||Pi(a))&&(l=ac(t)),n){const y=Jn(t,!0,i,t);c.x=y.x+t.clientLeft,c.y=y.y+t.clientTop}else a&&(c.x=qh(a));const d=a&&!n&&!i?O0(a,l):ur(0),u=o.left+l.scrollLeft-c.x-d.x,p=o.top+l.scrollTop-c.y-d.y;return{x:u,y:p,width:o.width,height:o.height}}function Kc(e){return tr(e).position==="static"}function jp(e,t){if(!mr(e)||tr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return gr(e)===r&&(r=r.ownerDocument.body),r}function A0(e,t){const r=Pt(e);if(sc(e))return r;if(!mr(e)){let a=bn(e);for(;a&&!ta(a);){if(er(a)&&!Kc(a))return a;a=bn(a)}return r}let n=jp(e,t);for(;n&&FE(n)&&Kc(n);)n=jp(n,t);return n&&ta(n)&&Kc(n)&&!Hh(n)?r:n||UE(e)||r}const XE=async function(e){const t=this.getOffsetParent||A0,r=this.getDimensions,n=await r(e.floating);return{reference:JE(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function ZE(e){return tr(e).direction==="rtl"}const e4={convertOffsetParentRelativeRectToViewportRelativeRect:HE,getDocumentElement:gr,getClippingRect:QE,getOffsetParent:A0,getElementRects:XE,getClientRects:WE,getDimensions:KE,getScale:zs,isElement:er,isRTL:ZE};function $0(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function t4(e,t){let r=null,n;const a=gr(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:p,width:y,height:x}=d;if(l||t(),!y||!x)return;const b=oo(p),f=oo(a.clientWidth-(u+y)),g=oo(a.clientHeight-(p+x)),h=oo(u),w={rootMargin:-b+"px "+-f+"px "+-g+"px "+-h+"px",threshold:Ct(0,vn(1,c))||1};let j=!0;function N(_){const k=_[0].intersectionRatio;if(k!==c){if(!j)return o();k?o(!1,k):n=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!$0(d,e.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(N,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(N,w)}r.observe(e)}return o(!0),i}function r4(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Vh(e),u=a||i?[...d?vi(d):[],...vi(t)]:[];u.forEach(h=>{a&&h.addEventListener("scroll",r,{passive:!0}),i&&h.addEventListener("resize",r)});const p=d&&l?t4(d,r):null;let y=-1,x=null;o&&(x=new ResizeObserver(h=>{let[v]=h;v&&v.target===d&&x&&(x.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var w;(w=x)==null||w.observe(t)})),r()}),d&&!c&&x.observe(d),x.observe(t));let b,f=c?Jn(e):null;c&&g();function g(){const h=Jn(e);f&&!$0(f,h)&&r(),f=h,b=requestAnimationFrame(g)}return r(),()=>{var h;u.forEach(v=>{a&&v.removeEventListener("scroll",r),i&&v.removeEventListener("resize",r)}),p==null||p(),(h=x)==null||h.disconnect(),x=null,c&&cancelAnimationFrame(b)}}const n4=IE,s4=AE,a4=TE,i4=LE,o4=RE,Np=DE,l4=$E,c4=(e,t,r)=>{const n=new Map,a={platform:e4,...r},i={...a.platform,_c:n};return PE(e,t,{...a,platform:i})};var Eo=typeof document<"u"?m.useLayoutEffect:m.useEffect;function ml(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!ml(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!ml(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function L0(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _p(e,t){const r=L0(e);return Math.round(t*r)/r}function Jc(e){const t=m.useRef(e);return Eo(()=>{t.current=e}),t}function d4(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,p]=m.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[y,x]=m.useState(n);ml(y,n)||x(n);const[b,f]=m.useState(null),[g,h]=m.useState(null),v=m.useCallback(D=>{D!==_.current&&(_.current=D,f(D))},[]),w=m.useCallback(D=>{D!==k.current&&(k.current=D,h(D))},[]),j=i||b,N=o||g,_=m.useRef(null),k=m.useRef(null),C=m.useRef(u),R=c!=null,P=Jc(c),O=Jc(a),A=Jc(d),V=m.useCallback(()=>{if(!_.current||!k.current)return;const D={placement:t,strategy:r,middleware:y};O.current&&(D.platform=O.current),c4(_.current,k.current,D).then(T=>{const $={...T,isPositioned:A.current!==!1};Q.current&&!ml(C.current,$)&&(C.current=$,aa.flushSync(()=>{p($)}))})},[y,t,r,O,A]);Eo(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,p(D=>({...D,isPositioned:!1})))},[d]);const Q=m.useRef(!1);Eo(()=>(Q.current=!0,()=>{Q.current=!1}),[]),Eo(()=>{if(j&&(_.current=j),N&&(k.current=N),j&&N){if(P.current)return P.current(j,N,V);V()}},[j,N,V,P,R]);const W=m.useMemo(()=>({reference:_,floating:k,setReference:v,setFloating:w}),[v,w]),S=m.useMemo(()=>({reference:j,floating:N}),[j,N]),z=m.useMemo(()=>{const D={position:r,left:0,top:0};if(!S.floating)return D;const T=_p(S.floating,u.x),$=_p(S.floating,u.y);return l?{...D,transform:"translate("+T+"px, "+$+"px)",...L0(S.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:T,top:$}},[r,l,S.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:V,refs:W,elements:S,floatingStyles:z}),[u,V,W,S,z])}const u4=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Np({element:n.current,padding:a}).fn(r):{}:n?Np({element:n,padding:a}).fn(r):{}}}},h4=(e,t)=>({...n4(e),options:[e,t]}),m4=(e,t)=>({...s4(e),options:[e,t]}),f4=(e,t)=>({...l4(e),options:[e,t]}),p4=(e,t)=>({...a4(e),options:[e,t]}),x4=(e,t)=>({...i4(e),options:[e,t]}),g4=(e,t)=>({...o4(e),options:[e,t]}),y4=(e,t)=>({...u4(e),options:[e,t]});var v4="Arrow",F0=m.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Me.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});F0.displayName=v4;var w4=F0;function b4(e){const[t,r]=m.useState(void 0);return pt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Gh="Popper",[U0,z0]=Kl(Gh),[j4,B0]=U0(Gh),H0=e=>{const{__scopePopper:t,children:r}=e,[n,a]=m.useState(null);return s.jsx(j4,{scope:t,anchor:n,onAnchorChange:a,children:r})};H0.displayName=Gh;var W0="PopperAnchor",V0=m.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=B0(W0,r),o=m.useRef(null),l=ze(t,o);return m.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Me.div,{...a,ref:l})});V0.displayName=W0;var Yh="PopperContent",[N4,_4]=U0(Yh),q0=m.forwardRef((e,t)=>{var F,G,Z,ee,ne,te;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:p="partial",hideWhenDetached:y=!1,updatePositionStrategy:x="optimized",onPlaced:b,...f}=e,g=B0(Yh,r),[h,v]=m.useState(null),w=ze(t,Y=>v(Y)),[j,N]=m.useState(null),_=b4(j),k=(_==null?void 0:_.width)??0,C=(_==null?void 0:_.height)??0,R=n+(i!=="center"?"-"+i:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(d)?d:[d],A=O.length>0,V={padding:P,boundary:O.filter(S4),altBoundary:A},{refs:Q,floatingStyles:W,placement:S,isPositioned:z,middlewareData:D}=d4({strategy:"fixed",placement:R,whileElementsMounted:(...Y)=>r4(...Y,{animationFrame:x==="always"}),elements:{reference:g.anchor},middleware:[h4({mainAxis:a+C,alignmentAxis:o}),c&&m4({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?f4():void 0,...V}),c&&p4({...V}),x4({...V,apply:({elements:Y,rects:ie,availableWidth:le,availableHeight:he})=>{const{width:fe,height:ce}=ie.reference,De=Y.floating.style;De.setProperty("--radix-popper-available-width",`${le}px`),De.setProperty("--radix-popper-available-height",`${he}px`),De.setProperty("--radix-popper-anchor-width",`${fe}px`),De.setProperty("--radix-popper-anchor-height",`${ce}px`)}}),j&&y4({element:j,padding:l}),C4({arrowWidth:k,arrowHeight:C}),y&&g4({strategy:"referenceHidden",...V})]}),[T,$]=Q0(S),U=Ar(b);pt(()=>{z&&(U==null||U())},[z,U]);const E=(F=D.arrow)==null?void 0:F.x,q=(G=D.arrow)==null?void 0:G.y,X=((Z=D.arrow)==null?void 0:Z.centerOffset)!==0,[J,L]=m.useState();return pt(()=>{h&&L(window.getComputedStyle(h).zIndex)},[h]),s.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:z?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(ee=D.transformOrigin)==null?void 0:ee.x,(ne=D.transformOrigin)==null?void 0:ne.y].join(" "),...((te=D.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(N4,{scope:r,placedSide:T,onArrowChange:N,arrowX:E,arrowY:q,shouldHideArrow:X,children:s.jsx(Me.div,{"data-side":T,"data-align":$,...f,ref:w,style:{...f.style,animation:z?void 0:"none"}})})})});q0.displayName=Yh;var G0="PopperArrow",k4={top:"bottom",right:"left",bottom:"top",left:"right"},Y0=m.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=_4(G0,n),o=k4[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(w4,{...a,ref:r,style:{...a.style,display:"block"}})})});Y0.displayName=G0;function S4(e){return e!==null}var C4=e=>({name:"transformOrigin",options:e,fn(t){var g,h,v;const{placement:r,rects:n,middlewareData:a}=t,o=((g=a.arrow)==null?void 0:g.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=Q0(r),p={start:"0%",center:"50%",end:"100%"}[u],y=(((h=a.arrow)==null?void 0:h.x)??0)+l/2,x=(((v=a.arrow)==null?void 0:v.y)??0)+c/2;let b="",f="";return d==="bottom"?(b=o?p:`${y}px`,f=`${-c}px`):d==="top"?(b=o?p:`${y}px`,f=`${n.floating.height+c}px`):d==="right"?(b=`${-c}px`,f=o?p:`${x}px`):d==="left"&&(b=`${n.floating.width+c}px`,f=o?p:`${x}px`),{data:{x:b,y:f}}}});function Q0(e){const[t,r="center"]=e.split("-");return[t,r]}var E4=H0,M4=V0,P4=q0,D4=Y0;function T4(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var R4="VisuallyHidden",K0=m.forwardRef((e,t)=>s.jsx(Me.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));K0.displayName=R4;var O4=[" ","Enter","ArrowUp","ArrowDown"],I4=[" ","Enter"],Di="Select",[ic,oc,A4]=vE(Di),[pa,hP]=Kl(Di,[A4,z0]),lc=z0(),[$4,En]=pa(Di),[L4,F4]=pa(Di),J0=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:p,disabled:y,required:x,form:b}=e,f=lc(t),[g,h]=m.useState(null),[v,w]=m.useState(null),[j,N]=m.useState(!1),_=bE(d),[k=!1,C]=du({prop:n,defaultProp:a,onChange:i}),[R,P]=du({prop:o,defaultProp:l,onChange:c}),O=m.useRef(null),A=g?b||!!g.closest("form"):!0,[V,Q]=m.useState(new Set),W=Array.from(V).map(S=>S.props.value).join(";");return s.jsx(E4,{...f,children:s.jsxs($4,{required:x,scope:t,trigger:g,onTriggerChange:h,valueNode:v,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:Fs(),value:R,onValueChange:P,open:k,onOpenChange:C,dir:_,triggerPointerDownPosRef:O,disabled:y,children:[s.jsx(ic.Provider,{scope:t,children:s.jsx(L4,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(S=>{Q(z=>new Set(z).add(S))},[]),onNativeOptionRemove:m.useCallback(S=>{Q(z=>{const D=new Set(z);return D.delete(S),D})},[]),children:r})}),A?s.jsxs(gv,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:p,value:R,onChange:S=>P(S.target.value),disabled:y,form:b,children:[R===void 0?s.jsx("option",{value:""}):null,Array.from(V)]},W):null]})})};J0.displayName=Di;var X0="SelectTrigger",Z0=m.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=lc(r),o=En(X0,r),l=o.disabled||n,c=ze(t,o.onTriggerChange),d=oc(r),u=m.useRef("touch"),[p,y,x]=yv(f=>{const g=d().filter(w=>!w.disabled),h=g.find(w=>w.value===o.value),v=vv(g,f,h);v!==void 0&&o.onValueChange(v.value)}),b=f=>{l||(o.onOpenChange(!0),x()),f&&(o.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return s.jsx(M4,{asChild:!0,...i,children:s.jsx(Me.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":xv(o.value)?"":void 0,...a,ref:c,onClick:Se(a.onClick,f=>{f.currentTarget.focus(),u.current!=="mouse"&&b(f)}),onPointerDown:Se(a.onPointerDown,f=>{u.current=f.pointerType;const g=f.target;g.hasPointerCapture(f.pointerId)&&g.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(b(f),f.preventDefault())}),onKeyDown:Se(a.onKeyDown,f=>{const g=p.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&y(f.key),!(g&&f.key===" ")&&O4.includes(f.key)&&(b(),f.preventDefault())})})})});Z0.displayName=X0;var ev="SelectValue",tv=m.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=En(ev,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,p=ze(t,c.onValueNodeChange);return pt(()=>{d(u)},[d,u]),s.jsx(Me.span,{...l,ref:p,style:{pointerEvents:"none"},children:xv(c.value)?s.jsx(s.Fragment,{children:o}):i})});tv.displayName=ev;var U4="SelectIcon",z4=m.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Me.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});z4.displayName=U4;var B4="SelectPortal",rv=e=>s.jsx(Th,{asChild:!0,...e});rv.displayName=B4;var Xn="SelectContent",nv=m.forwardRef((e,t)=>{const r=En(Xn,e.__scopeSelect),[n,a]=m.useState();if(pt(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?aa.createPortal(s.jsx(sv,{scope:e.__scopeSelect,children:s.jsx(ic.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(av,{...e,ref:t})});nv.displayName=Xn;var Vt=10,[sv,Mn]=pa(Xn),H4="SelectContentImpl",av=m.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:p,collisionBoundary:y,collisionPadding:x,sticky:b,hideWhenDetached:f,avoidCollisions:g,...h}=e,v=En(Xn,r),[w,j]=m.useState(null),[N,_]=m.useState(null),k=ze(t,F=>j(F)),[C,R]=m.useState(null),[P,O]=m.useState(null),A=oc(r),[V,Q]=m.useState(!1),W=m.useRef(!1);m.useEffect(()=>{if(w)return o0(w)},[w]),Xy();const S=m.useCallback(F=>{const[G,...Z]=A().map(te=>te.ref.current),[ee]=Z.slice(-1),ne=document.activeElement;for(const te of F)if(te===ne||(te==null||te.scrollIntoView({block:"nearest"}),te===G&&N&&(N.scrollTop=0),te===ee&&N&&(N.scrollTop=N.scrollHeight),te==null||te.focus(),document.activeElement!==ne))return},[A,N]),z=m.useCallback(()=>S([C,w]),[S,C,w]);m.useEffect(()=>{V&&z()},[V,z]);const{onOpenChange:D,triggerPointerDownPosRef:T}=v;m.useEffect(()=>{if(w){let F={x:0,y:0};const G=ee=>{var ne,te;F={x:Math.abs(Math.round(ee.pageX)-(((ne=T.current)==null?void 0:ne.x)??0)),y:Math.abs(Math.round(ee.pageY)-(((te=T.current)==null?void 0:te.y)??0))}},Z=ee=>{F.x<=10&&F.y<=10?ee.preventDefault():w.contains(ee.target)||D(!1),document.removeEventListener("pointermove",G),T.current=null};return T.current!==null&&(document.addEventListener("pointermove",G),document.addEventListener("pointerup",Z,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",G),document.removeEventListener("pointerup",Z,{capture:!0})}}},[w,D,T]),m.useEffect(()=>{const F=()=>D(!1);return window.addEventListener("blur",F),window.addEventListener("resize",F),()=>{window.removeEventListener("blur",F),window.removeEventListener("resize",F)}},[D]);const[$,U]=yv(F=>{const G=A().filter(ne=>!ne.disabled),Z=G.find(ne=>ne.ref.current===document.activeElement),ee=vv(G,F,Z);ee&&setTimeout(()=>ee.ref.current.focus())}),E=m.useCallback((F,G,Z)=>{const ee=!W.current&&!Z;(v.value!==void 0&&v.value===G||ee)&&(R(F),ee&&(W.current=!0))},[v.value]),q=m.useCallback(()=>w==null?void 0:w.focus(),[w]),X=m.useCallback((F,G,Z)=>{const ee=!W.current&&!Z;(v.value!==void 0&&v.value===G||ee)&&O(F)},[v.value]),J=n==="popper"?gu:iv,L=J===gu?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:p,collisionBoundary:y,collisionPadding:x,sticky:b,hideWhenDetached:f,avoidCollisions:g}:{};return s.jsx(sv,{scope:r,content:w,viewport:N,onViewportChange:_,itemRefCallback:E,selectedItem:C,onItemLeave:q,itemTextRefCallback:X,focusSelectedItem:z,selectedItemText:P,position:n,isPositioned:V,searchRef:$,children:s.jsx(Rh,{as:ea,allowPinchZoom:!0,children:s.jsx(Dh,{asChild:!0,trapped:v.open,onMountAutoFocus:F=>{F.preventDefault()},onUnmountAutoFocus:Se(a,F=>{var G;(G=v.trigger)==null||G.focus({preventScroll:!0}),F.preventDefault()}),children:s.jsx(Ph,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:F=>F.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:s.jsx(J,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:F=>F.preventDefault(),...h,...L,onPlaced:()=>Q(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...h.style},onKeyDown:Se(h.onKeyDown,F=>{const G=F.ctrlKey||F.altKey||F.metaKey;if(F.key==="Tab"&&F.preventDefault(),!G&&F.key.length===1&&U(F.key),["ArrowUp","ArrowDown","Home","End"].includes(F.key)){let ee=A().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);if(["ArrowUp","End"].includes(F.key)&&(ee=ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(F.key)){const ne=F.target,te=ee.indexOf(ne);ee=ee.slice(te+1)}setTimeout(()=>S(ee)),F.preventDefault()}})})})})})})});av.displayName=H4;var W4="SelectItemAlignedPosition",iv=m.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=En(Xn,r),o=Mn(Xn,r),[l,c]=m.useState(null),[d,u]=m.useState(null),p=ze(t,k=>u(k)),y=oc(r),x=m.useRef(!1),b=m.useRef(!0),{viewport:f,selectedItem:g,selectedItemText:h,focusSelectedItem:v}=o,w=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&f&&g&&h){const k=i.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),P=h.getBoundingClientRect();if(i.dir!=="rtl"){const ne=P.left-C.left,te=R.left-ne,Y=k.left-te,ie=k.width+Y,le=Math.max(ie,C.width),he=window.innerWidth-Vt,fe=xp(te,[Vt,Math.max(Vt,he-le)]);l.style.minWidth=ie+"px",l.style.left=fe+"px"}else{const ne=C.right-P.right,te=window.innerWidth-R.right-ne,Y=window.innerWidth-k.right-te,ie=k.width+Y,le=Math.max(ie,C.width),he=window.innerWidth-Vt,fe=xp(te,[Vt,Math.max(Vt,he-le)]);l.style.minWidth=ie+"px",l.style.right=fe+"px"}const O=y(),A=window.innerHeight-Vt*2,V=f.scrollHeight,Q=window.getComputedStyle(d),W=parseInt(Q.borderTopWidth,10),S=parseInt(Q.paddingTop,10),z=parseInt(Q.borderBottomWidth,10),D=parseInt(Q.paddingBottom,10),T=W+S+V+D+z,$=Math.min(g.offsetHeight*5,T),U=window.getComputedStyle(f),E=parseInt(U.paddingTop,10),q=parseInt(U.paddingBottom,10),X=k.top+k.height/2-Vt,J=A-X,L=g.offsetHeight/2,F=g.offsetTop+L,G=W+S+F,Z=T-G;if(G<=X){const ne=O.length>0&&g===O[O.length-1].ref.current;l.style.bottom="0px";const te=d.clientHeight-f.offsetTop-f.offsetHeight,Y=Math.max(J,L+(ne?q:0)+te+z),ie=G+Y;l.style.height=ie+"px"}else{const ne=O.length>0&&g===O[0].ref.current;l.style.top="0px";const Y=Math.max(X,W+f.offsetTop+(ne?E:0)+L)+Z;l.style.height=Y+"px",f.scrollTop=G-X+f.offsetTop}l.style.margin=`${Vt}px 0`,l.style.minHeight=$+"px",l.style.maxHeight=A+"px",n==null||n(),requestAnimationFrame(()=>x.current=!0)}},[y,i.trigger,i.valueNode,l,d,f,g,h,i.dir,n]);pt(()=>w(),[w]);const[j,N]=m.useState();pt(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const _=m.useCallback(k=>{k&&b.current===!0&&(w(),v==null||v(),b.current=!1)},[w,v]);return s.jsx(q4,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:_,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:s.jsx(Me.div,{...a,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});iv.displayName=W4;var V4="SelectPopperPosition",gu=m.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Vt,...i}=e,o=lc(r);return s.jsx(P4,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gu.displayName=V4;var[q4,Qh]=pa(Xn,{}),yu="SelectViewport",ov=m.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Mn(yu,r),o=Qh(yu,r),l=ze(t,i.onViewportChange),c=m.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(ic.Slot,{scope:r,children:s.jsx(Me.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Se(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:y}=o;if(y!=null&&y.current&&p){const x=Math.abs(c.current-u.scrollTop);if(x>0){const b=window.innerHeight-Vt*2,f=parseFloat(p.style.minHeight),g=parseFloat(p.style.height),h=Math.max(f,g);if(h<b){const v=h+x,w=Math.min(b,v),j=v-w;p.style.height=w+"px",p.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,p.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});ov.displayName=yu;var lv="SelectGroup",[G4,Y4]=pa(lv),Q4=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Fs();return s.jsx(G4,{scope:r,id:a,children:s.jsx(Me.div,{role:"group","aria-labelledby":a,...n,ref:t})})});Q4.displayName=lv;var cv="SelectLabel",K4=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Y4(cv,r);return s.jsx(Me.div,{id:a.id,...n,ref:t})});K4.displayName=cv;var fl="SelectItem",[J4,dv]=pa(fl),uv=m.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=En(fl,r),c=Mn(fl,r),d=l.value===n,[u,p]=m.useState(i??""),[y,x]=m.useState(!1),b=ze(t,v=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,v,n,a)}),f=Fs(),g=m.useRef("touch"),h=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(J4,{scope:r,value:n,disabled:a,textId:f,isSelected:d,onItemTextChange:m.useCallback(v=>{p(w=>w||((v==null?void 0:v.textContent)??"").trim())},[]),children:s.jsx(ic.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(Me.div,{role:"option","aria-labelledby":f,"data-highlighted":y?"":void 0,"aria-selected":d&&y,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:b,onFocus:Se(o.onFocus,()=>x(!0)),onBlur:Se(o.onBlur,()=>x(!1)),onClick:Se(o.onClick,()=>{g.current!=="mouse"&&h()}),onPointerUp:Se(o.onPointerUp,()=>{g.current==="mouse"&&h()}),onPointerDown:Se(o.onPointerDown,v=>{g.current=v.pointerType}),onPointerMove:Se(o.onPointerMove,v=>{var w;g.current=v.pointerType,a?(w=c.onItemLeave)==null||w.call(c):g.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Se(o.onPointerLeave,v=>{var w;v.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Se(o.onKeyDown,v=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&v.key===" "||(I4.includes(v.key)&&h(),v.key===" "&&v.preventDefault())})})})})});uv.displayName=fl;var La="SelectItemText",hv=m.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=En(La,r),l=Mn(La,r),c=dv(La,r),d=F4(La,r),[u,p]=m.useState(null),y=ze(t,h=>p(h),c.onItemTextChange,h=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,h,c.value,c.disabled)}),x=u==null?void 0:u.textContent,b=m.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:f,onNativeOptionRemove:g}=d;return pt(()=>(f(b),()=>g(b)),[f,g,b]),s.jsxs(s.Fragment,{children:[s.jsx(Me.span,{id:c.textId,...i,ref:y}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?aa.createPortal(i.children,o.valueNode):null]})});hv.displayName=La;var mv="SelectItemIndicator",fv=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return dv(mv,r).isSelected?s.jsx(Me.span,{"aria-hidden":!0,...n,ref:t}):null});fv.displayName=mv;var vu="SelectScrollUpButton",X4=m.forwardRef((e,t)=>{const r=Mn(vu,e.__scopeSelect),n=Qh(vu,e.__scopeSelect),[a,i]=m.useState(!1),o=ze(t,n.onScrollButtonChange);return pt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(pv,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});X4.displayName=vu;var wu="SelectScrollDownButton",Z4=m.forwardRef((e,t)=>{const r=Mn(wu,e.__scopeSelect),n=Qh(wu,e.__scopeSelect),[a,i]=m.useState(!1),o=ze(t,n.onScrollButtonChange);return pt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(pv,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Z4.displayName=wu;var pv=m.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Mn("SelectScrollButton",r),o=m.useRef(null),l=oc(r),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),pt(()=>{var u;const d=l().find(p=>p.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Me.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Se(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Se(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Se(a.onPointerLeave,()=>{c()})})}),eM="SelectSeparator",tM=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Me.div,{"aria-hidden":!0,...n,ref:t})});tM.displayName=eM;var bu="SelectArrow",rM=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=lc(r),i=En(bu,r),o=Mn(bu,r);return i.open&&o.position==="popper"?s.jsx(D4,{...a,...n,ref:t}):null});rM.displayName=bu;function xv(e){return e===""||e===void 0}var gv=m.forwardRef((e,t)=>{const{value:r,...n}=e,a=m.useRef(null),i=ze(t,a),o=T4(r);return m.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const p=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(p)}},[o,r]),s.jsx(K0,{asChild:!0,children:s.jsx("select",{...n,ref:i,defaultValue:r})})});gv.displayName="BubbleSelect";function yv(e){const t=Ar(e),r=m.useRef(""),n=m.useRef(0),a=m.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=m.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function vv(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=nM(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function nM(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var sM=J0,wv=Z0,aM=tv,iM=rv,bv=nv,oM=ov,jv=uv,lM=hv,cM=fv;const Nv=sM,_v=aM,Kh=m.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(wv,{ref:n,className:Tt("flex h-9 w-full items-center justify-between rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:[t,s.jsx(nl,{className:"h-4 w-4 opacity-50"})]}));Kh.displayName=wv.displayName;const Jh=m.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(iM,{children:s.jsx(bv,{ref:a,className:Tt("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:s.jsx(oM,{className:Tt("p-1 bg-white",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));Jh.displayName=bv.displayName;const Xh=m.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(jv,{ref:n,className:Tt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none hover:bg-gray-100 focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(cM,{children:s.jsx(Ps,{className:"h-4 w-4"})})}),s.jsx(lM,{children:t})]}));Xh.displayName=jv.displayName;function dM({isOpen:e,onClose:t,onSelectCoupon:r}){const[n,a]=m.useState([]),[i,o]=m.useState(!0),[l,c]=m.useState(""),[d,u]=m.useState(1),[p,y]=m.useState(1),[x,b]=m.useState({column:"created_at",direction:"desc"}),f=Be(),g=Fe(O=>O.user),h=(g==null?void 0:g.role)==="admin"||(g==null?void 0:g.role)==="superadmin",v=10;m.useEffect(()=>{e&&w()},[e,d,l,x]);const w=async()=>{try{o(!0);let O=I.from("coupons").select("*",{count:"exact",head:!0});l&&(O=O.or(`code.ilike.%${l}%,owner_name.ilike.%${l}%`));const{count:A}=await O;y(Math.ceil((A||0)/v));const V=(d-1)*v,Q=V+(v-1);let W=I.from("coupons").select("*").order(x.column,{ascending:x.direction==="asc"}).range(V,Q);l&&(W=W.or(`code.ilike.%${l}%,owner_name.ilike.%${l}%`));const{data:S,error:z}=await W;if(z)throw z;a(S||[])}catch{B.error("Error fetching coupons")}finally{o(!1)}},j=async(O,A)=>{if(A.stopPropagation(),!h){B.error("Only administrators can change coupon status");return}try{const{error:V}=await I.from("coupons").update({active:!O.active}).eq("id",O.id);if(V)throw V;a(n.map(Q=>Q.id===O.id?{...Q,active:!Q.active}:Q)),B.success(`Coupon ${O.active?"disabled":"enabled"}`)}catch{B.error("Error updating coupon status")}},N=(O,A)=>{A.stopPropagation(),t(),f(`/coupons/edit/${O.id}`)},_=O=>{O>=1&&O<=p&&u(O)},k=O=>{_(parseInt(O,10))},C=()=>{const O=[];for(let A=1;A<=p;A++)O.push(s.jsxs(Xh,{value:A.toString(),children:["Page ",A]},A));return O},R=O=>{b(A=>({column:O,direction:A.column===O&&A.direction==="asc"?"desc":"asc"}))},P=O=>x.column!==O?s.jsx(Sf,{className:"h-4 w-4 text-gray-400"}):x.direction==="asc"?s.jsx(Sf,{className:"h-4 w-4 text-orange-600"}):s.jsx(nl,{className:"h-4 w-4 text-orange-600"});return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Coupons"}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"p-6 overflow-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(xr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{type:"text",placeholder:"Search by code or owner's name...",value:l,onChange:O=>{c(O.target.value),u(1)},className:"pl-10"})]})}),s.jsx("div",{className:"overflow-x-auto",children:i?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 group",onClick:()=>R("code"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Code",P("code")]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 group",onClick:()=>R("owner_name"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Owner",P("owner_name")]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 group",onClick:()=>R("type"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Type",P("type")]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 group",onClick:()=>R("uses"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Usage",P("uses")]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 group",onClick:()=>R("valid_until"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Valid Until",P("valid_until")]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 group",onClick:()=>R("active"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Status",P("active")]})}),h&&s.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:h?8:7,className:"px-6 py-4 text-center text-gray-500",children:"No coupons found"})}):n.map((O,A)=>s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>r(O.code),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(d-1)*v+A+1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:O.code}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.owner_name||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:O.type}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[O.uses," / ",O.max_uses]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(O.valid_until),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${O.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:O.active?"Active":"Disabled"})}),h&&s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[s.jsx(M,{variant:"ghost",size:"sm",onClick:V=>j(O,V),className:"text-gray-600 hover:text-gray-900",children:O.active?s.jsx(Al,{className:"h-4 w-4 text-green-600"}):s.jsx(Il,{className:"h-4 w-4 text-gray-400"})}),s.jsx(M,{variant:"ghost",size:"sm",onClick:V=>N(O,V),className:"text-gray-600 hover:text-gray-900",children:s.jsx(ca,{className:"h-4 w-4"})})]})]},O.id))})]})}),!i&&n.length>0&&s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(d-1)*v+1," to ",Math.min(d*v,p*v)," of ",p*v," results"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(M,{variant:"outline",size:"sm",onClick:()=>_(d-1),disabled:d===1,children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsxs(Nv,{value:d.toString(),onValueChange:k,children:[s.jsx(Kh,{className:"w-[100px]",children:s.jsx(_v,{placeholder:"Page..."})}),s.jsx(Jh,{children:C()})]}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>_(d+1),disabled:d===p,children:s.jsx(Ge,{className:"h-4 w-4"})})]})]})]})]})}):null}function uM({isOpen:e,onClose:t}){const[r,n]=m.useState([]),[a,i]=m.useState(!0),[o,l]=m.useState(1),[c,d]=m.useState(1),[u,p]=m.useState(H(new Date,"yyyy-MM-dd")),[y,x]=m.useState(""),b=10;m.useEffect(()=>{e&&f()},[e,u,o,y]);const f=async()=>{if(e){i(!0),n([]);try{const j=Ee(new Date(u));j.setHours(0,0,0,0);const N=Ee(new Date(u));N.setHours(23,59,59,999);const _=j.toISOString(),k=N.toISOString(),C=(o-1)*b,R=y.trim()||null,{data:P,error:O}=await I.rpc("count_coupon_usage",{search_term:R,start_date:R?null:_,end_date:R?null:k});if(O)throw console.error("Error fetching count via RPC:",O),O;const A=P||0;if(d(Math.ceil(A/b)),A===0){n([]),i(!1);return}const{data:V,error:Q}=await I.rpc("search_coupon_usage",{search_term:R,start_date:R?null:_,end_date:R?null:k,page_limit:b,page_offset:C});if(Q)throw console.error("Error fetching data via RPC:",Q),Q;const W=V||[];console.log("Raw data from RPC:",W);const S=W.map($=>$.user_id).filter($=>$!==null),z=[...new Set(S)],D=new Map;if(z.length>0){const{data:$,error:U}=await I.from("users").select("id, email, name").in("id",z);U?console.error("Error fetching user details:",U):$&&$.forEach(E=>{E.id&&E.email&&D.set(E.id,{email:E.email,name:E.name})})}const T=W.map($=>{const U=$.user_id?D.get($.user_id):void 0;return{id:$.id,used_at:$.used_at,coupon:{code:$.coupon_code,owner_name:$.coupon_owner_name||"-"},user:U}});n(T)}catch(j){const N=j instanceof Error?j.message:JSON.stringify(j);console.error("Error fetching all coupon usage:",N),B.error("Error fetching coupon usage data. Please try again."),n([]),d(1)}finally{i(!1)}}},g=j=>{j>=1&&j<=c&&l(j)},h=j=>{g(parseInt(j,10))},v=j=>{const N=new Date(u),_=j==="prev"?Mi(N,1):Or(N,1);p(H(_,"yyyy-MM-dd")),l(1)},w=()=>{const j=[];for(let N=1;N<=c;N++)j.push(s.jsxs(Xh,{value:N.toString(),children:["Page ",N]},N));return j};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:y?`Search Results for "${y}"`:"All Coupon Usage"}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"p-6 overflow-auto",children:[s.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(xr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{type:"text",placeholder:"Search by coupon code or owner name...",value:y,onChange:j=>{x(j.target.value),l(1)},className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(M,{variant:"outline",size:"icon",onClick:()=>v("prev"),children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx("div",{className:"absolute left-2.5 top-1/2 -translate-y-1/2 pointer-events-none",children:s.jsx(Ur,{className:"h-4 w-4 text-gray-400"})}),s.jsx(re,{type:"date",value:u,onChange:j=>{p(j.target.value),l(1)},className:"pl-9 w-40"})]}),s.jsx(M,{variant:"outline",size:"icon",onClick:()=>v("next"),children:s.jsx(Ge,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coupon Code"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cashier"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})})}):r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:y?"No results found":"No coupon usage records found"})}):r.map((j,N)=>{var _,k;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(o-1)*b+N+1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(Ee(new Date(j.used_at)),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(Ee(new Date(j.used_at)),"HH:mm")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:j.coupon.code||"Unknown"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.coupon.owner_name||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((_=j.user)==null?void 0:_.name)||((k=j.user)==null?void 0:k.email)||"System"})]},j.id)})})]})}),!a&&r.length>0&&s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(o-1)*b+1," to ",Math.min(o*b,c*b)," of ",c*b," results"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(M,{variant:"outline",size:"sm",onClick:()=>g(o-1),disabled:o===1,children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsxs(Nv,{value:o.toString(),onValueChange:h,children:[s.jsx(Kh,{className:"w-[100px]",children:s.jsx(_v,{placeholder:"Page..."})}),s.jsx(Jh,{children:w()})]}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>g(o+1),disabled:o===c,children:s.jsx(Ge,{className:"h-4 w-4"})})]})]})]})]})}):null}function hM({isOpen:e,onClose:t,onConfirm:r,couponCode:n,loading:a,isValid:i,validationMessage:o}){return s.jsx(Lh,{open:e,onOpenChange:t,children:s.jsxs(Zl,{className:"bg-white",children:[s.jsxs(Fh,{children:[s.jsxs(tc,{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"h-5 w-5 text-orange-500"}),"Confirm Coupon Usage"]}),s.jsx(rc,{className:"text-gray-600",children:i?s.jsxs(s.Fragment,{children:["Are you sure you want to deduct one use from coupon ",s.jsx("span",{className:"font-mono font-medium",children:n}),"? This action cannot be undone."]}):s.jsxs("div",{className:"text-red-600",children:["Cannot deduct usage because: ",o]})})]}),s.jsxs(ec,{children:[s.jsx(M,{variant:"outline",onClick:t,disabled:a,children:"Cancel"}),s.jsx(M,{onClick:r,disabled:a||!i,className:"bg-orange-600 hover:bg-orange-700",children:a?"Processing...":"Confirm"})]})]})})}function mM(){const e=Be(),t=pr(),r=Fe(U=>U.user),n=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="superadmin",[a,i]=m.useState(""),[o,l]=m.useState(!1),[c,d]=m.useState(null),[u,p]=m.useState(!1),[y,x]=m.useState([]),[b,f]=m.useState(!1),[g,h]=m.useState(!1),[v,w]=m.useState(!1),[j,N]=m.useState(!1),[_,k]=m.useState(!1),[C,R]=m.useState(1),[P,O]=m.useState(1),[A,V]=m.useState(H(new Date,"yyyy-MM-dd"));m.useEffect(()=>{var U;(U=t.state)!=null&&U.couponCode&&(i(t.state.couponCode),Q(t.state.couponCode),window.history.replaceState({},document.title))},[t.state]);const Q=async U=>{var q,X;const E=U||a;if(E.trim()){l(!0),d(null);try{const{data:J,error:L}=await I.from("coupons").select(`
          *,
          cashier:users!created_by ( name, email )
        `).eq("code",E.toUpperCase()).single();if(L){L.code!=="PGRST116"?(console.error("Error fetching coupon:",L),B.error("Error validating coupon. "+L.message)):B.error("Coupon not found"),d(null);return}if(!J){B.error("Coupon not found"),d(null);return}const F={...J,cashier_name:((q=J.cashier)==null?void 0:q.name)||((X=J.cashier)==null?void 0:X.email)||null};d(F)}catch(J){console.error("Catch block error validating coupon:",J),B.error("An unexpected error occurred while validating the coupon."),d(null)}finally{l(!1)}}},W=async()=>{if(c){f(!0),p(!0);try{await S()}catch(U){console.error("Error fetching usage history:",U),B.error("Error loading usage history"),x([])}finally{f(!1)}}},S=async()=>{if(c)try{const{count:U}=await I.from("coupon_uses").select("*",{count:"exact",head:!0}).eq("coupon_id",c.id);O(Math.ceil((U||0)/15));const E=(C-1)*15,q=E+14,{data:X,error:J}=await I.from("coupon_uses").select(`
          id,
          used_at,
          amount_saved,
          user:user_id (
            email
          ),
          payment:payment_id (
            amount,
            payment_method
          )
        `).eq("coupon_id",c.id).order("used_at",{ascending:!1}).range(E,q);if(J)throw J;const L=(X||[]).map(F=>{const G=F;return{id:G.id,used_at:G.used_at,amount_saved:G.amount_saved,user:G.user?{email:G.user.email}:void 0,payment:G.payment?{amount:G.payment.amount,payment_method:G.payment.payment_method}:void 0}});x(L)}catch(U){throw console.error("Error fetching usage history:",U),U}},z=()=>{c&&k(!0)},D=async()=>{if(c){h(!0);try{const{data:U,error:E}=await I.from("coupon_uses").insert({coupon_id:c.id,user_id:r==null?void 0:r.id,amount_saved:c.price}).select().single();if(E)throw E;const{error:q}=await I.rpc("update_coupon_usage",{p_coupon_id:c.id,p_increment:!0});if(q)throw q;const{data:X,error:J}=await I.from("coupons").select("*").eq("id",c.id).single();if(J)throw J;d(X),B.success("Coupon usage deducted successfully"),u&&S().catch(L=>{console.error("Error refreshing history:",L),B.error("Error refreshing history")})}catch(U){console.error("Error deducting coupon usage:",U),B.error("Error deducting coupon usage")}finally{h(!1),k(!1)}}},T=U=>U.active&&new Date(U.valid_until)>new Date&&U.uses<U.max_uses,$=U=>U&&U.uses<U.max_uses;return s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Coupon Validation"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs(M,{variant:"outline",onClick:()=>N(!0),children:[s.jsx(Qn,{className:"mr-2 h-4 w-4"}),"View All Coupon Usage"]}),s.jsxs(M,{variant:"outline",onClick:()=>w(!0),children:[s.jsx(aN,{className:"mr-2 h-4 w-4"}),"All Coupons"]}),s.jsxs(M,{onClick:()=>e("/coupons/new"),children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),"New Coupon"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(xr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{type:"text",placeholder:"Enter coupon code...",value:a,onChange:U=>i(U.target.value.toUpperCase()),onKeyDown:U=>U.key==="Enter"&&Q(),className:"pl-10"})]})}),o?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):c?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:c.code}),s.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[c.type," Membership"]}),c.owner_name&&s.jsxs("p",{className:"text-sm text-gray-500",children:["Owner: ",c.owner_name]}),c.cashier_name&&s.jsxs("p",{className:"text-sm text-gray-500",children:["Coupon Sold By : ",c.cashier_name]})]}),T(c)?s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[s.jsx(Ps,{className:"mr-1 h-4 w-4"}),"Valid"]}):s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[s.jsx(at,{className:"mr-1 h-4 w-4"}),"Invalid"]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Coupon Price"}),s.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["RM ",c.price.toFixed(2)]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Usage"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[c.uses," / ",c.max_uses]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Status"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[c.active?s.jsx(Ps,{className:"h-5 w-5 text-green-500"}):s.jsx(at,{className:"h-5 w-5 text-red-500"}),s.jsx("span",{className:"ml-2",children:c.active?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex items-center",children:[new Date(c.valid_until)>new Date?s.jsx(Ps,{className:"h-5 w-5 text-green-500"}):s.jsx(at,{className:"h-5 w-5 text-red-500"}),s.jsxs("span",{className:"ml-2",children:["Valid until ",H(new Date(c.valid_until),"dd MMM yyyy")]})]}),s.jsxs("div",{className:"flex items-center",children:[c.uses<c.max_uses?s.jsx(Ps,{className:"h-5 w-5 text-green-500"}):s.jsx(at,{className:"h-5 w-5 text-red-500"}),s.jsxs("span",{className:"ml-2",children:[c.max_uses-c.uses," uses remaining"]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm text-gray-500",children:["Coupon created on : ",H(new Date(c.created_at),"dd MMM yyyy, hh:mm a")]}),!T(c)&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(hr,{className:"h-5 w-5 text-red-400"}),s.jsx("div",{className:"ml-3",children:s.jsxs("p",{className:"text-sm text-red-700",children:["This coupon is not valid because :",!c.active&&s.jsx("span",{className:"block",children:"- Coupon is inactive."}),new Date(c.valid_until)<=new Date&&s.jsx("span",{className:"block",children:"- Coupon has expired."}),c.uses>=c.max_uses&&s.jsx("span",{className:"block",children:"- Maximum uses reached."})]})})]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs(M,{variant:"outline",onClick:W,disabled:b,children:[s.jsx(Qn,{className:"mr-2 h-4 w-4"}),"View Usage"]}),s.jsxs(M,{variant:"outline",onClick:z,disabled:g||!$(c),children:[s.jsx(oN,{className:"mr-2 h-4 w-4"}),"Deduct Usage"]}),n&&s.jsxs(M,{variant:"outline",onClick:()=>e(`/coupons/edit/${c.id}`),children:[s.jsx(ca,{className:"mr-2 h-4 w-4"}),"Edit"]})]})]}):null]})}),s.jsx(yE,{isOpen:u,onClose:()=>p(!1),history:y,loading:b,currentPage:C,totalPages:P,onPageChange:R,selectedDate:A,couponCode:(c==null?void 0:c.code)||""}),s.jsx(dM,{isOpen:v,onClose:()=>w(!1),onSelectCoupon:U=>{w(!1),i(U),Q(U)}}),s.jsx(uM,{isOpen:j,onClose:()=>N(!1)}),s.jsx(hM,{isOpen:_,onClose:()=>k(!1),onConfirm:D,couponCode:(c==null?void 0:c.code)||"",loading:g,isValid:c?T(c):!1,validationMessage:c?c.active?new Date(c.valid_until)<=new Date?"Coupon has expired":c.uses>=c.max_uses?"Maximum uses reached":void 0:"Coupon is inactive":void 0})]})}function fM(){const e=Be(),[t,r]=m.useState([]),[n,a]=m.useState(!0),[i,o]=m.useState(""),[l,c]=m.useState("all"),[d,u]=m.useState("all"),[p,y]=m.useState("name"),[x,b]=m.useState("asc"),[f,g]=m.useState(15),[h,v]=m.useState(1),[w,j]=m.useState(0),[N,_]=m.useState(1);m.useEffect(()=>{k()},[i,l,d]),m.useEffect(()=>{C()},[i,l,d,p,x,f,h]);const k=async()=>{try{let S=I.from("members").select("*",{count:"exact",head:!0});i&&(S=S.or(`member_id.ilike.%${i}%,name.ilike.%${i}%,nric.ilike.%${i}%,phone.ilike.%${i}%`)),l!=="all"&&(S=S.eq("status",l)),d!=="all"&&(S=S.eq("type",d));const{count:z,error:D}=await S;if(D)throw D;j(z||0),_(f==="all"?1:Math.ceil((z||0)/Number(f))),h>Math.ceil((z||0)/Number(f))&&z!==0&&v(1)}catch(S){console.error("Error fetching members count:",S)}},C=async()=>{a(!0);try{let S=I.from("members").select("*");if(i&&(S=S.or(`member_id.ilike.%${i}%,name.ilike.%${i}%,nric.ilike.%${i}%,phone.ilike.%${i}%`)),l!=="all"&&(S=S.eq("status",l)),d!=="all"&&(S=S.eq("type",d)),S=S.order(p,{ascending:x==="asc"}),f!=="all"){const $=(h-1)*Number(f),U=$+Number(f)-1;S=S.range($,U)}const{data:z,error:D}=await S;if(D)throw D;const T=await Promise.all((z||[]).map(async $=>{try{const U=await zy($.expiry_date,$.status);return U!==$.status?(await By($),{...$,status:U}):$}catch(U){return console.error("Error updating member status:",U),$}}));r(T)}catch(S){console.error("Error fetching members:",S),B.error("Error fetching members")}finally{a(!1)}},R=S=>{S===p?b(x==="asc"?"desc":"asc"):(y(S),b("asc"))},P=S=>S!==p?"":x==="asc"?"":"",O=S=>{switch(S){case"active":return"bg-green-100 text-green-800";case"grace":return"bg-yellow-100 text-yellow-800";case"expired":return"bg-red-100 text-red-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},A=S=>S.charAt(0).toUpperCase()+S.slice(1),V=S=>{g(S),v(1)},Q=()=>{(async()=>{try{a(!0);let z=I.from("members").select("*");i&&(z=z.or(`member_id.ilike.%${i}%,name.ilike.%${i}%,nric.ilike.%${i}%,phone.ilike.%${i}%`)),l!=="all"&&(z=z.eq("status",l)),d!=="all"&&(z=z.eq("type",d)),z=z.order(p,{ascending:x==="asc"});const{data:D,error:T}=await z;if(T)throw T;const $=D.map(U=>({"Member ID":U.member_id,Name:U.name,NRIC:U.nric,Phone:U.phone||"",Email:U.email||"",Type:U.type,Status:A(U.status),"Expiry Date":H(new Date(U.expiry_date),"dd MMM yyyy"),"Created At":H(new Date(U.created_at),"dd MMM yyyy")}));Br($,"members.csv")}catch(z){console.error("Error exporting members:",z),B.error("Error exporting members")}finally{a(!1)}})()},W=()=>{const S=[];let D=Math.max(1,h-Math.floor(2.5)),T=Math.min(N,D+5-1);T-D+1<5&&(D=Math.max(1,T-5+1));for(let $=D;$<=T;$++)S.push($);return S};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:flex sm:items-center",children:[s.jsxs("div",{className:"sm:flex-auto",children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Members"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"List of all registered members in FMF."})]}),s.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:s.jsxs(M,{onClick:()=>e("/members/new"),children:[s.jsx(sy,{className:"mr-2 h-4 w-4"}),"New Member"]})})]}),s.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(re,{type:"text",placeholder:"Search members...",value:i,onChange:S=>o(S.target.value),className:"pl-10"}),s.jsx(xr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"})]}),s.jsx("div",{children:s.jsxs("select",{value:l,onChange:S=>c(S.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"grace",children:"Grace Period"}),s.jsx("option",{value:"expired",children:"Expired"}),s.jsx("option",{value:"suspended",children:"Suspended"})]})}),s.jsx("div",{children:s.jsxs("select",{value:d,onChange:S=>u(S.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[s.jsx("option",{value:"all",children:"Member Type"}),s.jsx("option",{value:"adult",children:"Adult"}),s.jsx("option",{value:"youth",children:"Youth"})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(M,{variant:"outline",onClick:Q,children:[s.jsx(zr,{className:"mr-2 h-4 w-4"}),"Export CSV"]})})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>R("name"),children:["Name ",P("name")]}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NRIC"}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>R("type"),children:["Type ",P("type")]}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>R("status"),children:["Status ",P("status")]}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>R("expiry_date"),children:["Expiry Date ",P("expiry_date")]})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-6 py-4 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"No members found"})}):t.map((S,z)=>s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>e(`/members/${S.id}`),children:[s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:f==="all"?z+1:(h-1)*Number(f)+z+1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:S.photo_url||"https://via.placeholder.com/100",alt:S.name})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.name}),s.jsx("div",{className:"text-sm text-gray-500",children:S.phone})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.nric}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:S.type}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${O(S.status)}`,children:A(S.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(S.expiry_date),"dd MMM yyyy")})]},S.id))})]})}),s.jsxs("div",{className:"px-6 py-4 flex flex-wrap items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Show:"}),s.jsx("div",{className:"flex space-x-1",children:[15,50,100,"all"].map(S=>s.jsx(M,{variant:f===S?"default":"outline",size:"sm",onClick:()=>V(S),className:"px-2 py-1 text-xs",children:S==="all"?"All":S},S))})]}),f!=="all"&&N>1&&s.jsxs("div",{className:"flex items-center space-x-2 mt-4 sm:mt-0",children:[s.jsxs("span",{className:"text-sm text-gray-700",children:["Showing ",(h-1)*Number(f)+1," to ",Math.min(h*Number(f),w)," of ",w," members"]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(M,{variant:"outline",size:"sm",onClick:()=>v(1),disabled:h===1,className:"px-2 py-1 text-xs",children:"First"}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>v(S=>Math.max(1,S-1)),disabled:h===1,className:"px-2 py-1 text-xs",children:"Prev"}),W().map(S=>s.jsx(M,{variant:h===S?"default":"outline",size:"sm",onClick:()=>v(S),className:"px-2 py-1 text-xs",children:S},S)),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>v(S=>Math.min(N,S+1)),disabled:h===N,className:"px-2 py-1 text-xs",children:"Next"}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>v(N),disabled:h===N,className:"px-2 py-1 text-xs",children:"Last"})]})]})]})]})]})}const lo=10,Xc=10;function pM(){const{id:e}=la(),t=Be(),r=Fe(E=>E.user),[n,a]=m.useState(null),[i,o]=m.useState(!0),[l,c]=m.useState("check-ins"),[d,u]=m.useState([]),[p,y]=m.useState([]),[x,b]=m.useState([]),[f,g]=m.useState([]),[h,v]=m.useState(!1),[w,j]=m.useState(1),[N,_]=m.useState(1);m.useState("check_in_time");const[k,C]=m.useState("desc");m.useEffect(()=>{R()},[e]),m.useEffect(()=>{n&&(j(1),_(1),P())},[n,l]);const R=async()=>{try{const{data:E,error:q}=await I.from("members").select("*").eq("id",e).single();if(q)throw q;a(E)}catch{B.error("Error fetching member details"),t("/members")}finally{o(!1)}},P=async()=>{if(n){v(!0);try{if(l==="check-ins"){const{data:E,error:q}=await I.from("check_ins").select(`*,
            user:user_id (
              email,
              name
            )
          `).eq("member_id",n.id).order("check_in_time",{ascending:!1});if(q)throw q;u(E||[])}else if(l==="payments"){const{data:E,error:q}=await I.from("payments").select("*").eq("member_id",n.id).order("created_at",{ascending:!1}).limit(50);if(q)throw q;y(E)}else if(l==="membership"){const{data:E,error:q}=await I.from("payments").select("*").eq("member_id",n.id).in("type",["registration","renewal"]).order("created_at",{ascending:!0});if(q)throw q;const X=[];let J=null;E.forEach((L,F)=>{const G=new Date(L.created_at),Z=J?new Date(J):null;L.type==="registration"?(J=new Date(G),J.setMonth(J.getMonth()+1)):L.type==="renewal"&&Z&&(J=new Date(Z),J.setMonth(J.getMonth()+1)),X.push({id:L.id,payment_id:L.id,member_id:L.member_id,previous_expiry_date:(Z==null?void 0:Z.toISOString())||null,new_expiry_date:(J==null?void 0:J.toISOString())||null,type:L.type,plan_details:{months:1,price:L.amount},created_at:L.created_at,payment:{amount:L.amount,payment_method:L.payment_method,created_at:L.created_at}})}),b(X.reverse())}else if(l==="grace-period"){const{data:E,error:q}=await I.from("grace_period_access").select(`
            id,
            check_in_time,
            expiry_date,
            grace_period_days,
            user:user_id (
              email,
              name
            )
          `).eq("member_id",n.id).order("check_in_time",{ascending:!1});if(q)throw q;const X=(E||[]).map(J=>({...J,user:J.user||null}));g(X)}}catch(E){console.error("Supabase Error:",E),B.error("Error fetching history")}finally{v(!1)}}},O=async()=>{if(!(!n||!["admin","superadmin"].includes((r==null?void 0:r.role)||"")||!window.confirm(n.status==="suspended"?"Are you sure you want to unsuspend this member?":"Are you sure you want to suspend this member? They will not be able to check in until unsuspended.")))try{if(n.status==="suspended"){const q=new Date(n.expiry_date),X=new Date;let J=7;try{const{data:Z,error:ee}=await I.rpc("get_settings",{p_key:"membership"});!ee&&(Z!=null&&Z.grace_period_days)&&(J=Z.grace_period_days)}catch(Z){console.error("Error fetching settings:",Z)}const L=new Date(q);L.setDate(L.getDate()+J);let F;q>X?F="active":L>X?F="grace":F="expired";const{error:G}=await I.from("members").update({status:F}).eq("id",n.id);if(G)throw G;B.success(`Member has been unsuspended (Status: ${A(F)})`)}else{const{error:q}=await I.from("members").update({status:"suspended"}).eq("id",n.id);if(q)throw q;B.success("Member has been suspended")}R()}catch{B.error("Error updating member status")}},A=E=>E.charAt(0).toUpperCase()+E.slice(1),V=E=>{switch(E){case"active":return"bg-green-100 text-green-800";case"grace":return"bg-yellow-100 text-yellow-800";case"expired":return"bg-red-100 text-red-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Q=m.useMemo(()=>[...d].sort((E,q)=>{const X=new Date(E.check_in_time).getTime(),J=new Date(q.check_in_time).getTime();return k==="asc"?X-J:J-X}),[d,k]),W=Math.ceil(Q.length/lo),S=Q.slice((w-1)*lo,w*lo),z=Math.ceil(f.length/Xc),D=f.slice((N-1)*Xc,N*Xc),T=E=>{E>=1&&E<=W&&j(E)},$=E=>{E>=1&&E<=z&&_(E)},U=()=>{C(E=>E==="asc"?"desc":"asc"),j(1)};return i?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):n?s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(M,{variant:"ghost",onClick:()=>t("/members"),children:[s.jsx(Tr,{className:"mr-2 h-4 w-4"}),"Back to Members"]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"p-6 sm:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row",children:[s.jsx("div",{className:"flex-shrink-0 mb-6 sm:mb-0 sm:mr-8",children:s.jsx("img",{src:n.photo_url||"https://via.placeholder.com/200",alt:n.name,className:"h-48 w-48 rounded-lg object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n.name}),s.jsxs("p",{className:"text-lg text-gray-600 mt-1",children:["Member ID: ",s.jsx("span",{className:"font-mono",children:n.member_id})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(M,{variant:"outline",onClick:()=>t(`/members/${n.id}/edit`),children:[s.jsx(cN,{className:"mr-2 h-4 w-4"}),"Edit"]}),s.jsxs(M,{variant:"outline",onClick:()=>t(`/members/${n.id}/renew`),children:[s.jsx(al,{className:"mr-2 h-4 w-4"}),"Renew"]}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="superadmin")&&s.jsx(M,{variant:n.status==="suspended"?"outline":"ghost",onClick:O,children:n.status==="suspended"?s.jsxs(s.Fragment,{children:[s.jsx(tN,{className:"mr-2 h-4 w-4"}),"Unsuspend"]}):s.jsxs(s.Fragment,{children:[s.jsx(J1,{className:"mr-2 h-4 w-4"}),"Suspend"]})})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Membership Type"}),s.jsx("p",{className:"mt-1 text-lg font-medium capitalize",children:n.type})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),s.jsx("p",{className:`mt-1 inline-flex px-2 text-sm font-semibold rounded-full ${V(n.status)}`,children:A(n.status)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Expiry Date"}),s.jsx("p",{className:"mt-1 text-lg font-medium",children:H(new Date(n.expiry_date),"dd MMM yyyy")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"NRIC"}),s.jsx("p",{className:"mt-1 text-lg font-medium",children:n.nric})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("p",{className:"mt-1 text-lg font-medium",children:n.phone})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"mt-1 text-lg font-medium",children:n.email||"-"})]})]}),n.status==="expired"&&s.jsx("div",{className:"mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(hr,{className:"h-5 w-5 text-yellow-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-yellow-700",children:"This membership has expired. Member needs to renew to continue accessing the gym."})})]})}),n.status==="grace"&&s.jsx("div",{className:"mt-6 bg-orange-50 border-l-4 border-orange-400 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(hr,{className:"h-5 w-5 text-orange-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-orange-700",children:"This member is in their grace period. They should renew their membership soon."})})]})})]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs("button",{onClick:()=>c("check-ins"),className:`
                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                    ${l==="check-ins"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:[s.jsx(Qn,{className:"inline-block mr-2 h-4 w-4"}),"Check-ins"]}),s.jsxs("button",{onClick:()=>c("payments"),className:`
                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                    ${l==="payments"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:[s.jsx(rs,{className:"inline-block mr-2 h-4 w-4"}),"Payments"]}),s.jsxs("button",{onClick:()=>c("membership"),className:`
                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                    ${l==="membership"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:[s.jsx(Ur,{className:"inline-block mr-2 h-4 w-4"}),"Membership History"]}),s.jsxs("button",{onClick:()=>c("grace-period"),className:`
                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                    ${l==="grace-period"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:[s.jsx(Yn,{className:"inline-block mr-2 h-4 w-4"}),"Grace Period Access"]})]})}),s.jsx("div",{className:"mt-6",children:h?s.jsx("div",{className:"text-center py-8",children:s.jsx(al,{className:"h-6 w-6 animate-spin mx-auto text-gray-400"})}):s.jsxs(s.Fragment,{children:[l==="check-ins"&&s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:"#"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:U,children:s.jsxs("div",{className:"flex items-center",children:["Time",s.jsx(K1,{className:"ml-2 h-3 w-3 text-gray-400"})]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cashier"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:"No check-in history found."})}):S.map((E,q)=>{var X,J;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:(w-1)*lo+q+1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(E.check_in_time),"dd MMM yyyy (EEE), hh:mm a")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((X=E.user)==null?void 0:X.name)||((J=E.user)==null?void 0:J.email)||"N/A"})]},E.id)})})]}),W>1&&s.jsxs("div",{className:"flex justify-between items-center pt-4 text-sm",children:[s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>T(w-1),disabled:w===1,children:[s.jsx(qe,{className:"h-4 w-4 mr-1"})," Previous"]}),s.jsxs("span",{children:["Page ",w," of ",W]}),s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>T(w+1),disabled:w===W,children:["Next ",s.jsx(Ge,{className:"h-4 w-4 ml-1"})]})]})]}),l==="payments"&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No payments found"})}):p.map(E=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(E.created_at),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:E.type}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["RM ",E.amount.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:E.payment_method.replace("_"," ")})]},E.id))})]})}),l==="membership"&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Previous Expiry"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"New Expiry"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No membership history found"})}):x.map(E=>{var q,X;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(E.created_at),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:E.type}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E.previous_expiry_date?H(new Date(E.previous_expiry_date),"dd MMM yyyy"):"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E.new_expiry_date?H(new Date(E.new_expiry_date),"dd MMM yyyy"):"-"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["RM ",((q=E.payment)==null?void 0:q.amount.toFixed(2))||"0.00"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:((X=E.payment)==null?void 0:X.payment_method.replace("_"," "))||"-"})]},E.id)})})]})}),l==="grace-period"&&s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grace Period Days"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processed By"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No grace period access records found"})}):D.map(E=>{var q,X;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(E.check_in_time),"dd MMM yyyy HH:mm")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(E.expiry_date),"dd MMM yyyy")}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[E.grace_period_days," days"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((q=E.user)==null?void 0:q.name)||((X=E.user)==null?void 0:X.email)||"System"})]},E.id)})})]}),z>1&&s.jsxs("div",{className:"flex justify-between items-center pt-4 text-sm",children:[s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>$(N-1),disabled:N===1,children:[s.jsx(qe,{className:"h-4 w-4 mr-1"})," Previous"]}),s.jsxs("span",{children:["Page ",N," of ",z]}),s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>$(N+1),disabled:N===z,children:["Next ",s.jsx(Ge,{className:"h-4 w-4 ml-1"})]})]})]})]})})]})]})})]}):s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Member not found"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The member you're looking for doesn't exist or has been removed."}),s.jsx("div",{className:"mt-6",children:s.jsxs(M,{onClick:()=>t("/members"),children:[s.jsx(Tr,{className:"mr-2 h-4 w-4"}),"Back to Members"]})})]})})}function kv({photoUrl:e,onPhotoSelect:t}){const[r,n]=m.useState(!1),[a,i]=m.useState(null),[o,l]=m.useState(!1),[c,d]=m.useState(null),u=m.useRef(null),p=m.useRef(null);m.useEffect(()=>()=>{b()},[]),m.useEffect(()=>{r&&u.current&&!a&&y()},[r]);const y=async()=>{try{d(null),l(!1);const g=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});if(!u.current)throw new Error("Video element not found");u.current.srcObject=g,i(g),await new Promise(h=>{u.current&&(u.current.onloadedmetadata=()=>h(!0))}),await u.current.play(),l(!0)}catch(g){console.error("Error accessing camera:",g),d(g instanceof Error?g.message:"Unable to access camera"),b()}},x=()=>{n(!0)},b=()=>{a&&a.getTracks().forEach(g=>g.stop()),u.current&&(u.current.srcObject=null),i(null),n(!1),l(!1),d(null)},f=()=>{if(!u.current||!p.current||!o){d("Camera not ready");return}try{const g=u.current,h=p.current;h.width=g.videoWidth,h.height=g.videoHeight;const v=h.getContext("2d");if(!v)throw new Error("Could not get canvas context");v.drawImage(g,0,0,h.width,h.height),h.toBlob(w=>{if(w){const j=new File([w],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});t(j),b()}else throw new Error("Failed to create image file")},"image/jpeg",.8)}catch(g){console.error("Error capturing photo:",g),d(g instanceof Error?g.message:"Failed to capture photo")}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-32 h-32 relative rounded-lg overflow-hidden bg-gray-100",children:e?s.jsx("img",{src:e,alt:"Member preview",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:s.jsx(tu,{className:"h-8 w-8"})})}),s.jsxs("div",{className:"mt-4 flex space-x-2",children:[s.jsxs(M,{type:"button",variant:"outline",onClick:()=>{var g;return(g=document.getElementById("photo-upload"))==null?void 0:g.click()},children:[s.jsx(tu,{className:"mr-2 h-4 w-4"}),"Upload"]}),s.jsxs(M,{type:"button",variant:"outline",onClick:x,children:[s.jsx(Z1,{className:"mr-2 h-4 w-4"}),"Camera"]}),s.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",className:"hidden",onChange:g=>{var v;const h=(v=g.target.files)==null?void 0:v[0];h&&t(h)}})]})]}),r&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Take Photo"}),s.jsx(M,{variant:"ghost",size:"sm",onClick:b,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-black",children:[!o&&!c&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}),c&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("p",{className:"text-white text-center px-4",children:c})}),s.jsx("video",{ref:u,autoPlay:!0,playsInline:!0,className:`w-full h-full object-cover transition-opacity duration-300 ${o?"opacity-100":"opacity-0"}`}),s.jsx("canvas",{ref:p,className:"hidden"})]}),s.jsxs("div",{className:"mt-4 flex justify-center space-x-4",children:[s.jsx(M,{type:"button",onClick:f,className:"w-32",disabled:!o||!!c,children:"Capture"}),s.jsx(M,{type:"button",variant:"outline",onClick:b,className:"w-32",children:"Cancel"})]})]})]})})]})}function xM(){const e=Be(),[t,r]=m.useState(!0),[n,a]=m.useState(!1),[i,o]=m.useState([]),[l,c]=m.useState(null),[d,u]=m.useState({name:"",email:"",phone:"",nric:"",type:"adult",photo:null,planId:"",paymentMethod:"cash",memberId:""}),[p,y]=m.useState(""),[x,b]=m.useState("");m.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:_,error:k}=await I.from("membership_plans").select("*").eq("active",!0).order("type").order("months");if(k)throw k;o(_)}catch{B.error("Error fetching membership plans")}finally{r(!1)}},g=async _=>{if(!_)return b(""),!0;if(!/^\d+$/.test(_))return b("Member ID must be numeric"),!1;try{const{count:k}=await I.from("members").select("*",{count:"exact",head:!0}).eq("member_id",_);return k&&k>0?(b("Member ID already exists"),!1):(b(""),!0)}catch(k){return console.error("Error validating member ID:",k),b("Error validating member ID"),!1}},h=async _=>{u(k=>({...k,memberId:_})),await g(_)},v=async _=>{try{const k=await Yl(_),C=new File([k],_.name,{type:"image/jpeg",lastModified:Date.now()});u({...d,photo:C});const R=new FileReader;R.onloadend=()=>{y(R.result)},R.readAsDataURL(C)}catch{B.error("Error processing image")}},w=_=>{const k=i.find(C=>C.id===_);c(k||null),u({...d,planId:_})},j=async _=>{if(_.preventDefault(),!l){B.error("Please select a membership plan");return}if(x){B.error("Please fix the Member ID error");return}a(!0);try{let k="";if(d.photo){const S=`members/${`${Date.now()}.jpg`}`,{error:z}=await I.storage.from("media").upload(S,d.photo);if(z)throw z;const{data:{publicUrl:D}}=I.storage.from("media").getPublicUrl(S);k=D}const C=l.months+l.free_months,R=Ay(new Date,C),P={name:d.name,email:d.email,phone:d.phone,nric:d.nric,type:d.type,status:"active",photo_url:k,expiry_date:R.toISOString()};d.memberId&&(P.member_id=d.memberId);const{data:O,error:A}=await I.from("members").insert(P).select().single();if(A)throw A;const{error:V}=await I.from("payments").insert({member_id:O.id,amount:l.price+l.registration_fee,type:"registration",payment_method:d.paymentMethod});if(V)throw V;B.success("Member registered successfully"),e(`/members/${O.id}`)}catch(k){console.error("Error:",k),B.error("Error registering member")}finally{a(!1)}},N=i.filter(_=>_.type===d.type);return s.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(M,{variant:"ghost",onClick:()=>e("/members"),children:[s.jsx(Tr,{className:"mr-2 h-4 w-4"}),"Back to Members"]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Register New Member"})}),s.jsxs("form",{onSubmit:j,className:"space-y-6",children:[s.jsx(kv,{photoUrl:p,onPhotoSelect:v}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"memberId",className:"block text-sm font-medium text-gray-700",children:"Member ID (Optional)"}),s.jsx(re,{id:"memberId",value:d.memberId,onChange:_=>h(_.target.value),placeholder:"Leave blank for auto-generated ID",className:x?"border-red-500":""}),x&&s.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(AlertTriangle,{className:"h-4 w-4 mr-1"}),x]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),s.jsx(re,{id:"name",required:!0,value:d.name,onChange:_=>u({...d,name:_.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nric",className:"block text-sm font-medium text-gray-700",children:"NRIC"}),s.jsx(re,{id:"nric",required:!0,value:d.nric,onChange:_=>u({...d,nric:_.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),s.jsx(re,{id:"phone",type:"tel",required:!0,value:d.phone,onChange:_=>u({...d,phone:_.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx(re,{id:"email",type:"email",value:d.email,onChange:_=>u({...d,email:_.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"membershipType",className:"block text-sm font-medium text-gray-700",children:"Membership Type"}),s.jsxs("select",{id:"membershipType",value:d.type,onChange:_=>u({...d,type:_.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[s.jsx("option",{value:"adult",children:"Adult"}),s.jsx("option",{value:"youth",children:"Youth"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Select Membership Plan"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:N.map(_=>s.jsxs("label",{className:`
                      relative flex flex-col p-4 border rounded-lg cursor-pointer
                      ${d.planId===_.id?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                    `,children:[s.jsx("input",{type:"radio",name:"plan",value:_.id,checked:d.planId===_.id,onChange:k=>w(k.target.value),className:"sr-only"}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[_.months," ",_.months===1?"Month":"Months"]}),s.jsxs("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:["RM ",_.price.toFixed(2)]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["+ RM ",_.registration_fee.toFixed(2)," registration"]})]}),_.free_months>0&&s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.jsx(bh,{className:"mr-1 h-3 w-3"}),"+",_.free_months," Free"]})]}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[_.months+_.free_months," months total"]})]},_.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Payment Method"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("label",{className:`
                  relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                  ${d.paymentMethod==="cash"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:d.paymentMethod==="cash",onChange:_=>u({...d,paymentMethod:_.target.value}),className:"sr-only"}),s.jsx(Cn,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Cash"})]}),s.jsxs("label",{className:`
                  relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                  ${d.paymentMethod==="qr"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"qr",checked:d.paymentMethod==="qr",onChange:_=>u({...d,paymentMethod:_.target.value}),className:"sr-only"}),s.jsx(Rr,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"QR Payment"})]}),s.jsxs("label",{className:`
                  relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                  ${d.paymentMethod==="bank_transfer"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank_transfer",checked:d.paymentMethod==="bank_transfer",onChange:_=>u({...d,paymentMethod:_.target.value}),className:"sr-only"}),s.jsx(rs,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Bank Transfer"})]})]})]}),l&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsx("span",{children:"Plan Price"}),s.jsxs("span",{children:["RM ",l.price.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-1",children:[s.jsx("span",{children:"Registration Fee"}),s.jsxs("span",{children:["RM ",l.registration_fee.toFixed(2)]})]}),l.free_months>0&&s.jsxs("div",{className:"flex items-center justify-between text-sm text-green-600 mt-1",children:[s.jsx("span",{children:"Free Months"}),s.jsxs("span",{children:["+",l.free_months," months"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-lg font-bold text-gray-900 mt-2 pt-2 border-t",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["RM ",(l.price+l.registration_fee).toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>e("/members"),children:"Cancel"}),s.jsx(M,{type:"submit",disabled:n||!!x||!l,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Registering..."]}):"Register Member"})]})]})]})})]})}function gM(){const{id:e}=la(),t=Be(),r=Fe(k=>k.user),n=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="superadmin",[a,i]=m.useState(!0),[o,l]=m.useState(!1),[c,d]=m.useState(null),[u,p]=m.useState({name:"",email:"",phone:"",nric:"",expiry_date:"",member_id:"",type:"adult"}),[y,x]=m.useState(null),[b,f]=m.useState(""),[g,h]=m.useState("");m.useEffect(()=>{v()},[e]),m.useEffect(()=>{c&&(p({name:c.name,email:c.email||"",phone:c.phone||"",nric:c.nric,expiry_date:H(new Date(c.expiry_date),"yyyy-MM-dd"),member_id:c.member_id,type:c.type}),c.photo_url&&f(c.photo_url))},[c]);const v=async()=>{try{const{data:k,error:C}=await I.from("members").select("*").eq("id",e).single();if(C)throw C;d(k)}catch{B.error("Error fetching member details"),t("/members")}finally{i(!1)}},w=async k=>{if(!k)return h("Member ID is required"),!1;if(!/^\d+$/.test(k))return h("Member ID must be numeric"),!1;try{const{count:C}=await I.from("members").select("*",{count:"exact",head:!0}).eq("member_id",k).neq("id",c==null?void 0:c.id);return C&&C>0?(h("Member ID already exists"),!1):(h(""),!0)}catch(C){return console.error("Error validating member ID:",C),h("Error validating member ID"),!1}},j=async k=>{p(C=>({...C,member_id:k})),await w(k)},N=async k=>{try{const C=await Yl(k),R=new File([C],k.name,{type:"image/jpeg",lastModified:Date.now()});x(R);const P=new FileReader;P.onloadend=()=>{f(P.result)},P.readAsDataURL(R)}catch{B.error("Error processing image")}},_=async k=>{if(k.preventDefault(),!(n&&u.member_id&&!await w(u.member_id))){l(!0);try{let C=(c==null?void 0:c.photo_url)||"";if(y){const V=`members/${`${Date.now()}.jpg`}`,{error:Q}=await I.storage.from("media").upload(V,y);if(Q)throw Q;const{data:{publicUrl:W}}=I.storage.from("media").getPublicUrl(V);C=W}const R={name:u.name,email:u.email,phone:u.phone,nric:u.nric,photo_url:C};if(n){R.expiry_date=new Date(u.expiry_date).toISOString(),R.member_id=u.member_id,R.type=u.type;const O=new Date;new Date(u.expiry_date)>O&&(R.status="active")}const{error:P}=await I.from("members").update(R).eq("id",c.id);if(P)throw P;B.success("Member updated successfully"),t(`/members/${c.id}`)}catch{B.error("Error updating member")}finally{l(!1)}}};return a?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):c?s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(M,{variant:"ghost",onClick:()=>t(`/members/${c.id}`),children:[s.jsx(Tr,{className:"mr-2 h-4 w-4"}),"Back to Member"]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Edit Member"}),s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsx(kv,{photoUrl:b,onPhotoSelect:N}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Member ID"}),n?s.jsxs("div",{children:[s.jsx(re,{value:u.member_id,onChange:k=>j(k.target.value),className:g?"border-red-500":""}),g&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:g})]}):s.jsx("div",{className:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-gray-500",children:c.member_id})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),s.jsx(re,{id:"name",required:!0,value:u.name,onChange:k=>p({...u,name:k.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nric",className:"block text-sm font-medium text-gray-700",children:"NRIC"}),s.jsx(re,{id:"nric",required:!0,value:u.nric,onChange:k=>p({...u,nric:k.target.value}),placeholder:"YYMMDD-PB-####"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),s.jsx(re,{id:"phone",type:"tel",required:!0,value:u.phone,onChange:k=>p({...u,phone:k.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx(re,{id:"email",type:"email",value:u.email,onChange:k=>p({...u,email:k.target.value})})]}),n?s.jsxs("div",{children:[s.jsx("label",{htmlFor:"expiry_date",className:"block text-sm font-medium text-gray-700",children:"Expiry Date"}),s.jsx(re,{id:"expiry_date",type:"date",required:!0,value:u.expiry_date,onChange:k=>p({...u,expiry_date:k.target.value})})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expiry Date"}),s.jsx("div",{className:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-gray-500",children:H(new Date(c.expiry_date),"dd MMM yyyy")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Membership Type"}),n?s.jsxs("select",{value:u.type,onChange:k=>p({...u,type:k.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[s.jsx("option",{value:"adult",children:"Adult"}),s.jsx("option",{value:"youth",children:"Youth"})]}):s.jsx("div",{className:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-gray-500 capitalize",children:c.type})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>t(`/members/${c.id}`),children:"Cancel"}),s.jsx(M,{type:"submit",disabled:o||n&&!!g,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})]}):s.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:s.jsx("div",{className:"flex",children:s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-yellow-700",children:"Member not found"})})})})})}function yM({isOpen:e,onClose:t,onConfirm:r,memberName:n}){return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Check In Member"}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["Would you like to check in ",s.jsx("span",{className:"font-medium",children:n})," now?"]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(M,{variant:"outline",onClick:t,children:"No, Skip"}),s.jsxs(M,{onClick:r,children:[s.jsx(Qs,{className:"mr-2 h-4 w-4"}),"Yes, Check In"]})]})]})})}):null}function vM(){const{id:e}=la(),t=Be(),r=Fe(W=>W.user),[n,a]=m.useState(!0),[i,o]=m.useState(!1),[l,c]=m.useState(null),[d,u]=m.useState([]),[p,y]=m.useState(null),[x,b]=m.useState({planId:"",paymentMethod:"cash"}),[f,g]=m.useState(null),[h,v]=m.useState(!1),[w,j]=m.useState(!1),[N,_]=m.useState(!1);m.useEffect(()=>{k(),R()},[]),m.useEffect(()=>{l&&C()},[l]),m.useEffect(()=>{l&&p&&P()},[l,p,h]);const k=async()=>{try{const{data:W,error:S}=await I.from("members").select("*").eq("id",e).single();if(S)throw S;c(W)}catch{B.error("Error fetching member details"),t("/members")}finally{a(!1)}},C=async()=>{if(l)try{const{data:W,error:S}=await I.from("grace_period_access").select("*").eq("member_id",l.id).gt("check_in_time",l.expiry_date).limit(1);if(S)throw S;v(W&&W.length>0)}catch(W){console.error("Error checking grace period access:",W),v(!1)}},R=async()=>{try{const{data:W,error:S}=await I.from("membership_plans").select("*").eq("active",!0).order("months");if(S)throw S;u(W)}catch{B.error("Error fetching membership plans")}},P=()=>{if(!l||!p)return;const W=p.months+(p.free_months||0);let S;l.status==="expired"?h?S=new Date(l.expiry_date):S=new Date:S=new Date(l.expiry_date);const z=Ay(S,W);g(z)},O=async W=>{if(W.preventDefault(),!(!p||!f||!l)){o(!0);try{const{error:S}=await I.from("membership_history").insert({member_id:l.id,previous_expiry_date:l.expiry_date,new_expiry_date:f.toISOString(),type:"renewal",plan_details:{months:p.months,price:p.price,free_months:p.free_months}});if(S)throw S;const{error:z}=await I.from("members").update({status:"active",expiry_date:f.toISOString()}).eq("id",l.id);if(z)throw z;const{error:D}=await I.from("payments").insert({member_id:l.id,amount:p.price,type:"renewal",payment_method:x.paymentMethod,user_id:r==null?void 0:r.id});if(D)throw D;B.success("Membership renewed successfully"),j(!0)}catch(S){console.error("Error renewing membership:",S),B.error("Error renewing membership"),t(`/members/${l.id}`)}finally{o(!1)}}},A=async()=>{if(!(!l||N)){_(!0);try{const{error:W}=await I.from("check_ins").insert({member_id:l.id,type:"member",name:l.name,phone:"",user_id:r==null?void 0:r.id});if(W)throw W;B.success("Check-in successful"),t(`/members/${l.id}`)}catch(W){console.error("Check-in error:",W),B.error("Error checking in member"),t(`/members/${l.id}`)}}},V=W=>{const S=d.find(z=>z.id===W);y(S||null),b({...x,planId:W})};if(n)return s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})});if(!l)return s.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:s.jsx("div",{className:"flex",children:s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-yellow-700",children:"Member not found"})})})})});const Q=d.filter(W=>W.type===l.type);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(M,{variant:"ghost",onClick:()=>t(`/members/${l.id}`),children:[s.jsx(Tr,{className:"mr-2 h-4 w-4"}),"Back to Member"]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Renew Membership"}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:l.photo_url||"https://via.placeholder.com/100",alt:l.name,className:"h-16 w-16 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:l.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Expires: ",H(new Date(l.expiry_date),"dd MMM yyyy")]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",s.jsx("span",{className:"capitalize",children:l.status})]})]})]})}),s.jsxs("form",{onSubmit:O,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Select Membership Plan"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Q.map(W=>s.jsxs("label",{className:`
                        relative flex flex-col p-4 border rounded-lg cursor-pointer
                        ${x.planId===W.id?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                      `,children:[s.jsx("input",{type:"radio",name:"plan",value:W.id,checked:x.planId===W.id,onChange:S=>V(S.target.value),className:"sr-only"}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[W.months," ",W.months===1?"Month":"Months"]}),s.jsxs("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:["RM ",W.price.toFixed(2)]})]}),W.free_months>0&&s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.jsx(bh,{className:"mr-1 h-3 w-3"}),"+",W.free_months," Free"]})]}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[W.months+W.free_months," months total"]})]},W.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Payment Method"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("label",{className:`
                    relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                    ${x.paymentMethod==="cash"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                  `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:x.paymentMethod==="cash",onChange:W=>b({...x,paymentMethod:W.target.value}),className:"sr-only"}),s.jsx(Cn,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Cash"})]}),s.jsxs("label",{className:`
                    relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                    ${x.paymentMethod==="qr"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                  `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"qr",checked:x.paymentMethod==="qr",onChange:W=>b({...x,paymentMethod:W.target.value}),className:"sr-only"}),s.jsx(Rr,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"QR Payment"})]}),s.jsxs("label",{className:`
                    relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                    ${x.paymentMethod==="bank_transfer"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                  `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank_transfer",checked:x.paymentMethod==="bank_transfer",onChange:W=>b({...x,paymentMethod:W.target.value}),className:"sr-only"}),s.jsx(rs,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Bank Transfer"})]})]})]}),p&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsx("span",{children:"Plan Price"}),s.jsxs("span",{children:["RM ",p.price.toFixed(2)]})]}),s.jsx("div",{className:"mt-2 text-sm text-gray-500",children:l.status==="expired"?h?s.jsxs("p",{children:["New expiry date will be calculated from previous expiry date (",H(new Date(l.expiry_date),"dd MMM yyyy"),") since member checked in during grace period."]}):s.jsx("p",{children:"New expiry date will be calculated from today since member did not check in during grace period."}):s.jsxs("p",{children:["New expiry date will be calculated from current expiry date (",H(new Date(l.expiry_date),"dd MMM yyyy"),")."]})}),f&&s.jsxs("div",{className:"mt-2 pt-2 border-t",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"New expiry date will be:"}),s.jsx("p",{className:"text-lg font-bold text-orange-600",children:H(f,"dd MMM yyyy")})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>t(`/members/${l.id}`),children:"Cancel"}),s.jsx(M,{type:"submit",disabled:i||!p,children:i?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Pay & Renew"})]})]})]})})]}),s.jsx(yM,{isOpen:w,onClose:()=>{j(!1),t(`/members/${l.id}`)},onConfirm:A,memberName:l.name})]})}function wM({isOpen:e,onClose:t,history:r,loading:n,currentPage:a,totalPages:i,totalCount:o,onPageChange:l,onDateChange:c,selectedDate:d,sortField:u,sortOrder:p,onSort:y,onSearch:x}){if(m.useEffect(()=>{e||x("")},[e,x]),!e)return null;const b=f=>{const g=f.target.value;l(1),x(g)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Walk-in History"}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center justify-between",children:[c&&d&&s.jsxs("div",{className:"flex space-x-4 items-center",children:[s.jsx(M,{variant:"outline",size:"sm",onClick:()=>{const f=new Date(d);f.setDate(f.getDate()-1),c(H(f,"yyyy-MM-dd"))},children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsxs("div",{className:"relative",children:[s.jsx(Ur,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{type:"date",value:d,onChange:f=>c(f.target.value),className:"pl-10"})]}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>{const f=new Date(d);f.setDate(f.getDate()+1),c(H(f,"yyyy-MM-dd"))},children:s.jsx(Ge,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"relative w-full md:w-64",children:[s.jsx(xr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{type:"text",placeholder:"Search by name...",onChange:b,className:"pl-10"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),s.jsxs("th",{scope:"col",className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${y?"cursor-pointer":""}`,onClick:()=>y&&y("check_in_time"),children:["Date & Time ",u==="check_in_time"?p==="asc"?"":"":y?"":""]}),s.jsxs("th",{scope:"col",className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${y?"cursor-pointer":""}`,onClick:()=>y&&y("name"),children:["Name ",u==="name"?p==="asc"?"":"":y?"":""]}),s.jsxs("th",{scope:"col",className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${y?"cursor-pointer":""}`,onClick:()=>y&&y("amount"),children:["Amount ",u==="amount"?p==="asc"?"":"":y?"":""]}),s.jsxs("th",{scope:"col",className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${y?"cursor-pointer":""}`,onClick:()=>y&&y("payment_method"),children:["Payment Method ",u==="payment_method"?p==="asc"?"":"":y?"":""]}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cashier"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})})}):r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:o>0?"No results match current filters":"No records found"})}):r.map((f,g)=>{var h,v;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(a-1)*10+g+1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(f.check_in_time),"dd MMM yyyy HH:mm")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:f.name}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",f.amount.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:f.payment_method.replace("_"," ")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((h=f.user)==null?void 0:h.name)||((v=f.user)==null?void 0:v.email)||"System"})]},f.id)})})]})}),i>1&&o>0&&s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx(M,{onClick:()=>l(a-1),disabled:a===1,variant:"outline",children:"Previous"}),s.jsx(M,{onClick:()=>l(a+1),disabled:a===i,variant:"outline",children:"Next"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",(a-1)*10+1," to ",Math.min(a*10,o)," of"," ",s.jsx("span",{className:"font-medium",children:o})," results"]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(a-1),disabled:a<=1,children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsx("select",{value:a,onChange:f=>l(Number(f.target.value)),className:"block w-full rounded-md border-gray-300 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6","aria-label":"Select page",children:Array.from({length:i},(f,g)=>g+1).map(f=>s.jsxs("option",{value:f,children:["Page ",f," of ",i]},f))}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(a+1),disabled:a>=i,children:s.jsx(Ge,{className:"h-4 w-4"})})]})]})]})]})]})})}function bM(){var T;const e=pr(),t=Fe($=>$.user),[r,n]=m.useState(!1),[a,i]=m.useState({adult_walkin_price:0,youth_walkin_price:0}),[o,l]=m.useState({name:((T=e.state)==null?void 0:T.name)||"",type:"adult",paymentMethod:"cash"}),[c,d]=m.useState(!1),[u,p]=m.useState([]),[y,x]=m.useState(!1),[b,f]=m.useState(1),[g,h]=m.useState(1),[v,w]=m.useState(H(new Date,"yyyy-MM-dd")),[j,N]=m.useState("check_in_time"),[_,k]=m.useState("desc"),[C,R]=m.useState(""),[P,O]=m.useState(0),A=10,V=m.useCallback(async($,U,E,q,X)=>{x(!0),p([]);try{const J=new Date(U+"T00:00:00Z");if(isNaN(J.getTime()))throw new Error("Invalid date format");const L=new Date(Date.UTC(J.getUTCFullYear(),J.getUTCMonth(),J.getUTCDate(),0,0,0,0)),F=new Date(Date.UTC(J.getUTCFullYear(),J.getUTCMonth(),J.getUTCDate(),23,59,59,999)),G=L.toISOString(),Z=F.toISOString(),ee=(E-1)*A,ne=($==null?void 0:$.trim())||null,te={search_term:ne,start_date:ne?null:G,end_date:ne?null:Z,filter_type:"walk-in"},{data:Y,error:ie}=await I.rpc("count_check_ins",te);if(ie)throw ie;const le=Y||0;if(O(le),h(Math.ceil(le/A)),le===0){x(!1);return}const he={search_term:ne,start_date:ne?null:G,end_date:ne?null:Z,page_limit:A,page_offset:ee,filter_type:"walk-in"},{data:fe,error:ce}=await I.rpc("search_check_ins",he);if(ce)throw ce;const De=fe||[],Ie=De.map(we=>we.user_id).filter(we=>we!==null),ae=[...new Set(Ie)],Qe=new Map;if(ae.length>0){const{data:we,error:Ke}=await I.from("users").select("id, email, name").in("id",ae);Ke?console.error("Error fetching user details:",Ke):we&&we.forEach(be=>Qe.set(be.id,{email:be.email,name:be.name}))}const It=De.map(we=>we.id);let He=new Map;if(It.length>0){const{data:we,error:Ke}=await I.from("payments").select("amount, payment_method, check_in_id").eq("type","walk-in").in("check_in_id",It);if(Ke)throw Ke;we.forEach(be=>He.set(be.check_in_id,{amount:be.amount,payment_method:be.payment_method}))}const Pn=De.map(we=>{const Ke=we.user_id?Qe.get(we.user_id):void 0,be=He.get(we.id);return{id:we.id,name:we.name||"N/A",check_in_time:we.check_in_time,amount:(be==null?void 0:be.amount)||0,payment_method:(be==null?void 0:be.payment_method)||"N/A",user:Ke}});Pn.sort((we,Ke)=>{if(q==="check_in_time"){const be=new Date(we.check_in_time).getTime(),Ti=new Date(Ke.check_in_time).getTime();return X==="asc"?be-Ti:Ti-be}if(q==="name"){const be=we.name.localeCompare(Ke.name);return X==="asc"?be:-be}if(q==="amount")return X==="asc"?we.amount-Ke.amount:Ke.amount-we.amount;if(q==="payment_method"){const be=we.payment_method.localeCompare(Ke.payment_method);return X==="asc"?be:-be}return 0}),p(Pn)}catch(J){console.error("Error fetching walk-in history:",J),B.error("Error loading walk-in history"),p([]),h(1),O(0)}finally{x(!1)}},[x,p,h,O,I]),Q=m.useCallback($=>{R($),f(1),V($,v,1,j,_)},[R,f,V,v,j,_]),W=m.useCallback($=>{const U=j===$&&_==="asc"?"desc":"asc";N($),k(U),f(1)},[j,_]),S=m.useCallback($=>{w($),f(1)},[]);m.useEffect(()=>{z()},[]),m.useEffect(()=>{c&&V(C,v,b,j,_)},[c,b,v,j,_,C,V]);const z=async()=>{try{const{data:$,error:U}=await I.from("settings").select("value").eq("key","membership").single();if(U)throw U;i({adult_walkin_price:$.value.adult_walkin_price||0,youth_walkin_price:$.value.youth_walkin_price||0})}catch($){console.error("Error fetching settings:",$),B.error("Error loading walk-in fees")}},D=async $=>{$.preventDefault(),n(!0);try{const U=Ee(new Date).toISOString();console.log("Creating check-in record:",{type:"walk-in",name:o.name,phone:"",user_id:t==null?void 0:t.id,check_in_time:U});const{data:E,error:q}=await I.from("check_ins").insert({type:"walk-in",name:o.name,phone:"",user_id:t==null?void 0:t.id,check_in_time:U}).select().single();if(q)throw console.error("Error creating check-in record:",q),q;console.log("Check-in record created successfully:",E);const X=o.type==="adult"?a.adult_walkin_price:a.youth_walkin_price;console.log("Creating payment record:",{amount:X,type:"walk-in",payment_method:o.paymentMethod,check_in_id:E.id,user_id:t==null?void 0:t.id,created_at:U});const{error:J}=await I.from("payments").insert({amount:X,type:"walk-in",payment_method:o.paymentMethod,check_in_id:E.id,user_id:t==null?void 0:t.id,created_at:U});if(J)throw console.error("Error creating payment record:",J),J;console.log("Payment record created successfully"),B.success("Walk-in registered successfully"),l({name:"",type:"adult",paymentMethod:"cash"}),c&&V(C,v,b,j,_)}catch(U){console.error("Error in handleSubmit:",U),B.error("Error registering walk-in")}finally{n(!1)}};return s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Walk-in Registration"}),s.jsxs(M,{variant:"outline",onClick:()=>d(!0),children:[s.jsx(Qn,{className:"mr-2 h-4 w-4"}),"View History"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"p-6 sm:p-8",children:s.jsxs("form",{onSubmit:D,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),s.jsx(re,{id:"name",required:!0,value:o.name,onChange:$=>l({...o,name:$.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Walk-in Type"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("label",{className:`
                  relative flex items-center justify-center p-4 border rounded-lg cursor-pointer
                  ${o.type==="adult"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                `,children:[s.jsx("input",{type:"radio",name:"type",value:"adult",checked:o.type==="adult",onChange:$=>l({...o,type:$.target.value}),className:"sr-only"}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"block text-sm font-medium",children:"Adult"}),s.jsxs("span",{className:"block text-lg font-bold text-orange-600 mt-1",children:["RM ",a.adult_walkin_price.toFixed(2)]})]})]}),s.jsxs("label",{className:`
                  relative flex items-center justify-center p-4 border rounded-lg cursor-pointer
                  ${o.type==="youth"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                `,children:[s.jsx("input",{type:"radio",name:"type",value:"youth",checked:o.type==="youth",onChange:$=>l({...o,type:$.target.value}),className:"sr-only"}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"block text-sm font-medium",children:"Youth"}),s.jsxs("span",{className:"block text-lg font-bold text-orange-600 mt-1",children:["RM ",a.youth_walkin_price.toFixed(2)]})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Payment Method"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("label",{className:`
                  relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                  ${o.paymentMethod==="cash"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:o.paymentMethod==="cash",onChange:$=>l({...o,paymentMethod:$.target.value}),className:"sr-only"}),s.jsx(Cn,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Cash"})]}),s.jsxs("label",{className:`
                  relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                  ${o.paymentMethod==="qr"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"qr",checked:o.paymentMethod==="qr",onChange:$=>l({...o,paymentMethod:$.target.value}),className:"sr-only"}),s.jsx(Rr,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"QR Payment"})]}),s.jsxs("label",{className:`
                  relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                  ${o.paymentMethod==="bank_transfer"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank_transfer",checked:o.paymentMethod==="bank_transfer",onChange:$=>l({...o,paymentMethod:$.target.value}),className:"sr-only"}),s.jsx(rs,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Bank Transfer"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Walk-in Fee:"}),s.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["RM ",(o.type==="adult"?a.adult_walkin_price:a.youth_walkin_price).toFixed(2)]})]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o.type==="adult"?"Adult Rate":"Youth Rate"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(M,{type:"submit",disabled:r,className:"w-full sm:w-auto",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Register Walk-in"})})]})})}),s.jsx(wM,{isOpen:c,onClose:()=>{d(!1),R("")},history:u,loading:y,currentPage:b,totalPages:g,totalCount:P,onPageChange:f,onDateChange:S,selectedDate:v,sortField:j,sortOrder:_,onSort:W,onSearch:Q})]})}function jM({products:e,loading:t,searchQuery:r,onSearchChange:n,onAddToCart:a}){const i=e.filter(l=>{var c;return l.name.toLowerCase().includes(r.toLowerCase())||((c=l.description)==null?void 0:c.toLowerCase().includes(r.toLowerCase()))}),o=l=>l.stock<=0?"border-red-300 bg-red-50 opacity-75":l.stock<5?"border-yellow-300 bg-yellow-50":"hover:border-orange-500";return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx(re,{type:"text",placeholder:"Search products...",value:r,onChange:l=>n(l.target.value),className:"w-full"})}),t?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:[i.map(l=>s.jsxs("button",{onClick:()=>a(l),disabled:l.stock<=0,className:`
                text-left p-3 sm:p-4 rounded-lg border hover:shadow-md transition-shadow
                ${o(l)}
              `,children:[s.jsx("div",{className:"aspect-square mb-3 sm:mb-4 rounded-md overflow-hidden bg-gray-100",children:s.jsx("img",{src:l.photo_url||"https://via.placeholder.com/200",alt:l.name,className:"w-full h-full object-cover"})}),s.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base line-clamp-2",children:l.name}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mb-2 line-clamp-2",children:l.description}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm sm:text-lg font-bold text-orange-600",children:["RM ",l.price.toFixed(2)]}),s.jsxs("span",{className:`text-xs sm:text-sm ${l.stock<=0?"text-red-600 font-bold":l.stock<5?"text-yellow-600":"text-gray-500"}`,children:["Stock: ",l.stock,l.stock<=0&&" (Out of stock)",l.stock>0&&l.stock<5&&" (Low)"]})]})]},l.id)),i.length===0&&s.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"No products found matching your search"})]})]})}function NM({cart:e,processingPayment:t,onUpdateQuantity:r,onRemoveFromCart:n,onPayment:a}){const i=()=>e.reduce((l,c)=>l+c.price*c.quantity,0),o=e.some(l=>l.quantity>l.stock);return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 sticky top-20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Shopping Cart"}),s.jsx(xi,{className:"h-5 w-5 text-gray-500"})]}),e.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Cart is empty"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-4 mb-6 max-h-[calc(100vh-20rem)] overflow-y-auto",children:e.map(l=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:l.name}),s.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["RM ",l.price.toFixed(2),"  ",l.quantity]}),l.quantity>l.stock&&s.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[s.jsx(hr,{className:"h-3 w-3 mr-1"}),"Only ",l.stock," available"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(l.id,-1),className:"p-1 sm:p-2",children:s.jsx(ty,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx("span",{className:"w-8 text-center text-sm",children:l.quantity}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(l.id,1),disabled:l.quantity>=l.stock,className:"p-1 sm:p-2",children:s.jsx(ns,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx(M,{variant:"ghost",size:"sm",onClick:()=>n(l.id),className:"text-red-500 hover:text-red-700 p-1 sm:p-2",children:s.jsx(ny,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]},l.id))}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"flex justify-between text-lg font-semibold mb-6",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["RM ",i().toFixed(2)]})]}),o&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(hr,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),s.jsx("p",{children:"Some items have insufficient stock. Please adjust quantities before proceeding."})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[s.jsxs(M,{onClick:()=>a("cash"),disabled:t||o||e.length===0,className:"w-full",children:[t?s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Cash"]}),s.jsxs(M,{onClick:()=>a("qr"),disabled:t||o||e.length===0,variant:"outline",className:"w-full",children:[s.jsx(Rr,{className:"mr-2 h-4 w-4"}),"QR"]}),s.jsxs(M,{onClick:()=>a("bank_transfer"),disabled:t||o||e.length===0,variant:"outline",className:"w-full",children:[s.jsx(rs,{className:"mr-2 h-4 w-4"}),"Bank"]})]})]})]})]})}function _M({loading:e,sales:t,currentPage:r,totalPages:n,onPageChange:a,onDateChange:i,selectedDate:o,sortField:l,sortOrder:c,onSort:d,onExport:u}){const[p,y]=m.useState(""),x=t.filter(g=>{var h;return!!(!p||g.payment_method.toLowerCase().includes(p.toLowerCase())||g.items&&g.items.some(v=>v.product_name.toLowerCase().includes(p.toLowerCase()))||g.user&&((h=g.user.name)!=null&&h.toLowerCase().includes(p.toLowerCase())||g.user.email.toLowerCase().includes(p.toLowerCase())))}),b=()=>{const g=[];let v=Math.max(1,r-Math.floor(2.5)),w=Math.min(n,v+5-1);w-v+1<5&&(v=Math.max(1,w-5+1));for(let j=v;j<=w;j++)g.push(j);return g},f=()=>{if(u){u();return}const g=t.map(h=>{var v,w;return{"Date & Time":H(new Date(h.created_at),"dd MMM yyyy HH:mm"),Amount:`RM ${h.amount.toFixed(2)}`,"Payment Method":h.payment_method.replace("_"," "),Items:h.items?h.items.map(j=>`${j.quantity}x ${j.product_name}`).join(", "):"","Processed By":((v=h.user)==null?void 0:v.name)||((w=h.user)==null?void 0:w.email)||"System"}});Br(g,`sales-${o}.csv`)};return s.jsx("div",{className:"bg-white rounded-lg shadow-md",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sales History"}),s.jsxs(M,{variant:"outline",onClick:f,children:[s.jsx(zr,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),s.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center justify-between",children:[s.jsxs("div",{className:"flex space-x-4 items-center",children:[s.jsx(M,{variant:"outline",size:"sm",onClick:()=>{const g=new Date(o);g.setDate(g.getDate()-1),i(H(g,"yyyy-MM-dd"))},children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsxs("div",{className:"relative",children:[s.jsx(Ur,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{type:"date",value:o,onChange:g=>i(g.target.value),className:"pl-10"})]}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>{const g=new Date(o);g.setDate(g.getDate()+1),i(H(g,"yyyy-MM-dd"))},children:s.jsx(Ge,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"relative w-full md:w-64",children:[s.jsx(xr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(re,{type:"text",placeholder:"Search sales...",value:p,onChange:g=>y(g.target.value),className:"pl-10"})]})]}),e?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>d("created_at"),children:["Date & Time ",l==="created_at"?c==="asc"?"":"":""]}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>d("amount"),children:["Amount ",l==="amount"?c==="asc"?"":"":""]}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>d("payment_method"),children:["Payment Method ",l==="payment_method"?c==="asc"?"":"":""]}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>d("items"),children:["Items ",l==="items"?c==="asc"?"":"":""]}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processed By"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No sales found for the selected date"})}):x.map((g,h)=>{var v,w,j;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(r-1)*15+h+1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(g.created_at),"dd MMM yyyy HH:mm")}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["RM ",g.amount.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:g.payment_method.replace("_"," ")}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:(v=g.items)==null?void 0:v.map((N,_)=>s.jsxs("div",{children:[N.quantity,"x ",N.product_name," (RM ",N.price.toFixed(2),")"]},_))}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((w=g.user)==null?void 0:w.name)||((j=g.user)==null?void 0:j.email)||"System"})]},g.id)})})]})}),n>1&&s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx(M,{onClick:()=>a(r-1),disabled:r===1,variant:"outline",children:"Previous"}),s.jsx(M,{onClick:()=>a(r+1),disabled:r===n,variant:"outline",children:"Next"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",s.jsx("span",{className:"font-medium",children:r})," of"," ",s.jsx("span",{className:"font-medium",children:n})]})}),s.jsx("div",{children:s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[s.jsx(M,{onClick:()=>a(1),disabled:r===1,variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"First"}),s.jsx(M,{onClick:()=>a(r-1),disabled:r===1,variant:"outline",className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:s.jsx(qe,{className:"h-4 w-4"})}),b().map(g=>s.jsx(M,{onClick:()=>a(g),variant:r===g?"default":"outline",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${r===g?"z-10 bg-orange-600 border-orange-600 text-white":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"}`,children:g},g)),s.jsx(M,{onClick:()=>a(r+1),disabled:r===n,variant:"outline",className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:s.jsx(Ge,{className:"h-4 w-4"})}),s.jsx(M,{onClick:()=>a(n),disabled:r===n,variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Last"})]})})]})]})]})})}function kM({isOpen:e,onClose:t,product:r,onUpdate:n,products:a,onSelectProduct:i}){const[o,l]=m.useState(r.stock),[c,d]=m.useState(0),[u,p]=m.useState(""),[y,x]=m.useState(a);m.useEffect(()=>{l(r.stock),d(0)},[r]),m.useEffect(()=>{x(u?a.filter(h=>{var v;return h.name.toLowerCase().includes(u.toLowerCase())||((v=h.description)==null?void 0:v.toLowerCase().includes(u.toLowerCase()))}):a)},[u,a]);const b=h=>{d(h),l(r.stock+h)},f=h=>{l(h),d(h-r.stock)},g=h=>{h.preventDefault(),n(r.id,o)};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Update Stock"}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"p-6 overflow-auto grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"mb-6",children:s.jsx(re,{type:"text",placeholder:"Search products...",value:u,onChange:h=>p(h.target.value),className:"w-full"})}),s.jsxs("div",{className:"h-[400px] overflow-y-auto border rounded-lg",children:[y.map(h=>s.jsxs("button",{onClick:()=>i(h),className:`w-full text-left p-4 border-b hover:bg-gray-50 flex items-center ${h.id===r.id?"bg-orange-50 border-orange-300":""}`,children:[s.jsx("div",{className:"h-12 w-12 flex-shrink-0 mr-4",children:s.jsx("img",{src:h.photo_url||"https://via.placeholder.com/100",alt:h.name,className:"h-full w-full object-cover rounded"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:h.name}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:["RM ",h.price.toFixed(2)]}),s.jsxs("span",{className:`text-sm ${h.stock<0?"text-red-600 font-bold":h.stock===0?"text-yellow-600":"text-gray-500"}`,children:["Stock: ",h.stock]})]})]})]},h.id)),y.length===0&&s.jsx("div",{className:"p-4 text-center text-gray-500",children:"No products found"})]})]}),s.jsx("div",{children:s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("div",{className:"h-16 w-16 flex-shrink-0 mr-4",children:s.jsx("img",{src:r.photo_url||"https://via.placeholder.com/100",alt:r.name,className:"h-full w-full object-cover rounded"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:r.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Current Stock: ",s.jsx("span",{className:r.stock<0?"text-red-600 font-bold":"",children:r.stock})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjust Stock (+ / -)"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>b(c-1),className:"rounded-r-none",children:s.jsx(ty,{className:"h-4 w-4"})}),s.jsx(re,{type:"number",value:c,onChange:h=>b(parseInt(h.target.value)||0),className:"rounded-none text-center"}),s.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>b(c+1),className:"rounded-l-none",children:s.jsx(ns,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Stock Value"}),s.jsx(re,{type:"number",value:o,onChange:h=>f(parseInt(h.target.value)||0)})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Current Stock:"}),s.jsx("span",{className:"font-medium",children:r.stock})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm mt-1",children:[s.jsx("span",{className:"text-gray-500",children:"Adjustment:"}),s.jsx("span",{className:`font-medium ${c>0?"text-green-600":c<0?"text-red-600":""}`,children:c>0?`+${c}`:c})]}),s.jsxs("div",{className:"flex items-center justify-between text-lg font-bold mt-2 pt-2 border-t",children:[s.jsx("span",{children:"New Stock:"}),s.jsx("span",{className:o<0?"text-red-600":"",children:o})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(M,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsxs(M,{type:"submit",children:[s.jsx(Ol,{className:"mr-2 h-4 w-4"}),"Update Stock"]})]})]})})]})]})}):null}const Da=10;function SM({isOpen:e,onClose:t,products:r,user:n,onStockAdjusted:a}){const[i,o]=m.useState([]),[l,c]=m.useState(!0),[d,u]=m.useState(1),[p,y]=m.useState(1),[x,b]=m.useState(H(new Date,"yyyy-MM-dd")),[f,g]=m.useState(""),[h,v]=m.useState("all"),[w,j]=m.useState("created_at"),[N,_]=m.useState("desc"),[k,C]=m.useState(""),[R,P]=m.useState(!1),[O,A]=m.useState(0),[V,Q]=m.useState(""),[W,S]=m.useState(!1);m.useState(!1);const z=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="superadmin";m.useEffect(()=>{e&&U()},[e,d,x,f,h,w,N,k]),m.useEffect(()=>{P(!1),A(0),Q("")},[f]);const D=L=>{b(L),u(1)},T=()=>{const L=new Date(x),F=Mi(L,1);D(H(F,"yyyy-MM-dd"))},$=()=>{const L=new Date(x),F=Or(L,1);D(H(F,"yyyy-MM-dd"))},U=async()=>{c(!0);try{const L=k.trim().length>0,F=Ee(new Date(x));F.setHours(0,0,0,0);const G=Ee(new Date(x));G.setHours(23,59,59,999);let Z=I.from("stock_history").select("*",{count:"exact",head:!0}),ee=I.from("stock_history").select("*, user:user_id ( email, name )");L||(Z=Z.gte("created_at",F.toISOString()).lte("created_at",G.toISOString()),ee=ee.gte("created_at",F.toISOString()).lte("created_at",G.toISOString())),f&&(Z=Z.eq("product_id",f),ee=ee.eq("product_id",f)),h!=="all"&&(Z=Z.eq("type",h),ee=ee.eq("type",h));const{count:ne,error:te}=await Z;if(te)throw te;let Y=Math.ceil((ne||0)/Da);const ie=(d-1)*Da,le=ie+Da-1;ee=ee.order(w,{ascending:N==="asc"}).range(ie,le);const{data:he,error:fe}=await ee;if(fe)throw fe;const ce=new Map(r.map(Ie=>[Ie.id,Ie.name]));let De=(he||[]).map(Ie=>{var ae,Qe;return{...Ie,product_name:ce.get(Ie.product_id)||"Unknown Product",user_email:((ae=Ie.user)==null?void 0:ae.email)||"System",user_name:((Qe=Ie.user)==null?void 0:Qe.name)||null,user:void 0}}).filter(Ie=>{if(!L)return!0;const ae=k.toLowerCase();return Ie.user_email.toLowerCase().includes(ae)||Ie.user_name&&Ie.user_name.toLowerCase().includes(ae)||Ie.product_name.toLowerCase().includes(ae)});if(L&&ne&&ne>De.length){const Ie=Math.ceil(De.length/Da)}y(Y>0?Y:1),d>Y&&Y>0&&u(Y),o(De)}catch(L){console.error("Error fetching stock history:",L),B.error(`Failed to fetch history: ${L.message}`)}finally{c(!1)}},E=L=>{_(F=>w===L?F==="asc"?"desc":"asc":L==="created_at"?"desc":"asc"),j(L),u(1)},q=async L=>{if(L.preventDefault(),!n){B.error("User not identified.");return}if(!f){B.error("No product selected for adjustment.");return}if(O<=0){B.error("Adjustment value must be positive.");return}if(!V.trim()){B.error("Adjustment reason cannot be empty.");return}S(!0);try{const{data:F,error:G}=await I.from("products").select("stock").eq("id",f).single();if(G||!F)throw G||new Error("Product not found");const Z=F.stock,ee=Z+O,{error:ne}=await I.from("stock_history").insert({product_id:f,user_id:n.id,previous_stock:Z,new_stock:ee,change:O,type:"adjustment",reason:V.trim()});if(ne)throw ne;const{error:te}=await I.from("products").update({stock:ee}).eq("id",f);if(te)throw te;B.success("Stock adjusted successfully."),P(!1),A(0),Q(""),await U(),a&&a()}catch(F){console.error("Error submitting stock adjustment:",F),B.error(`Adjustment failed: ${F.message}`)}finally{S(!1)}},X=()=>{if(p<=1)return[1];const L=[],F=5;let G=Math.max(1,d-Math.floor(F/2)),Z=Math.min(p,G+F-1);Z-G+1<F&&(G=Math.max(1,Z-F+1)),G>1&&L.push(1),G>2&&L.push("...");for(let ee=G;ee<=Z;ee++)L.push(ee);return Z<p-1&&L.push("..."),Z<p&&L.push(p),L};if(!e)return null;const J=r.find(L=>L.id===f);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 md:p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-200 flex justify-between items-center flex-shrink-0",children:[s.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:R?`Adjust Stock: ${(J==null?void 0:J.name)||"..."}`:"Stock History"}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),!R&&s.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-200 mb-4 flex-shrink-0",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"stockHistoryDate",className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(M,{variant:"outline",size:"icon",onClick:T,className:"h-9 w-9",children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsxs("div",{className:"relative flex-grow",children:[s.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),s.jsx(re,{id:"stockHistoryDate",type:"date",value:x,onChange:L=>D(L.target.value),className:"pl-10 h-9 text-sm w-full"})]}),s.jsx(M,{variant:"outline",size:"icon",onClick:$,className:"h-9 w-9",children:s.jsx(Ge,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),s.jsxs("select",{value:h,onChange:L=>{v(L.target.value),u(1)},className:"h-9 text-sm block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"sale",children:"Sales"}),s.jsx("option",{value:"adjustment",children:"Adjustments"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product"}),s.jsxs("select",{value:f,onChange:L=>{g(L.target.value),u(1)},className:"h-9 text-sm block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[s.jsx("option",{value:"",children:"All Products"}),r.sort((L,F)=>L.name.localeCompare(F.name)).map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{htmlFor:"stockHistorySearch",className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),s.jsx(xr,{className:"absolute left-3 top-8 h-4 w-4 text-gray-400 pointer-events-none"}),s.jsx(re,{id:"stockHistorySearch",type:"text",placeholder:"Search by user or product...",value:k,onChange:L=>C(L.target.value),className:"pl-10 h-9 text-sm"})]})]}),z&&f&&s.jsx("div",{className:"flex justify-end",children:s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>P(!0),children:[s.jsx(ca,{className:"h-4 w-4 mr-2"}),' Adjust Stock for "',(J==null?void 0:J.name)||"...",'"']})})]}),R&&s.jsx("div",{className:"p-4 md:p-6 border-b mb-4 flex-shrink-0",children:s.jsxs("form",{onSubmit:q,className:"p-4 border rounded-md bg-gray-50 space-y-4 max-w-md mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{htmlFor:"adjustmentValue",className:"text-sm font-medium",children:"Add Quantity (+):"}),s.jsx(re,{id:"adjustmentValue",type:"number",value:O,onChange:L=>A(parseInt(L.target.value,10)||0),placeholder:`Current: ${(J==null?void 0:J.stock)??"N/A"}`,className:"h-9 text-sm flex-grow",min:"1",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"adjustmentReason",className:"text-sm font-medium",children:"Reason:"}),s.jsx(re,{id:"adjustmentReason",type:"text",value:V,onChange:L=>Q(L.target.value),placeholder:"Reason for adjustment",className:"mt-1 h-9 text-sm w-full",required:!0})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(M,{variant:"ghost",size:"sm",type:"button",onClick:()=>P(!1),disabled:W,children:"Cancel"}),s.jsxs(M,{size:"sm",type:"submit",disabled:W,children:[W?s.jsx(Ye,{className:"h-4 w-4 animate-spin mr-1"}):s.jsx(Ps,{className:"h-4 w-4 mr-1"}),"Confirm Adjustment"]})]})]})}),!R&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex-grow overflow-auto min-h-[400px]",children:s.jsx("div",{className:"px-4 md:px-6",children:l?s.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:s.jsx(Ye,{className:"h-8 w-8 animate-spin text-orange-600"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),["created_at","product_name","user_email","previous_stock","new_stock","change","type"].map(L=>s.jsxs("th",{scope:"col",className:`px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${["created_at","product_name","user_email","change","type"].includes(L)?"cursor-pointer hover:bg-gray-100":""}`,onClick:()=>["created_at","product_name","user_email","change","type"].includes(L)?E(L):void 0,children:[L==="user_email"?"Cashier":L.replace("_"," "),w===L&&(N==="asc"?" ":" ")]},L))]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-4 py-4 text-center text-gray-500",children:"No stock history found matching criteria."})}):i.map((L,F)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-500 text-center",children:(d-1)*Da+F+1}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-600",children:H(Ee(new Date(L.created_at)),"dd MMM yy, HH:mm")}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-900 font-medium",children:L.product_name}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-500",children:L.user_name||L.user_email}),s.jsx("td",{className:"px-4 py-2 text-center whitespace-nowrap text-gray-500",children:L.previous_stock}),s.jsx("td",{className:"px-4 py-2 text-center whitespace-nowrap text-gray-500",children:L.new_stock}),s.jsx("td",{className:`px-4 py-2 text-center whitespace-nowrap font-medium ${L.change>0?"text-green-600":L.change<0?"text-red-600":"text-gray-500"}`,children:L.change>0?`+${L.change}`:L.change}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500 capitalize",children:L.type||"N/A"})]},L.id))})]})})})}),!l&&p>1&&s.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between flex-shrink-0",children:[s.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",s.jsx("span",{className:"font-medium",children:d})," of ",s.jsx("span",{className:"font-medium",children:p})]}),s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[s.jsx(M,{onClick:()=>u(L=>Math.max(1,L-1)),disabled:d===1,variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:s.jsx(qe,{className:"h-5 w-5"})}),X().map((L,F)=>typeof L=="number"?s.jsx(M,{onClick:()=>u(L),variant:d===L?"default":"outline",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${d===L?"z-10":""}`,children:L},L):s.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},`ellipsis-${F}`)),s.jsx(M,{onClick:()=>u(L=>Math.min(p,L+1)),disabled:d===p,variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:s.jsx(Ge,{className:"h-5 w-5"})})]})]})]})]})})}function CM(){const e=Fe(F=>F.user),[t,r]=m.useState("pos"),[n,a]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState(!0),[d,u]=m.useState(""),[p,y]=m.useState(!1),[x,b]=m.useState(!1),[f,g]=m.useState(null),[h,v]=m.useState(!1),[w,j]=m.useState([]),[N,_]=m.useState(!1),[k,C]=m.useState(1),[R,P]=m.useState(1),[O,A]=m.useState(H(new Date,"yyyy-MM-dd")),[V,Q]=m.useState("created_at"),[W,S]=m.useState("desc");m.useEffect(()=>{z();const F=setInterval(()=>{t==="pos"&&z(!1)},6e4);return()=>clearInterval(F)},[]),m.useEffect(()=>{t==="history"&&D()},[t,k,O,V,W]);const z=async(F=!0)=>{F&&c(!0);try{const{data:G,error:Z}=await I.from("products").select("*").eq("active",!0).order("name");if(Z)throw Z;if(i.length>0){const ee=i.map(ne=>{const te=G==null?void 0:G.find(Y=>Y.id===ne.id);return te?{...ne,stock:te.stock}:ne});o(ee)}a(G||[])}catch(G){console.error("Error fetching products:",G),F&&B.error("Error fetching products")}finally{F&&c(!1)}},D=async()=>{_(!0);try{const F=Ee(new Date(O));F.setHours(0,0,0,0);const G=Ee(new Date(O));G.setHours(23,59,59,999);const{count:Z}=await I.from("payments").select("*",{count:"exact",head:!0}).eq("type","pos").gte("created_at",F.toISOString()).lte("created_at",G.toISOString());P(Math.ceil((Z||0)/15));const ee=(k-1)*15,ne=ee+14;let te=I.from("payments").select(`
          *,
          user:user_id (
            email,
            name
          )
        `).eq("type","pos").gte("created_at",F.toISOString()).lte("created_at",G.toISOString()).range(ee,ne);V!=="items"&&(te=te.order(V,{ascending:W==="asc"}));const{data:Y,error:ie}=await te;if(ie)throw ie;let le=[...Y||[]];le=le.map(he=>({...he,user:he.user||null})),V==="items"&&le.length>0&&le.sort((he,fe)=>{var Ie,ae;const ce=((Ie=he.items)==null?void 0:Ie.length)||0,De=((ae=fe.items)==null?void 0:ae.length)||0;return W==="asc"?ce-De:De-ce}),j(le)}catch{B.error("Error fetching sales history")}finally{_(!1)}},T=F=>{if(F.stock<=0){B.error(`${F.name} is out of stock`);return}o(G=>{const Z=G.find(ee=>ee.id===F.id);return Z?Z.quantity+1>F.stock?(B.error(`Cannot add more ${F.name}. Only ${F.stock} available.`),G):G.map(ee=>ee.id===F.id?{...ee,quantity:ee.quantity+1}:ee):[...G,{...F,quantity:1}]})},$=(F,G)=>{o(Z=>Z.map(ne=>{if(ne.id===F){const te=ne.quantity+G;if(G>0){const Y=n.find(ie=>ie.id===F);if(Y&&te>Y.stock)return B.error(`Cannot add more ${ne.name}. Only ${Y.stock} available.`),ne}return te>0?{...ne,quantity:te}:ne}return ne}).filter(ne=>ne.quantity>0))},U=F=>{o(G=>G.filter(Z=>Z.id!==F))},E=async F=>{if(i.length!==0){y(!0);try{const G=i.reduce((te,Y)=>te+Y.price*Y.quantity,0);for(const te of i){const{data:Y,error:ie}=await I.from("products").select("stock").eq("id",te.id).single();if(ie)throw ie;if(!Y||Y.stock<te.quantity)throw new Error(`Not enough stock for ${te.name}. Only ${(Y==null?void 0:Y.stock)||0} available.`)}const{data:Z,error:ee}=await I.from("payments").insert({amount:G,type:"pos",payment_method:F,user_id:e==null?void 0:e.id,items:i.map(te=>({product_id:te.id,product_name:te.name,quantity:te.quantity,price:te.price}))}).select().single();if(ee)throw ee;const ne=i.map(async te=>{const{data:Y,error:ie}=await I.from("products").select("stock").eq("id",te.id).single();if(ie)throw ie;if(!Y)throw new Error(`Product ${te.name} not found`);const le=Y.stock-te.quantity,{error:he}=await I.from("products").update({stock:le}).eq("id",te.id);if(he)throw he;const{error:fe}=await I.from("stock_history").insert({product_id:te.id,user_id:e==null?void 0:e.id,previous_stock:Y.stock,new_stock:le,change:-te.quantity,type:"sale"});return fe&&console.error("Error recording stock history:",fe),{id:te.id,newStock:le}});await Promise.all(ne),await z(!1),B.success("Payment processed successfully"),o([]),Z&&j(te=>[Z,...te])}catch(G){console.error("Error processing payment:",G),B.error(G.message||"Error processing payment"),z()}finally{y(!1)}}},q=F=>{S(G=>V===F&&G==="asc"?"desc":"asc"),Q(F)},X=F=>{A(F),C(1)},J=()=>{const F=async()=>{const G=Ee(new Date(O));G.setHours(0,0,0,0);const Z=Ee(new Date(O));Z.setHours(23,59,59,999);const{data:ee,error:ne}=await I.from("payments").select(`
          *,
          user:user_id (
            email,
            name // Select name
          )
        `).eq("type","pos").gte("created_at",G.toISOString()).lte("created_at",Z.toISOString()).order("created_at",{ascending:!1});if(ne)throw ne;return(ee||[]).map(Y=>({...Y,user:Array.isArray(Y.user)&&Y.user.length>0?Y.user[0]:null}))};B.promise(F().then(G=>{const Z=G.map(ee=>{var ne,te,Y;return{"Sale ID":ee.id,Date:H(new Date(ee.created_at),"dd MMM yyyy HH:mm"),"Processed By":((ne=ee.user)==null?void 0:ne.name)||((te=ee.user)==null?void 0:te.email)||"System","Payment Method":ee.payment_method,Items:((Y=ee.items)==null?void 0:Y.map(ie=>`${ie.product_name} (x${ie.quantity})`).join("; "))||"N/A","Total Amount":`RM ${ee.amount.toFixed(2)}`}});Br(Z,`pos-sales-${O}.csv`)}),{loading:"Preparing export...",success:"Sales data exported successfully!",error:"Error exporting sales data"})},L=async(F,G)=>{try{const{data:Z,error:ee}=await I.from("products").select("stock").eq("id",F).single();if(ee)throw ee;if(!Z)throw new Error("Product not found");const ne=G-Z.stock,{error:te}=await I.from("products").update({stock:G}).eq("id",F);if(te)throw te;const{error:Y}=await I.from("stock_history").insert({product_id:F,user_id:e==null?void 0:e.id,previous_stock:Z.stock,new_stock:G,change:ne,type:"adjustment"});Y&&console.error("Error recording stock history:",Y),await z(!1),o(ie=>ie.map(le=>le.id===F?{...le,stock:G}:le)),B.success("Stock updated successfully"),b(!1)}catch(Z){console.error("Error updating stock:",Z),B.error("Error updating stock"),z()}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-8 border-b border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs("button",{onClick:()=>r("pos"),className:`
                whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                ${t==="pos"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
              `,children:[s.jsx(xi,{className:"inline-block mr-2 h-4 w-4"}),"Point of Sale"]}),s.jsxs("button",{onClick:()=>r("history"),className:`
                whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                ${t==="history"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
              `,children:[s.jsx(Qn,{className:"inline-block mr-2 h-4 w-4"}),"Sales History"]})]}),t==="pos"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(M,{variant:"outline",onClick:()=>{n.length>0?(g(n[0]),b(!0)):B.error("No products available to update stock")},children:[s.jsx(Ol,{className:"mr-2 h-4 w-4"}),"Update Stock"]}),s.jsxs(M,{variant:"outline",onClick:()=>v(!0),children:[s.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Stock History"]})]})]})}),t==="pos"?s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(jM,{products:n,loading:l,searchQuery:d,onSearchChange:u,onAddToCart:T})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(NM,{cart:i,processingPayment:p,onUpdateQuantity:$,onRemoveFromCart:U,onPayment:E})})]}):s.jsx(_M,{loading:N,sales:w,currentPage:k,totalPages:R,onPageChange:C,onDateChange:X,selectedDate:O,sortField:V,sortOrder:W,onSort:q,onExport:J}),x&&f&&s.jsx(kM,{isOpen:x,onClose:()=>b(!1),product:f,onUpdate:L,products:n,onSelectProduct:g}),h&&s.jsx(SM,{isOpen:h,onClose:()=>v(!1),products:n,user:e,onStockAdjusted:()=>z(!1)})]})}function kp({onSuccess:e}){const{id:t}=la(),r=Be(),[n,a]=m.useState(!0),[i,o]=m.useState(!1),[l,c]=m.useState({name:"",description:"",price:0,stock:0,active:!0}),[d,u]=m.useState(null),[p,y]=m.useState("");m.useEffect(()=>{t?x():a(!1)},[t]);const x=async()=>{try{const{data:g,error:h}=await I.from("products").select("*").eq("id",t).single();if(h)throw h;c(g),g.photo_url&&y(g.photo_url)}catch{B.error("Error fetching product"),r("/admin/products")}finally{a(!1)}},b=async g=>{var v;const h=(v=g.target.files)==null?void 0:v[0];if(h)try{const w=await Yl(h),j=new File([w],h.name,{type:"image/jpeg",lastModified:Date.now()});u(j);const N=new FileReader;N.onloadend=()=>{y(N.result)},N.readAsDataURL(j)}catch{B.error("Error processing image")}},f=async g=>{g.preventDefault(),o(!0);try{let h=l.photo_url||"";if(d){const N=`products/${`${Date.now()}.jpg`}`,{error:_}=await I.storage.from("media").upload(N,d);if(_)throw _;const{data:{publicUrl:k}}=I.storage.from("media").getPublicUrl(N);h=k}const v={name:l.name||"",description:l.description||"",price:Number(l.price)||0,stock:Number(l.stock)||0,active:l.active!==void 0?l.active:!0,photo_url:h};if(console.log("Saving product data:",v),t){const{error:w}=await I.from("products").update(v).eq("id",t);if(w)throw console.error("Error updating product:",w),w;B.success("Product updated successfully")}else{const{data:w,error:j}=await I.from("products").insert(v).select();if(j)throw console.error("Error creating product:",j),j;console.log("Product created successfully:",w),B.success("Product created successfully")}e()}catch(h){console.error("Error saving product:",h),B.error(t?"Error updating product":"Error creating product")}finally{o(!1)}};return n?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(M,{variant:"ghost",onClick:()=>r("/admin/products"),children:[s.jsx(Tr,{className:"mr-2 h-4 w-4"}),"Back to Products"]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:t?"Edit Product":"New Product"}),s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-32 h-32 relative rounded-lg overflow-hidden bg-gray-100",children:p?s.jsx("img",{src:p,alt:"Product preview",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:s.jsx(tu,{className:"h-8 w-8"})})}),s.jsxs("label",{className:"mt-4",children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>{var g;return(g=document.getElementById("photo-upload"))==null?void 0:g.click()},children:p?"Change Photo":"Upload Photo"}),s.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",className:"hidden",onChange:b})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name"}),s.jsx(re,{id:"name",required:!0,value:l.name,onChange:g=>c(h=>({...h,name:g.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{id:"description",rows:3,value:l.description,onChange:g=>c(h=>({...h,description:g.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price (RM)"}),s.jsx(re,{id:"price",type:"number",step:"0.01",min:"0",required:!0,value:l.price,onChange:g=>c(h=>({...h,price:parseFloat(g.target.value)||0}))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock"}),s.jsx(re,{id:"stock",type:"number",required:!0,value:l.stock,onChange:g=>c(h=>({...h,stock:parseInt(g.target.value,10)||0}))}),l.stock!==void 0&&l.stock<0&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Warning: Negative stock indicates oversold items"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"active",type:"checkbox",checked:l.active,onChange:g=>c(h=>({...h,active:g.target.checked})),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Product is active"})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>r("/admin/products"),children:"Cancel"}),s.jsx(M,{type:"submit",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Updating...":"Creating..."]}):t?"Update Product":"Create Product"})]})]})]})})]})}function EM(){const[e,t]=m.useState([]),[r,n]=m.useState(!0),[a,i]=m.useState(""),o=Be();m.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:y,error:x}=await I.from("products").select("*").order("name");if(x)throw x;t(y||[])}catch{B.error("Error fetching products")}finally{n(!1)}},c=async y=>{try{const{error:x}=await I.from("products").update({active:!y.active}).eq("id",y.id);if(x)throw x;t(e.map(b=>b.id===y.id?{...b,active:!b.active}:b)),B.success(`Product ${y.active?"disabled":"enabled"}`)}catch{B.error("Error updating product status")}},d=e.filter(y=>{var x;return y.name.toLowerCase().includes(a.toLowerCase())||((x=y.description)==null?void 0:x.toLowerCase().includes(a.toLowerCase()))}),u=()=>{const y=e.map(({id:x,photo_url:b,...f})=>({...f,active:f.active?"Yes":"No",created_at:new Date(f.created_at).toLocaleDateString()}));Br(y,"products.csv")},p=y=>y<0?"text-red-600 font-bold":y===0?"text-yellow-600":"text-gray-900";return s.jsxs(Tl,{children:[s.jsx(xe,{path:"/",element:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsx(re,{type:"text",placeholder:"Search products...",value:a,onChange:y=>i(y.target.value),className:"w-full"})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs(M,{variant:"outline",onClick:u,children:[s.jsx(zr,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),s.jsxs(M,{onClick:()=>o("new"),children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),"New Product"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:r?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(y=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:y.photo_url||"https://via.placeholder.com/100",alt:y.name})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.name}),s.jsx("div",{className:"text-sm text-gray-500",children:y.description})]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",y.price.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx("span",{className:p(y.stock),children:y.stock})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:y.active?"Active":"Disabled"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx(M,{variant:"ghost",size:"sm",onClick:()=>o(`edit/${y.id}`),className:"mr-2",children:s.jsx(ca,{className:"h-4 w-4"})}),s.jsx(M,{variant:"ghost",size:"sm",onClick:()=>c(y),children:y.active?s.jsx(Al,{className:"h-4 w-4 text-green-600"}):s.jsx(Il,{className:"h-4 w-4 text-gray-400"})})]})]},y.id))})]})})]})}),s.jsx(xe,{path:"new",element:s.jsx(kp,{onSuccess:()=>{l(),o("/admin/products")}})}),s.jsx(xe,{path:"edit/:id",element:s.jsx(kp,{onSuccess:()=>{l(),o("/admin/products")}})})]})}const Zc={grace_period_days:7},MM={logo_text:"FMF @ Alor Setar",icon_enabled:!0,icon_color:"#ea580c",logo_url:null};function PM(){const[e,t]=m.useState(!0),[r,n]=m.useState(!1),[a,i]=m.useState(Zc),[o,l]=m.useState(MM),[c,d]=m.useState(null),[u,p]=m.useState(""),[y,x]=m.useState(!1),[b,f]=m.useState("general");m.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:w}=await I.from("settings").select("value").eq("key","membership").single();if(w!=null&&w.value){const N=w.value;i(_=>({..._,grace_period_days:N.grace_period_days??Zc.grace_period_days}))}else i({grace_period_days:Zc.grace_period_days});const{data:j}=await I.from("settings").select("value").eq("key","branding").single();j!=null&&j.value&&(l(j.value),j.value.logo_url&&p(j.value.logo_url))}catch(w){console.error("Error fetching settings:",w),B.error("Error loading settings")}finally{t(!1)}},h=async w=>{var N;const j=(N=w.target.files)==null?void 0:N[0];if(j)try{x(!0);const _=await Yl(j),k=new File([_],j.name,{type:"image/jpeg",lastModified:Date.now()});d(k);const C=new FileReader;C.onloadend=()=>{p(C.result)},C.readAsDataURL(k),B.success("Logo selected")}catch(_){console.error("Error processing logo:",_),B.error("Error processing logo")}finally{x(!1)}},v=async w=>{w.preventDefault(),n(!0);try{let j=o.logo_url;if(c){const R=`branding/${`logo-${Date.now()}.jpg`}`,{error:P}=await I.storage.from("media").upload(R,c);if(P)throw P;const{data:{publicUrl:O}}=I.storage.from("media").getPublicUrl(R);j=O}const{error:N}=await I.rpc("update_settings",{p_key:"membership",p_value:{grace_period_days:a.grace_period_days}});if(N)throw N;const{error:_}=await I.rpc("update_settings",{p_key:"branding",p_value:{...o,logo_url:j}});if(_)throw _;B.success("Settings saved successfully")}catch(j){console.error("Error saving settings:",j),B.error("Error saving settings")}finally{n(!1)}};return e?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("form",{onSubmit:v,children:s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"})}),s.jsx("div",{className:"mb-6 border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{onClick:()=>f("general"),className:`
                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                    ${b==="general"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:"General"}),s.jsx("button",{onClick:()=>f("branding"),className:`
                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                    ${b==="branding"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:"Branding"})]})}),s.jsxs("div",{className:"mt-6",children:[b==="general"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"General Settings"}),s.jsx("div",{className:"mt-4 space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{htmlFor:"grace_period_days",className:"block text-sm font-medium text-gray-700",children:"Membership Grace Period (Days)"}),s.jsx(re,{id:"grace_period_days",name:"grace_period_days",type:"number",value:a.grace_period_days,onChange:w=>i(j=>({...j,grace_period_days:parseInt(w.target.value)||0})),className:"mt-1 block w-full max-w-xs"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Number of days after expiry before status changes to Expired."})]})})]}),b==="branding"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Branding"}),s.jsxs("div",{className:"mt-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"logo_text",className:"block text-sm font-medium text-gray-700",children:"Logo Text"}),s.jsx(re,{id:"logo_text",name:"logo_text",type:"text",value:o.logo_text,onChange:w=>l(j=>({...j,logo_text:w.target.value})),className:"mt-1 block w-full"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"icon_enabled",name:"icon_enabled",type:"checkbox",checked:o.icon_enabled,onChange:w=>l(j=>({...j,icon_enabled:w.target.checked})),className:"h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),s.jsx("label",{htmlFor:"icon_enabled",className:"ml-2 block text-sm text-gray-900",children:"Show Logo Icon"})]}),o.icon_enabled&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"icon_color",className:"block text-sm font-medium text-gray-700",children:"Icon Color"}),s.jsx("input",{id:"icon_color",name:"icon_color",type:"color",value:o.icon_color,onChange:w=>l(j=>({...j,icon_color:w.target.value})),className:"mt-1 block"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo Image"}),s.jsxs("div",{className:"mt-1 flex items-center space-x-4",children:[s.jsx("div",{className:"h-16 w-16 bg-gray-100 rounded-md flex items-center justify-center overflow-hidden",children:u?s.jsx("img",{src:u,alt:"Logo Preview",className:"h-full w-full object-contain"}):s.jsx(nN,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("div",{children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>{var w;return(w=document.getElementById("logo-upload"))==null?void 0:w.click()},disabled:y,children:u?"Change Logo":"Upload Logo"}),s.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",className:"sr-only",accept:"image/*",onChange:h,disabled:y})]})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: PNG with transparent background, max 2MB."})]})]})]})]}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsx(M,{type:"submit",disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jh,{className:"mr-2 h-4 w-4"}),"Save Settings"]})})})]})})})})}let co;const DM=new Uint8Array(16);function TM(){if(!co&&(co=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!co))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return co(DM)}const nt=[];for(let e=0;e<256;++e)nt.push((e+256).toString(16).slice(1));function RM(e,t=0){return nt[e[t+0]]+nt[e[t+1]]+nt[e[t+2]]+nt[e[t+3]]+"-"+nt[e[t+4]]+nt[e[t+5]]+"-"+nt[e[t+6]]+nt[e[t+7]]+"-"+nt[e[t+8]]+nt[e[t+9]]+"-"+nt[e[t+10]]+nt[e[t+11]]+nt[e[t+12]]+nt[e[t+13]]+nt[e[t+14]]+nt[e[t+15]]}const OM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Sp={randomUUID:OM};function IM(e,t,r){if(Sp.randomUUID&&!t&&!e)return Sp.randomUUID();e=e||{};const n=e.random||(e.rng||TM)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,RM(n)}function AM(){const[e,t]=m.useState([]),[r,n]=m.useState(!0),[a,i]=m.useState("");Be();const o=Fe(E=>E.user),l=(o==null?void 0:o.role)==="superadmin",c=(o==null?void 0:o.role)==="admin",[d,u]=m.useState(!1),[p,y]=m.useState(!1),[x,b]=m.useState(null),[f,g]=m.useState({email:"",password:"",name:"",role:"cashier"}),[h,v]=m.useState({email:"",password:"",name:"",role:"cashier"}),[w,j]=m.useState(!1),[N,_]=m.useState(!1),[k,C]=m.useState(!1),[R,P]=m.useState(null),[O,A]=m.useState(!0);m.useEffect(()=>{V(),Q()},[]);const V=async()=>{try{const{data:E,error:q}=await I.rpc("get_accessible_users",{p_user_role:o==null?void 0:o.role});if(q)throw q;const X=(E||[]).sort((J,L)=>J.email.localeCompare(L.email));t(X)}catch(E){console.error("Error fetching users:",E),B.error("Error fetching users")}finally{n(!1)}},Q=async()=>{try{const{data:E}=await I.from("settings").select("value").eq("key","membership").single();if(E!=null&&E.value){const q=E.value;P(q),A(q.enable_password_reset??!0)}else P({enable_password_reset:!0}),A(!0)}catch(E){console.error("Error fetching membership settings:",E),B.error("Error loading password reset setting")}},W=async()=>{if(!R){B.error("Cannot save: Membership settings not loaded.");return}C(!0);try{const E={...R,enable_password_reset:O},{error:q}=await I.rpc("update_settings",{p_key:"membership",p_value:E});if(q)throw q;P(E),B.success("Password reset setting saved")}catch(E){console.error("Error saving password reset setting:",E),B.error("Error saving setting")}finally{C(!1)}},S=async E=>{E.preventDefault(),j(!0);try{const{data:q}=await I.rpc("check_user_exists",{p_email:f.email});if(q)throw new Error("A user with this email already exists");const X=IM(),{data:J,error:L}=await I.auth.signUp({email:f.email,password:f.password,options:{data:{role:f.role,id:X,active:!0}}});if(L)throw L.message.includes("already registered")?new Error("An account with this email already exists in the system"):L;if(!J.user)throw new Error("No user data returned");const{data:F,error:G}=await I.rpc("create_user",{p_id:X,p_email:f.email,p_name:f.name,p_role:f.role});if(G){try{await I.auth.admin.deleteUser(J.user.id)}catch(Z){console.error("Error cleaning up auth user:",Z)}throw G}B.success("User created successfully. User must confirm email to access the system."),u(!1),g({email:"",password:"",name:"",role:"cashier"}),V()}catch(q){console.error("Error creating user:",q),B.error(q.message||"Error creating user")}finally{j(!1)}},z=async E=>{if(E.preventDefault(),!!x){j(!0);try{const{error:q}=await I.rpc("admin_update_user_details",{p_user_id:x.id,p_name:h.name,p_role:h.role,p_email:h.email});if(q)throw q;if(h.password){const{error:X}=await I.rpc("admin_update_user_password",{user_id:x.id,new_password:h.password});if(X){console.error("Error updating password:",X),B.error("User role updated but password update failed"),y(!1),b(null),V();return}}B.success("User updated successfully"),y(!1),b(null),V()}catch(q){console.error("Error updating user:",q),B.error(q.message||"Error updating user")}finally{j(!1)}}},D=E=>{if(E.role==="superadmin"&&!l){B.error("You do not have permission to edit superadmin users");return}b(E),v({email:E.email,password:"",name:E.name||"",role:E.role}),y(!0)},T=async E=>{if(!N){if(E.role==="superadmin"&&!l){B.error("You do not have permission to deactivate superadmin users");return}_(!0);try{const q=!E.active,{data:X,error:J}=await I.rpc("toggle_user_active_status",{p_user_id:E.id,p_active:q});if(J)throw J;t(e.map(L=>L.id===E.id?{...L,active:q}:L)),B.success(`User ${q?"activated":"deactivated"} successfully`)}catch(q){console.error("Error toggling user status:",q),B.error("Error updating user status")}finally{_(!1)}}},$=()=>{const E=e.map(({id:q,...X})=>({name:X.name||"N/A",email:X.email,role:X.role,active:X.active?"Yes":"No",created_at:H(new Date(X.created_at),"dd MMM yyyy HH:mm")}));Br(E,"users.csv")},U=e.filter(E=>E.email.toLowerCase().includes(a.toLowerCase())||E.name&&E.name.toLowerCase().includes(a.toLowerCase()));return r?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Users Management"}),s.jsxs("div",{className:"flex space-x-2 items-center",children:[s.jsxs("div",{className:"flex items-center space-x-2 border p-2 rounded-md bg-gray-50",children:[s.jsx("div",{className:"flex items-center h-5",children:s.jsx("input",{id:"enable_password_reset",name:"enable_password_reset",type:"checkbox",checked:O,onChange:E=>A(E.target.checked),className:"focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 rounded",disabled:k})}),s.jsx("div",{className:"text-sm",children:s.jsx("label",{htmlFor:"enable_password_reset",className:"font-medium text-gray-700",children:"Enable Password Reset on Login"})}),s.jsx(M,{size:"sm",onClick:W,disabled:k,children:k?s.jsx(Ye,{className:"h-4 w-4 animate-spin"}):"Save"})]}),s.jsxs(M,{variant:"outline",onClick:$,children:[s.jsx(zr,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),(l||c)&&s.jsxs(M,{onClick:()=>u(!0),children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),"New User"]})]})]}),s.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(re,{type:"text",placeholder:"Search users...",value:a,onChange:E=>i(E.target.value),className:"pl-10"}),s.jsx(xr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"})]})})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Joined"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{scope:"col",className:"relative px-6 py-3",children:s.jsx("span",{className:"sr-only",children:"Actions"})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})})}):U.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):U.map(E=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E.name||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:E.role}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(E.created_at),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E.active!==!1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.active!==!1?"Active":"Inactive"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(c||l)&&s.jsxs(s.Fragment,{children:[s.jsx(M,{variant:"ghost",size:"sm",onClick:()=>D(E),className:"mr-2",children:s.jsx(ca,{className:"h-4 w-4"})}),s.jsx(M,{variant:"ghost",size:"sm",onClick:()=>T(E),disabled:N,children:E.active!==!1?s.jsx(Al,{className:"h-4 w-4 text-green-600"}):s.jsx(Il,{className:"h-4 w-4 text-gray-400"})})]})})]},E.id))})]})})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New User"}),s.jsxs("form",{onSubmit:S,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx(re,{type:"email",required:!0,value:f.email,onChange:E=>g({...f,email:E.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx(re,{type:"text",value:f.name,onChange:E=>g({...f,name:E.target.value}),className:"mt-1 block w-full",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsx(re,{type:"password",required:!0,value:f.password,onChange:E=>g({...f,password:E.target.value}),minLength:6}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Password must be at least 6 characters long"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),s.jsxs("select",{value:f.role,onChange:E=>g({...f,role:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[s.jsx("option",{value:"cashier",children:"Cashier"}),s.jsx("option",{value:"admin",children:"Admin"}),l&&s.jsx("option",{value:"superadmin",children:"Super Admin"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>u(!1),disabled:w,children:"Cancel"}),s.jsx(M,{type:"submit",disabled:w,children:w?s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}):"Create User"})]})]})]})})}),p&&x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:["Edit User: ",x.email]}),s.jsxs("form",{onSubmit:z,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx(re,{type:"email",required:!0,value:h.email,onChange:E=>v({...h,email:E.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx(re,{type:"text",value:h.name,onChange:E=>v({...h,name:E.target.value}),className:"mt-1 block w-full",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsx(re,{type:"password",value:h.password,onChange:E=>v({...h,password:E.target.value}),minLength:6,placeholder:"Leave blank to keep current password"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"If provided, password must be at least 6 characters long"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),s.jsxs("select",{value:h.role,onChange:E=>v({...h,role:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[s.jsx("option",{value:"cashier",children:"Cashier"}),s.jsx("option",{value:"admin",children:"Admin"}),l&&s.jsx("option",{value:"superadmin",children:"Super Admin"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>y(!1),disabled:w,children:"Cancel"}),s.jsx(M,{type:"submit",disabled:w,children:w?s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}):"Save Changes"})]})]})]})})})]})}function $M(){const[e,t]=m.useState(!0),[r,n]=m.useState(!1),[a,i]=m.useState([]),[o,l]=m.useState(new Set);m.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:x,error:b}=await I.from("membership_plans").select("*").order("type").order("months");if(b)throw b;i(x||[]),l(new Set)}catch(x){console.error("Error fetching plans:",x),B.error("Error loading membership plans")}finally{t(!1)}},d=()=>{const x={id:"new-"+Date.now(),type:"adult",months:1,price:0,registration_fee:0,free_months:0,active:!0};i(b=>[...b,x])},u=(x,b,f)=>{i(g=>{const h=[...g];return h[x]={...h[x],[b]:f},h})},p=async()=>{n(!0);try{if(o.size>0){const{error:f}=await I.from("membership_plans").delete().in("id",Array.from(o));if(f)throw console.error("Delete error:",f),new Error("Failed to delete plans")}const x=a.filter(f=>f.id.startsWith("new-"));if(x.length>0){const{error:f}=await I.from("membership_plans").insert(x.map(({id:g,...h})=>({type:h.type,months:h.months,price:h.price,registration_fee:h.registration_fee,free_months:h.free_months,active:h.active})));if(f)throw console.error("Insert error:",f),new Error("Failed to create new plans")}const b=a.filter(f=>!f.id.startsWith("new-"));for(const f of b){const{error:g}=await I.from("membership_plans").update({type:f.type,months:f.months,price:f.price,registration_fee:f.registration_fee,free_months:f.free_months,active:f.active}).eq("id",f.id);if(g)throw console.error("Update error:",g),new Error(`Failed to update plan ${f.id}`)}await c(),B.success("Membership plans updated successfully")}catch(x){console.error("Error saving plans:",x),B.error(x instanceof Error?x.message:"Error updating membership plans")}finally{n(!1)}},y=x=>{window.confirm("Are you sure you want to delete this plan?")&&(x.startsWith("new-")?i(b=>b.filter(f=>f.id!==x)):(l(b=>new Set([...b,x])),i(b=>b.filter(f=>f.id!==x))))};return e?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Membership Plans"}),s.jsxs(M,{onClick:d,children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),"Add Plan"]})]}),s.jsxs("form",{onSubmit:x=>x.preventDefault(),className:"space-y-6",children:[s.jsx("div",{className:"space-y-4",children:a.map((x,b)=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg grid grid-cols-1 sm:grid-cols-8 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),s.jsxs("select",{value:x.type,onChange:f=>u(b,"type",f.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[s.jsx("option",{value:"adult",children:"Adult"}),s.jsx("option",{value:"youth",children:"Youth"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Months"}),s.jsx(re,{type:"number",min:"1",value:x.months,onChange:f=>u(b,"months",parseInt(f.target.value)||1)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price (RM)"}),s.jsx(re,{type:"number",min:"0",step:"0.01",value:x.price,onChange:f=>u(b,"price",parseFloat(f.target.value)||0)})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Registration Fee (RM)"}),s.jsx(re,{type:"number",min:"0",step:"0.01",value:x.registration_fee,onChange:f=>u(b,"registration_fee",parseFloat(f.target.value)||0)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Free Months"}),s.jsx(re,{type:"number",min:"0",value:x.free_months,onChange:f=>u(b,"free_months",parseInt(f.target.value)||0)})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"flex items-center mt-7",children:s.jsx("input",{type:"checkbox",checked:x.active,onChange:f=>u(b,"active",f.target.checked),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"})})}),s.jsx("div",{className:"flex justify-center",children:s.jsx(M,{type:"button",variant:"ghost",onClick:()=>y(x.id),className:"text-red-600 hover:text-red-700 mt-7",children:s.jsx(ny,{className:"h-4 w-4"})})})]},x.id))}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx(M,{type:"button",disabled:r,onClick:p,children:r?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jh,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})]})}const ed={adult:15,youth:12},Ta={adult:45,youth:35,max_uses:1};function LM(){const[e,t]=m.useState(!0),[r,n]=m.useState(!1),[a,i]=m.useState(ed),[o,l]=m.useState(Ta),[c,d]=m.useState("walkin-prices");m.useEffect(()=>{u()},[]);const u=async()=>{t(!0);try{const{data:y}=await I.from("settings").select("value").eq("key","membership").single();if(y!=null&&y.value){const b=y.value;i({adult:b.adult_walkin_price||ed.adult,youth:b.youth_walkin_price||ed.youth})}const{data:x}=await I.from("settings").select("value").eq("key","coupon_prices").single();if(x!=null&&x.value){const b=x.value;l({adult:b.adult||Ta.adult,youth:b.youth||Ta.youth,max_uses:b.max_uses||Ta.max_uses})}else await I.from("settings").insert({key:"coupon_prices",value:Ta})}catch(y){console.error("Error fetching pricing settings:",y),B.error("Error loading pricing settings")}finally{t(!1)}},p=async y=>{var x;y.preventDefault(),n(!0);try{const{data:b}=await I.from("settings").select("value").eq("key","membership").single(),f=((x=b==null?void 0:b.value)==null?void 0:x.grace_period_days)||7,{error:g}=await I.rpc("update_settings",{p_key:"membership",p_value:{grace_period_days:f,adult_walkin_price:a.adult,youth_walkin_price:a.youth}});if(g)throw g;const{error:h}=await I.rpc("update_settings",{p_key:"coupon_prices",p_value:o});if(h)throw h;B.success("Pricing settings saved successfully")}catch(b){console.error("Error saving pricing settings:",b),B.error("Error saving pricing settings")}finally{n(!1)}};return e?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("form",{onSubmit:p,children:[s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pricing & Plans"})}),s.jsx("div",{className:"mb-6 border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{type:"button",onClick:()=>d("walkin-prices"),className:`
                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                    ${c==="walkin-prices"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:"Walk-in Prices"}),s.jsx("button",{type:"button",onClick:()=>d("coupon-prices"),className:`
                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                    ${c==="coupon-prices"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:"Coupon Prices"}),s.jsx("button",{type:"button",onClick:()=>d("membership-plans"),className:`
                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                    ${c==="membership-plans"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:"Monthly"})]})}),s.jsxs("div",{className:"mt-6",children:[c==="walkin-prices"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Walk-in Entry Prices"}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"adult_walkin_price",className:"block text-sm font-medium text-gray-700",children:"Adult Walk-in (RM)"}),s.jsx(re,{id:"adult_walkin_price",type:"number",step:"0.01",min:"0",required:!0,value:a.adult,onChange:y=>i({...a,adult:parseFloat(y.target.value)||0}),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"youth_walkin_price",className:"block text-sm font-medium text-gray-700",children:"Youth Walk-in (RM)"}),s.jsx(re,{id:"youth_walkin_price",type:"number",step:"0.01",min:"0",required:!0,value:a.youth,onChange:y=>i({...a,youth:parseFloat(y.target.value)||0}),className:"mt-1"})]})]})]}),c==="coupon-prices"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Coupon Prices"}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"adult_coupon_price",className:"block text-sm font-medium text-gray-700",children:"Adult Coupon Price (RM)"}),s.jsx(re,{id:"adult_coupon_price",type:"number",step:"0.01",min:"0",required:!0,value:o.adult,onChange:y=>l({...o,adult:parseFloat(y.target.value)||0}),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"youth_coupon_price",className:"block text-sm font-medium text-gray-700",children:"Youth Coupon Price (RM)"}),s.jsx(re,{id:"youth_coupon_price",type:"number",step:"0.01",min:"0",required:!0,value:o.youth,onChange:y=>l({...o,youth:parseFloat(y.target.value)||0}),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"coupon_max_uses",className:"block text-sm font-medium text-gray-700",children:"Maximum Uses Per Coupon"}),s.jsx(re,{id:"coupon_max_uses",type:"number",min:"1",required:!0,value:o.max_uses,onChange:y=>l({...o,max_uses:parseInt(y.target.value)||1}),className:"mt-1"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Number of times each coupon can be used before it expires"})]})]})]}),c==="membership-plans"&&s.jsx($M,{})]})]}),(c==="walkin-prices"||c==="coupon-prices")&&s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:s.jsxs(M,{type:"submit",disabled:r,children:[r?s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(jh,{className:"mr-2 h-4 w-4"}),"Save Pricing Settings"]})})]})})})}function FM(){const e=pr();return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"mb-8 border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs(Ft,{to:"/admin/settings",className:`
              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
              ${e.pathname.includes("/admin/settings")||e.pathname==="/admin"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[s.jsx(ko,{className:"inline-block mr-2 h-4 w-4"}),"Settings"]}),s.jsxs(Ft,{to:"/admin/pricing",className:`
              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
              ${e.pathname.includes("/admin/pricing")?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[s.jsx(Zd,{className:"inline-block mr-2 h-4 w-4"}),"Pricing"]}),s.jsxs(Ft,{to:"/admin/products",className:`
              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
              ${e.pathname.includes("/admin/products")?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[s.jsx(Ol,{className:"inline-block mr-2 h-4 w-4"}),"POS Products"]}),s.jsxs(Ft,{to:"/admin/users",className:`
              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
              ${e.pathname.includes("/admin/users")?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[s.jsx(xn,{className:"inline-block mr-2 h-4 w-4"}),"Users"]})]})}),s.jsxs(Tl,{children:[s.jsx(xe,{path:"/",element:s.jsx(tl,{to:"/admin/settings",replace:!0})}),s.jsx(xe,{path:"settings",element:s.jsx(PM,{})}),s.jsx(xe,{path:"pricing/*",element:s.jsx(LM,{})}),s.jsx(xe,{path:"products/*",element:s.jsx(EM,{})}),s.jsx(xe,{path:"users/*",element:s.jsx(AM,{})})]})]})}function UM({isOpen:e,onClose:t,onSubmit:r,shiftSummary:n,users:a,currentUserDisplayName:i}){const[o,l]=m.useState(!0),[c,d]=m.useState(!1),[u,p]=m.useState([]),[y,x]=m.useState({nextUserId:"",stockCounts:{}}),[b,f]=m.useState({cash:"",qr:"",bank_transfer:""}),[g,h]=m.useState(new Date);m.useEffect(()=>{const C=setInterval(()=>{h(new Date)},6e4);return()=>clearInterval(C)},[]),m.useEffect(()=>{e&&v()},[e]);const v=async()=>{try{const{data:C,error:R}=await I.from("products").select("id, name, stock").eq("active",!0).order("name");if(R)throw R;p(C||[]);const P=(C||[]).reduce((O,A)=>({...O,[A.id]:A.stock}),{});x(O=>({...O,stockCounts:P}))}catch(C){console.error("Error fetching products:",C),B.error("Error loading products")}finally{l(!1)}},w=async C=>{if(C.preventDefault(),!y.nextUserId){B.error("Please select the handover person");return}d(!0);try{await r({cashCollection:parseFloat(b.cash)||0,qrCollection:parseFloat(b.qr)||0,bankTransferCollection:parseFloat(b.bank_transfer)||0,nextUserId:y.nextUserId,stockCounts:y.stockCounts})}catch(R){console.error("Error submitting end shift:",R)}finally{d(!1)}},j=(C,R)=>{const P=parseInt(R)||0;x(O=>({...O,stockCounts:{...O.stockCounts,[C]:P}}))},N={cash:parseFloat(b.cash)||0,qr:parseFloat(b.qr)||0,bank_transfer:parseFloat(b.bank_transfer)||0},_={cash:n.total_cash-N.cash,qr:n.total_qr-N.qr,bank_transfer:n.total_bank_transfer-N.bank_transfer},k=_.cash+_.qr+_.bank_transfer;return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"End Shift"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center text-sm text-gray-500 space-y-1 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ay,{className:"h-4 w-4 mr-1.5"}),"Cashier: ",i]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ur,{className:"h-4 w-4 mr-1"}),H(g,"dd MMM yyyy")]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Yn,{className:"h-4 w-4 mr-1"}),H(g,"HH:mm")]})]})]}),s.jsx(M,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(at,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto",children:s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 shadow-sm border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Collections"}),s.jsxs("div",{className:"space-y-3 divide-y divide-gray-200",children:[s.jsxs("div",{className:"flex justify-between pt-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Member Payments"}),s.jsxs("span",{className:"text-sm font-medium",children:["RM ",n.member_payments.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between pt-3",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Walk-in Payments"}),s.jsxs("span",{className:"text-sm font-medium",children:["RM ",n.walk_in_payments.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between pt-3",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"POS Sales"}),s.jsxs("span",{className:"text-sm font-medium",children:["RM ",n.pos_sales.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between pt-3",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Coupon Sales"}),s.jsxs("span",{className:"text-sm font-medium",children:["RM ",n.coupon_sales.toFixed(2)]})]}),s.jsxs("div",{className:"pt-4 mt-3 border-t border-gray-300 flex justify-between",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:"Total Sales"}),s.jsxs("span",{className:"font-bold text-lg text-gray-900",children:["RM ",n.total_sales.toFixed(2)]})]}),s.jsxs("div",{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"font-medium text-gray-700 flex items-center",children:[s.jsx(Cn,{className:"h-4 w-4 mr-2 text-orange-500"}),"Cash Expected"]}),s.jsxs("span",{className:"font-semibold text-orange-600",children:["RM ",n.total_cash.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"font-medium text-gray-700 flex items-center",children:[s.jsx(Rr,{className:"h-4 w-4 mr-2 text-orange-500"}),"QR Expected"]}),s.jsxs("span",{className:"font-semibold text-orange-600",children:["RM ",n.total_qr.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"font-medium text-gray-700 flex items-center",children:[s.jsx(sl,{className:"h-4 w-4 mr-2 text-orange-500"}),"Bank Transfer Expected"]}),s.jsxs("span",{className:"font-semibold text-orange-600",children:["RM ",n.total_bank_transfer.toFixed(2)]})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 shadow-sm border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Handover Amount"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cash"}),s.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500 sm:text-sm",children:"RM"})}),s.jsx(re,{type:"number",step:"0.01",value:b.cash,onChange:C=>f({...b,cash:C.target.value}),className:"pl-12"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"QR Payments"}),s.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500 sm:text-sm",children:"RM"})}),s.jsx(re,{type:"number",step:"0.01",value:b.qr,onChange:C=>f({...b,qr:C.target.value}),className:"pl-12"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Transfers"}),s.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500 sm:text-sm",children:"RM"})}),s.jsx(re,{type:"number",step:"0.01",value:b.bank_transfer,onChange:C=>f({...b,bank_transfer:C.target.value}),className:"pl-12"})]})]}),s.jsxs("div",{className:"pt-2 mt-2 border-t",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Total Cash"}),s.jsxs("span",{className:"font-bold text-orange-600",children:["RM ",N.cash.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between mt-1",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Total QR"}),s.jsxs("span",{className:"font-bold text-orange-600",children:["RM ",N.qr.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between mt-1",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Total Bank Transfer"}),s.jsxs("span",{className:"font-bold text-orange-600",children:["RM ",N.bank_transfer.toFixed(2)]})]})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Variance Summary"}),s.jsxs("div",{className:"space-y-3 divide-y divide-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Cash Variance"}),s.jsxs("span",{className:`text-sm font-semibold ${_.cash===0?"text-green-600":_.cash<0?"text-yellow-600":"text-red-600"}`,children:["RM ",_.cash.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"QR Variance"}),s.jsxs("span",{className:`text-sm font-semibold ${_.qr===0?"text-green-600":_.qr<0?"text-yellow-600":"text-red-600"}`,children:["RM ",_.qr.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Bank Transfer Variance"}),s.jsxs("span",{className:`text-sm font-semibold ${_.bank_transfer===0?"text-green-600":_.bank_transfer<0?"text-yellow-600":"text-red-600"}`,children:["RM ",_.bank_transfer.toFixed(2)]})]}),s.jsxs("div",{className:"pt-4 mt-3 border-t border-gray-300 flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:"Total Variance"}),s.jsxs("span",{className:`font-bold text-lg ${k===0?"text-green-700":k<0?"text-yellow-700":"text-red-700"}`,children:["RM ",k.toFixed(2)]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Stock Count"}),o?s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:u.map(C=>s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:C.name}),s.jsx("div",{className:"mt-1",children:s.jsx(re,{type:"number",value:y.stockCounts[C.id],onChange:R=>j(C.id,R.target.value),min:"0"})})]})},C.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Handover to..."}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{required:!0,value:y.nextUserId,onChange:C=>x({...y,nextUserId:C.target.value}),className:"block w-full rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-base focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500",children:[s.jsx("option",{value:"",children:"Please select..."}),a.map(C=>s.jsx("option",{value:C.id,children:C.email},C.id))]}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(M,{type:"submit",disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(X1,{className:"mr-2 h-4 w-4"}),"End Shift"]})})})]})})]})}):null}function zM(){const e=Be(),t=Fe(f=>f.user),r=Fe(f=>f.signOut),n=(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Unknown User",[a,i]=m.useState(!0),[o,l]=m.useState(!1),[c,d]=m.useState({total_cash:0,total_qr:0,total_bank_transfer:0,total_sales:0,member_payments:0,walk_in_payments:0,pos_sales:0,coupon_sales:0}),[u,p]=m.useState([]);m.useEffect(()=>{y(),x()},[]);const y=async()=>{var f;try{const g=Ee(new Date),h=new Date(g.getFullYear(),g.getMonth(),g.getDate()),v=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59),{data:w}=await I.from("shifts").select("ended_at").order("ended_at",{ascending:!1}).limit(1),j=((f=w==null?void 0:w[0])==null?void 0:f.ended_at)||h.toISOString(),{data:N,error:_}=await I.from("payments").select("*").eq("user_id",t==null?void 0:t.id).gte("created_at",j).lte("created_at",v.toISOString());if(_)throw _;const k=N.reduce((C,R)=>{switch(C.total_sales+=R.amount,R.payment_method){case"cash":C.total_cash+=R.amount;break;case"qr":C.total_qr+=R.amount;break;case"bank_transfer":C.total_bank_transfer+=R.amount;break}switch(R.type){case"registration":case"renewal":C.member_payments+=R.amount;break;case"walk-in":C.walk_in_payments+=R.amount;break;case"pos":C.pos_sales+=R.amount;break;case"coupon":C.coupon_sales+=R.amount;break}return C},{total_cash:0,total_qr:0,total_bank_transfer:0,total_sales:0,member_payments:0,walk_in_payments:0,pos_sales:0,coupon_sales:0});d(k)}catch(g){console.error("Error fetching shift summary:",g),B.error("Error loading shift summary")}finally{i(!1)}},x=async()=>{try{const{data:f,error:g}=await I.rpc("get_active_users");if(g)throw g;const h=(f||[]).map(v=>({id:v.id,email:`${v.email} (${v.role})`}));p(h)}catch(f){console.error("Error fetching users:",f),B.error("Error loading users")}},b=async f=>{try{const{data:g,error:h}=await I.from("shifts").insert({user_id:t==null?void 0:t.id,next_user_id:f.nextUserId,cash_collection:f.cashCollection,qr_collection:f.qrCollection,bank_transfer_collection:f.bankTransferCollection,system_cash:c.total_cash,system_qr:c.total_qr,system_bank_transfer:c.total_bank_transfer,cash_variance:c.total_cash-f.cashCollection,qr_variance:c.total_qr-f.qrCollection,bank_transfer_variance:c.total_bank_transfer-f.bankTransferCollection,member_payments:c.member_payments,walk_in_payments:c.walk_in_payments,pos_sales:c.pos_sales,coupon_sales:c.coupon_sales,total_sales:c.total_sales}).select().single();if(h)throw h;const v=Object.entries(f.stockCounts).map(async([w,j])=>{const{data:N}=await I.from("products").select("stock").eq("id",w).single(),_=(N==null?void 0:N.stock)||0;return I.from("shift_stock_counts").insert({shift_id:g.id,product_id:w,counted_stock:j,system_stock:_,variance:j-_})});await Promise.all(v);for(const[w,j]of Object.entries(f.stockCounts)){const{error:N}=await I.from("products").update({stock:j}).eq("id",w);N&&console.error(`Error updating stock for product ${w}:`,N)}B.success("Shift ended successfully"),await r(),e("/login")}catch(g){console.error("Error ending shift:",g),B.error("Error ending shift")}};return a?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"End Shift"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center text-sm text-gray-500 mb-6 space-y-1 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ay,{className:"h-4 w-4 mr-1.5"}),"Cashier: ",n]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ur,{className:"h-4 w-4 mr-1.5"}),H(new Date,"dd MMM yyyy")]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Yn,{className:"h-4 w-4 mr-1.5"}),H(new Date,"HH:mm")]})]}),s.jsxs("div",{className:"border border-gray-200 bg-gray-50 rounded-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Shift Overview"}),s.jsxs("dl",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("dt",{className:"text-sm text-gray-600 flex items-center",children:[s.jsx(ry,{className:"h-4 w-4 mr-2 text-gray-500"}),"Total Sales"]}),s.jsxs("dd",{className:"text-sm font-medium text-gray-900",children:["RM ",c.total_sales.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[s.jsxs("dt",{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(Cn,{className:"h-4 w-4 mr-2 text-orange-500"}),"Cash Expected"]}),s.jsxs("dd",{className:"text-sm font-semibold text-orange-600",children:["RM ",c.total_cash.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("dt",{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(Rr,{className:"h-4 w-4 mr-2 text-orange-500"}),"QR Expected"]}),s.jsxs("dd",{className:"text-sm font-semibold text-orange-600",children:["RM ",c.total_qr.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("dt",{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(sl,{className:"h-4 w-4 mr-2 text-orange-500"}),"Bank Transfer Expected"]}),s.jsxs("dd",{className:"text-sm font-semibold text-orange-600",children:["RM ",c.total_bank_transfer.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Shift Summary"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Member Payments"}),s.jsxs("p",{className:"text-lg font-medium",children:["RM ",c.member_payments.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Walk-in Payments"}),s.jsxs("p",{className:"text-lg font-medium",children:["RM ",c.walk_in_payments.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"POS Sales"}),s.jsxs("p",{className:"text-lg font-medium",children:["RM ",c.pos_sales.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Coupon Sales"}),s.jsxs("p",{className:"text-lg font-medium",children:["RM ",c.coupon_sales.toFixed(2)]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Sales"}),s.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["RM ",c.total_sales.toFixed(2)]})]})]})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(M,{onClick:()=>l(!0),children:"End Shift"})})]})}),s.jsx(UM,{isOpen:o,onClose:()=>l(!1),onSubmit:b,shiftSummary:c,users:u,currentUserDisplayName:n})]})}function BM({children:e}){return Fe(r=>r.user)?s.jsx(s.Fragment,{children:e}):s.jsx(tl,{to:"/login",replace:!0})}function HM(){const[e,t]=m.useState([]),[r,n]=m.useState(!0),[a,i]=m.useState(""),o=Be(),l=Fe(f=>f.user),c=(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="superadmin";m.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:f,error:g}=await I.from("coupons").select("*").order("created_at",{ascending:!1});if(g)throw g;t(f||[])}catch{B.error("Error fetching coupons")}finally{n(!1)}},u=async(f,g)=>{if(g.stopPropagation(),!c){B.error("Only administrators can change coupon status");return}try{const{error:h}=await I.from("coupons").update({active:!f.active}).eq("id",f.id);if(h)throw h;t(e.map(v=>v.id===f.id?{...v,active:!v.active}:v)),B.success(`Coupon ${f.active?"disabled":"enabled"}`)}catch{B.error("Error updating coupon status")}},p=()=>{const f=e.map(({id:g,...h})=>({...h,active:h.active?"Yes":"No",created_at:new Date(h.created_at).toLocaleDateString(),valid_until:new Date(h.valid_until).toLocaleDateString()}));Br(f,"coupons.csv")},y=f=>{o("/coupons",{state:{couponCode:f.code}})},x=(f,g)=>{g.stopPropagation(),o(`/coupons/edit/${f.id}`)},b=e.filter(f=>f.code.toLowerCase().includes(a.toLowerCase())||f.owner_name&&f.owner_name.toLowerCase().includes(a.toLowerCase()));return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(M,{variant:"ghost",onClick:()=>o("/coupons"),children:[s.jsx(Tr,{className:"mr-2 h-4 w-4"}),"Back to Coupon Validation"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsx(re,{type:"text",placeholder:"Search by code or owner's name...",value:a,onChange:f=>i(f.target.value),className:"w-full"})}),s.jsx("div",{className:"flex space-x-4",children:c&&s.jsxs(s.Fragment,{children:[s.jsxs(M,{variant:"outline",onClick:p,children:[s.jsx(zr,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),s.jsxs(M,{onClick:()=>o("/coupons/new"),children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),"New Coupon"]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:r?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valid Until"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c&&s.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(f=>s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>y(f),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:f.code}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f.owner_name||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:f.type}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",f.price.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[f.uses," / ",f.max_uses]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(f.valid_until),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${f.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:f.active?"Active":"Disabled"})}),c&&s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx(M,{variant:"ghost",size:"sm",onClick:g=>x(f,g),className:"mr-2",children:s.jsx(ca,{className:"h-4 w-4"})}),s.jsx(M,{variant:"ghost",size:"sm",onClick:g=>u(f,g),children:f.active?s.jsx(Al,{className:"h-4 w-4 text-green-600"}):s.jsx(Il,{className:"h-4 w-4 text-gray-400"})})]})]},f.id))})]})})]})]})}const An=m.forwardRef(({className:e,...t},r)=>s.jsx("label",{ref:r,className:Tt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));An.displayName="Label";const Cp={adult:45,youth:35,max_uses:1};function Sv({onSuccess:e}){const{id:t}=la(),r=Be(),n=Fe(S=>S.user),a=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="superadmin",[i,o]=m.useState(!0),[l,c]=m.useState(!1),[d,u]=m.useState(!1),[p,y]=m.useState(null),[x,b]=m.useState({code:"",type:"adult",price:45,valid_until:H(new Date().setMonth(new Date().getMonth()+1),"yyyy-MM-dd"),max_uses:1,uses:0,active:!0,owner_name:""}),[f,g]=m.useState(Cp),[h,v]=m.useState(!1),[w,j]=m.useState("cash"),[N,_]=m.useState("");m.useEffect(()=>{k(),t?C():o(!1)},[t]);const k=async()=>{try{const{data:S,error:z}=await I.from("settings").select("value").eq("key","coupon_prices").single();if(z)if(z.code==="PGRST116"){const{error:D}=await I.from("settings").insert({key:"coupon_prices",value:Cp});D&&console.error("Error creating coupon price settings:",D)}else console.error("Error fetching coupon prices:",z);else if(S!=null&&S.value){const D=S.value;g(D),t||b(T=>({...T,price:D.adult,max_uses:D.max_uses||1}))}}catch(S){console.error("Error fetching coupon prices:",S)}},C=async()=>{try{const{data:S,error:z}=await I.from("coupons").select("*").eq("id",t).single();if(z)throw z;b({...S,valid_until:H(new Date(S.valid_until),"yyyy-MM-dd")})}catch{B.error("Error fetching coupon"),r("/coupons")}finally{o(!1)}},R=S=>{b({...x,type:S,price:S==="adult"?f.adult:f.youth})},P=async S=>{if(!S)return!1;try{const{data:z,error:D}=await I.from("coupons").select("id").eq("code",S.toUpperCase());if(D)throw D;return t?z.filter($=>$.id!==t).length>0:z.length>0}catch(z){return console.error("Error checking coupon code:",z),!1}},O=async S=>{b({...x,code:S.toUpperCase()}),_(""),S&&await P(S)&&_("This coupon code is already in use")},A=async S=>{if(S.preventDefault(),!t&&await P(x.code||"")){_("This coupon code is already in use");return}if(N){B.error(N);return}if(t){c(!0);try{const z={...x,valid_until:new Date(x.valid_until).toISOString(),price:x.type==="adult"?f.adult:f.youth,max_uses:f.max_uses},{error:D}=await I.from("coupons").update(z).eq("id",t);if(D)throw D;B.success("Coupon updated successfully"),e({code:x.code||"",discount_amount:x.type==="adult"?f.adult:f.youth,expiry_date:H(new Date(x.valid_until),"yyyy-MM-dd")})}catch(z){console.error("Error:",z),B.error(z.message||"Error updating coupon")}finally{c(!1)}}else y({...x,valid_until:new Date(x.valid_until).toISOString(),price:x.type==="adult"?f.adult:f.youth,max_uses:f.max_uses}),u(!0)},V=async()=>{if(!p)return null;try{const{data:S,error:z}=await I.from("coupons").insert(p).select().single();if(z)throw z.code==="23505"?new Error("This coupon code is already assigned. Please use a different code."):z;return await W(w,S.id),S}catch(S){throw console.error("Error creating coupon:",S),S}},Q=async S=>{if(!(!p||l)){c(!0),u(!1);try{console.log("Starting coupon creation...");const z=await V();if(!z){console.log("No coupon created, returning early");return}console.log("Coupon created successfully:",z),S?(console.log("Attempting to use coupon..."),e({code:z.code,discount_amount:z.type==="adult"?f.adult:f.youth,expiry_date:H(new Date(z.valid_until),"yyyy-MM-dd")}),console.log("Coupon usage completed"),B.success("Coupon created and applied successfully")):(console.log("Skipping coupon usage, navigating to list"),B.success("Coupon created successfully"),r("/coupons"))}catch(z){console.error("Error in finalizeCoupon:",z),B.error("Error creating coupon"),r("/coupons")}finally{c(!1)}}},W=async(S,z)=>{v(!0),j(S);try{const{data:D,error:T}=await I.from("payments").insert({amount:x.type==="adult"?f.adult:f.youth,type:"coupon",payment_method:S,coupon_id:z,user_id:n==null?void 0:n.id}).select().single();if(T)throw T;return!0}catch(D){throw console.error("Error processing payment:",D),D}finally{v(!1)}};return i?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(M,{variant:"ghost",onClick:()=>r("/coupons"),children:[s.jsx(Tr,{className:"mr-2 h-4 w-4"}),"Back to Coupon Validation"]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:t?"Edit Coupon":"New Coupon"}),s.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(An,{htmlFor:"code",children:"Coupon Code"}),s.jsx(re,{id:"code",type:"text",value:x.code,onChange:S=>O(S.target.value),placeholder:"Enter coupon code",required:!0,className:N?"border-red-500":""}),N&&s.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(hr,{className:"h-4 w-4 mr-1"}),N]})]}),s.jsxs("div",{children:[s.jsx(An,{htmlFor:"owner_name",className:"block text-sm font-medium text-gray-700",children:"Owner's Name"}),s.jsx(re,{id:"owner_name",value:x.owner_name,onChange:S=>b({...x,owner_name:S.target.value}),placeholder:"Enter coupon holder's name"})]}),s.jsxs("div",{children:[s.jsx(An,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Membership Type"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("label",{className:`
                    relative flex items-center justify-center p-4 border rounded-lg cursor-pointer
                    ${x.type==="adult"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                  `,children:[s.jsx("input",{type:"radio",name:"type",value:"adult",checked:x.type==="adult",onChange:()=>R("adult"),className:"sr-only"}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"block text-sm font-medium",children:"Adult"}),s.jsxs("span",{className:"block text-lg font-bold text-orange-600 mt-1",children:["RM ",f.adult.toFixed(2)]})]})]}),s.jsxs("label",{className:`
                    relative flex items-center justify-center p-4 border rounded-lg cursor-pointer
                    ${x.type==="youth"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                  `,children:[s.jsx("input",{type:"radio",name:"type",value:"youth",checked:x.type==="youth",onChange:()=>R("youth"),className:"sr-only"}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"block text-sm font-medium",children:"Youth"}),s.jsxs("span",{className:"block text-lg font-bold text-orange-600 mt-1",children:["RM ",f.youth.toFixed(2)]})]})]})]})]}),s.jsxs("div",{children:[s.jsx(An,{htmlFor:"valid_until",className:"block text-sm font-medium text-gray-700",children:"Valid Until"}),s.jsx(re,{id:"valid_until",type:"date",required:!0,value:x.valid_until,onChange:S=>b({...x,valid_until:S.target.value}),min:H(new Date,"yyyy-MM-dd")})]}),t&&a&&s.jsxs("div",{children:[s.jsx(An,{htmlFor:"uses",className:"block text-sm font-medium text-gray-700",children:"Current Uses"}),s.jsx(re,{id:"uses",type:"number",required:!0,value:x.uses,onChange:S=>b({...x,uses:parseInt(S.target.value,10)||0}),min:"0",max:x.max_uses}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:x.max_uses&&x.uses!==void 0?`${x.max_uses-x.uses} uses remaining out of ${x.max_uses} maximum`:""})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"active",type:"checkbox",checked:x.active,onChange:S=>b({...x,active:S.target.checked}),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),s.jsx(An,{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Coupon is active"})]}),!t&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsx("span",{children:"Coupon Price"}),s.jsxs("span",{children:["RM ",(x.type==="adult"?f.adult:f.youth).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-1",children:[s.jsx("span",{children:"Maximum Uses"}),s.jsx("span",{children:f.max_uses})]}),s.jsxs("div",{className:"flex items-center justify-between text-lg font-bold text-gray-900 mt-2 pt-2 border-t",children:[s.jsx("span",{children:"Total Payable"}),s.jsxs("span",{children:["RM ",(x.type==="adult"?f.adult:f.youth).toFixed(2)]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Payment Method"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("label",{className:`
                        relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                        ${w==="cash"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                      `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:w==="cash",onChange:()=>j("cash"),className:"sr-only"}),s.jsx(Cn,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Cash"})]}),s.jsxs("label",{className:`
                        relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                        ${w==="qr"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                      `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"qr",checked:w==="qr",onChange:()=>j("qr"),className:"sr-only"}),s.jsx(Rr,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"QR Payment"})]}),s.jsxs("label",{className:`
                        relative flex flex-col items-center p-4 border rounded-lg cursor-pointer
                        ${w==="bank_transfer"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"}
                      `,children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank_transfer",checked:w==="bank_transfer",onChange:()=>j("bank_transfer"),className:"sr-only"}),s.jsx(rs,{className:"h-8 w-8 mb-2 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Bank Transfer"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(M,{type:"button",variant:"outline",onClick:()=>r("/coupons"),children:"Cancel"}),s.jsx(M,{type:"submit",disabled:l||h||!!N,children:l||h?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Updating...":"Creating..."]}):t?"Update Coupon":"Create Coupon"})]})]})]})})]}),s.jsx(Lh,{open:d,modal:!0,onOpenChange:()=>{},children:s.jsx(Zl,{className:"bg-white rounded-lg shadow-xl w-full max-w-md [&>button]:hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx(tc,{className:"text-xl font-semibold text-gray-900 mb-4",children:"Use Coupon Now?"}),s.jsx(rc,{className:"text-gray-600 mb-6",children:"Would you like to use this coupon now?"}),s.jsxs(ec,{className:"flex justify-end space-x-4",children:[s.jsx(M,{variant:"outline",onClick:()=>Q(!1),disabled:l,children:"No, Skip"}),s.jsxs(M,{onClick:()=>Q(!0),disabled:l,children:[s.jsx(il,{className:"mr-2 h-4 w-4"}),"Yes, Use Now"]})]})]})})})]})}function WM(){const e=Be(),t=async r=>{try{const{data:n}=await I.from("coupons").select("*").eq("code",r.code).single();if(n){const{error:a}=await I.from("coupon_uses").insert({coupon_id:n.id,amount_saved:n.price});if(a)throw a;const{error:i}=await I.from("coupons").update({uses:n.uses+1}).eq("id",n.id);if(i)throw i}e("/coupons")}catch(n){console.error("Error recording coupon usage:",n),B.error("Error recording coupon usage"),e("/coupons")}};return s.jsx(Sv,{onSuccess:t})}function VM(){const e=Be();la();const t=Fe(i=>i.user),r=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="superadmin",[n,a]=m.useState(!0);return m.useEffect(()=>{const i=setTimeout(()=>{a(!1)},300);return()=>clearTimeout(i)},[]),n?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):r?s.jsx(Sv,{onSuccess:()=>e("/coupons")}):s.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(M,{variant:"ghost",onClick:()=>e("/coupons"),children:[s.jsx(Tr,{className:"mr-2 h-4 w-4"}),"Back to Coupon Validation"]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-red-600 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-700",children:"You don't have permission to edit coupons. This feature is restricted to administrators only."})]})]})}function qM(){const[e,t]=m.useState(!0),[r,n]=m.useState("daily"),[a,i]=m.useState(H(new Date,"yyyy-MM-dd")),[o,l]=m.useState(H(new Date,"yyyy-MM-dd")),[c,d]=m.useState([]);m.useEffect(()=>{u(r)},[r]),m.useEffect(()=>{b()},[a,o]);const u=g=>{const h=new Date;switch(g){case"daily":i(H(Xs(h),"yyyy-MM-dd")),l(H(Wl(h),"yyyy-MM-dd"));break;case"weekly":i(H(Ir(h,{weekStartsOn:1}),"yyyy-MM-dd")),l(H(Gl(h,{weekStartsOn:1}),"yyyy-MM-dd"));break;case"monthly":i(H(ql(h),"yyyy-MM-dd")),l(H(Vl(h),"yyyy-MM-dd"));break}},p=()=>{const g=new Date(a),h=H(Mi(g,1),"yyyy-MM-dd");i(h),l(h)},y=()=>{const g=new Date(a),h=H(Or(g,1),"yyyy-MM-dd");i(h),l(h)},x=g=>g.reduce((h,v)=>({system_cash:h.system_cash+v.system_cash,system_qr:h.system_qr+v.system_qr,system_bank_transfer:h.system_bank_transfer+v.system_bank_transfer,cash_collection:h.cash_collection+v.cash_collection,qr_collection:h.qr_collection+v.qr_collection,bank_transfer_collection:h.bank_transfer_collection+v.bank_transfer_collection,cash_variance:h.cash_variance+v.cash_variance,qr_variance:h.qr_variance+v.qr_variance,bank_transfer_variance:h.bank_transfer_variance+v.bank_transfer_variance}),{system_cash:0,system_qr:0,system_bank_transfer:0,cash_collection:0,qr_collection:0,bank_transfer_collection:0,cash_variance:0,qr_variance:0,bank_transfer_variance:0}),b=async()=>{t(!0);try{const g=Ee(new Date(a));g.setHours(0,0,0,0);const h=Ee(new Date(o));h.setHours(23,59,59,999),console.log("Fetching payments for date range:",{startDate:a,endDate:o,startTime:g.toISOString(),endTime:h.toISOString(),startTimeLocal:g.toLocaleString(),endTimeLocal:h.toLocaleString()});const{data:v,error:w}=await I.from("payments").select("*").gte("created_at",g.toISOString()).lte("created_at",h.toISOString()).order("created_at");if(w)throw w;console.log("Payments found:",(v==null?void 0:v.length)||0),v!=null&&v.length&&console.log("Sample payment:",{...v[0],created_at:new Date(v[0].created_at).toLocaleString()});const j={};let N=new Date(a);const _=new Date(o);for(;N<=_;){const P=H(N,"yyyy-MM-dd");j[P]={date:P,registrations:0,renewals:0,walkIns:0,posSales:0,couponSales:0,total:0,byMethod:{cash:0,qr:0,bank_transfer:0},shifts:[]},N=Or(N,1)}v==null||v.forEach(P=>{const O=Ee(new Date(P.created_at)),A=H(O,"yyyy-MM-dd");if(console.log("Processing payment:",{date:A,type:P.type,amount:P.amount,payment_method:P.payment_method,created_at:O.toLocaleString(),raw_created_at:P.created_at,paymentDateISO:O.toISOString()}),j[A]){switch(j[A].byMethod[P.payment_method]+=P.amount,j[A].total+=P.amount,P.type){case"registration":j[A].registrations+=P.amount;break;case"renewal":j[A].renewals+=P.amount;break;case"walk-in":console.log("Adding walk-in payment:",{amount:P.amount,currentTotal:j[A].walkIns,newTotal:j[A].walkIns+P.amount,type:P.type,date:A,paymentDate:O.toLocaleString(),paymentDateISO:O.toISOString()}),j[A].walkIns+=P.amount;break;case"pos":j[A].posSales+=P.amount;break;case"coupon":j[A].couponSales+=P.amount;break;default:console.log("Unknown payment type:",P.type)}console.log("Updated totals for date:",A,{walkIns:j[A].walkIns,total:j[A].total,byMethod:j[A].byMethod})}else console.log("Payment date not in range:",{date:A,startDate:a,endDate:o,paymentDate:O.toLocaleString(),paymentDateISO:O.toISOString()})});const k=new Set(v==null?void 0:v.map(P=>P.type));console.log("All payment types found:",Array.from(k)),console.log("Final grouped data:",Object.values(j).map(P=>({date:P.date,walkIns:P.walkIns,total:P.total,byMethod:P.byMethod,allTypes:{registrations:P.registrations,renewals:P.renewals,walkIns:P.walkIns,posSales:P.posSales,couponSales:P.couponSales}})));const{data:C,error:R}=await I.from("shifts").select(`
          id,
          ended_at,
          cash_collection,
          qr_collection,
          bank_transfer_collection,
          system_cash,
          system_qr,
          system_bank_transfer,
          cash_variance,
          qr_variance,
          bank_transfer_variance,
          user:user_id (
            email,
            name
          ),
          next_user:next_user_id (
            email,
            name
          )
        `).gte("ended_at",g.toISOString()).lte("ended_at",h.toISOString()).order("ended_at");if(R)throw R;C==null||C.forEach(P=>{const O=Ee(new Date(P.ended_at)),A=H(O,"yyyy-MM-dd");if(j[A]){const V=Array.isArray(P.user)&&P.user.length>0?P.user[0]:null,Q=Array.isArray(P.next_user)&&P.next_user.length>0?P.next_user[0]:null;j[A].shifts.push({...P,user:V,next_user:Q})}}),d(Object.values(j))}catch(g){console.error("Error fetching financial data:",g),B.error("Error fetching financial data")}finally{t(!1)}},f=()=>{const g=c.map(_=>({Date:H(new Date(_.date),"dd MMM yyyy"),Registrations:`RM ${_.registrations.toFixed(2)}`,Renewals:`RM ${_.renewals.toFixed(2)}`,"Walk-ins":`RM ${_.walkIns.toFixed(2)}`,"Point Of Sale":`RM ${_.posSales.toFixed(2)}`,"Coupon Sales":`RM ${_.couponSales.toFixed(2)}`,Cash:`RM ${_.byMethod.cash.toFixed(2)}`,QR:`RM ${_.byMethod.qr.toFixed(2)}`,"Bank Transfer":`RM ${_.byMethod.bank_transfer.toFixed(2)}`,Total:`RM ${_.total.toFixed(2)}`}));if(g.length===0){B.error("No data to export.");return}const h=Object.keys(g[0]),v=[h.join(","),...g.map(_=>h.map(k=>_[k]).join(","))].join(`
`),w=new Blob([v],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a"),N=URL.createObjectURL(w);j.setAttribute("href",N),j.setAttribute("download",`collections-${r}-${a}-${o}.csv`),j.style.visibility="hidden",document.body.appendChild(j),j.click(),document.body.removeChild(j)};return e?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(M,{variant:r==="daily"?"default":"outline",onClick:()=>n("daily"),children:"Daily"}),s.jsx(M,{variant:r==="weekly"?"default":"outline",onClick:()=>n("weekly"),children:"Weekly"}),s.jsx(M,{variant:r==="monthly"?"default":"outline",onClick:()=>n("monthly"),children:"Monthly"}),s.jsx(M,{variant:r==="custom"?"default":"outline",onClick:()=>n("custom"),children:"Custom"})]}),r==="custom"?s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),s.jsx(re,{type:"date",value:a,onChange:g=>i(g.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),s.jsx(re,{type:"date",value:o,onChange:g=>l(g.target.value),className:"mt-1"})]})]}):s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(M,{variant:"outline",onClick:p,children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsx("span",{className:"text-lg font-medium",children:r==="daily"?H(new Date(a),"dd MMM yyyy"):`${H(new Date(a),"dd MMM yyyy")} - ${H(new Date(o),"dd MMM yyyy")}`}),s.jsx(M,{variant:"outline",onClick:y,children:s.jsx(Ge,{className:"h-4 w-4"})})]})]}),s.jsxs(M,{variant:"outline",onClick:f,children:[s.jsx(zr,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),c.map(g=>s.jsxs("div",{className:"space-y-8",children:[r!=="daily"&&s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:H(new Date(g.date),"dd MMM yyyy")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Cash Collections"}),s.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["RM ",g.byMethod.cash.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"QR Collections"}),s.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["RM ",g.byMethod.qr.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Bank Transfer Collections"}),s.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["RM ",g.byMethod.bank_transfer.toFixed(2)]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Collection Categories"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Member Registrations"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["RM ",g.registrations.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Member Renewals"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["RM ",g.renewals.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Walk-in Payments"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["RM ",g.walkIns.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Point Of Sales"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["RM ",g.posSales.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Coupon Sales"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["RM ",g.couponSales.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Collections"}),s.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["RM ",g.total.toFixed(2)]})]})]})]}),g.shifts.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Shift Records"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cashier"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Handover To"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collection Type"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"System Total"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Handover Amount"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variance"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[g.shifts.map(h=>{var v,w,j,N;return s.jsxs(We.Fragment,{children:[s.jsxs("tr",{children:[s.jsx("td",{rowSpan:3,className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(new Date(h.ended_at),"HH:mm")}),s.jsx("td",{rowSpan:3,className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((v=h.user)==null?void 0:v.name)||((w=h.user)==null?void 0:w.email)||"Unknown"}),s.jsx("td",{rowSpan:3,className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((j=h.next_user)==null?void 0:j.name)||((N=h.next_user)==null?void 0:N.email)||"Unknown"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Cash"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",h.system_cash.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",h.cash_collection.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${h.cash_variance>0?"bg-red-100 text-red-800":h.cash_variance<0?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[h.cash_variance>0?"+":"",h.cash_variance.toFixed(2)]})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"QR"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",h.system_qr.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",h.qr_collection.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${h.qr_variance>0?"bg-red-100 text-red-800":h.qr_variance<0?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[h.qr_variance>0?"+":"",h.qr_variance.toFixed(2)]})})]}),s.jsxs("tr",{className:"border-b-4 border-gray-200",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Bank Transfer"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",h.system_bank_transfer.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",h.bank_transfer_collection.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${h.bank_transfer_variance>0?"bg-red-100 text-red-800":h.bank_transfer_variance<0?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[h.bank_transfer_variance>0?"+":"",h.bank_transfer_variance.toFixed(2)]})})]})]},h.id)}),g.shifts.length>0&&s.jsxs(We.Fragment,{children:[s.jsxs("tr",{className:"bg-gray-50 font-medium",children:[s.jsx("td",{colSpan:3,className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Subtotal"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Cash"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",x(g.shifts).system_cash.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",x(g.shifts).cash_collection.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${x(g.shifts).cash_variance>0?"bg-red-100 text-red-800":x(g.shifts).cash_variance<0?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[x(g.shifts).cash_variance>0?"+":"",x(g.shifts).cash_variance.toFixed(2)]})})]}),s.jsxs("tr",{className:"bg-gray-50 font-medium",children:[s.jsx("td",{colSpan:3}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"QR"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",x(g.shifts).system_qr.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",x(g.shifts).qr_collection.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${x(g.shifts).qr_variance>0?"bg-red-100 text-red-800":x(g.shifts).qr_variance<0?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[x(g.shifts).qr_variance>0?"+":"",x(g.shifts).qr_variance.toFixed(2)]})})]}),s.jsxs("tr",{className:"bg-gray-50 font-medium",children:[s.jsx("td",{colSpan:3}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Bank Transfer"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",x(g.shifts).system_bank_transfer.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",x(g.shifts).bank_transfer_collection.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${x(g.shifts).bank_transfer_variance>0?"bg-red-100 text-red-800":x(g.shifts).bank_transfer_variance<0?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[x(g.shifts).bank_transfer_variance>0?"+":"",x(g.shifts).bank_transfer_variance.toFixed(2)]})})]})]}),g.shifts.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No shift records found for this date"})})]})]})})]})]},g.date))]})}function GM(){const[e,t]=m.useState(!0),[r,n]=m.useState("daily"),[a,i]=m.useState(H(new Date,"yyyy-MM-dd")),[o,l]=m.useState(H(new Date,"yyyy-MM-dd")),[c,d]=m.useState([]),[u,p]=m.useState([]),[y]=m.useState(10);m.useEffect(()=>{x(r)},[r]),m.useEffect(()=>{g()},[a,o]);const x=v=>{const w=new Date;switch(v){case"daily":i(H(Xs(w),"yyyy-MM-dd")),l(H(Wl(w),"yyyy-MM-dd"));break;case"weekly":i(H(Ir(w,{weekStartsOn:1}),"yyyy-MM-dd")),l(H(Gl(w,{weekStartsOn:1}),"yyyy-MM-dd"));break;case"monthly":i(H(ql(w),"yyyy-MM-dd")),l(H(Vl(w),"yyyy-MM-dd"));break}},b=()=>{const v=new Date(a),w=H(Mi(v,1),"yyyy-MM-dd");i(w),l(w)},f=()=>{const v=new Date(a),w=H(Or(v,1),"yyyy-MM-dd");i(w),l(w)},g=async()=>{t(!0);try{const v=Ee(new Date(a));v.setHours(0,0,0,0);const w=Ee(new Date(o));w.setHours(23,59,59,999);const{data:j,error:N}=await I.from("payments").select("created_at, amount, items").eq("type","pos").gte("created_at",v.toISOString()).lte("created_at",w.toISOString());if(N)throw N;const{data:_,error:k}=await I.from("products").select("id, name, stock");if(k)throw k;const C={};let R=new Date(a);const P=new Date(o);for(;R<=P;){const A=H(R,"yyyy-MM-dd");C[A]={date:A,total_sales:0,total_items:0,products:{}},R=Or(R,1)}const O={};_.forEach(A=>{O[A.id]={id:A.id,name:A.name,total_quantity:0,total_revenue:0,current_stock:A.stock}}),j==null||j.forEach(A=>{const V=H(Ee(new Date(A.created_at)),"yyyy-MM-dd");C[V]&&(C[V].total_sales+=A.amount,A.items&&A.items.forEach(Q=>{C[V].products[Q.product_name]||(C[V].products[Q.product_name]={quantity:0,revenue:0}),C[V].products[Q.product_name].quantity+=Q.quantity,C[V].products[Q.product_name].revenue+=Q.price*Q.quantity,C[V].total_items+=Q.quantity;const W=_.find(S=>S.name===Q.product_name);W&&(O[W.id].total_quantity+=Q.quantity,O[W.id].total_revenue+=Q.price*Q.quantity)}))}),d(Object.values(C)),p(Object.values(O))}catch(v){console.error("Error fetching sales data:",v),B.error("Error fetching sales data")}finally{t(!1)}},h=()=>{const v=c.map(w=>({Date:H(new Date(w.date),"dd MMM yyyy"),"Total Items":w.total_items,"Total Sales":`RM ${w.total_sales.toFixed(2)}`,...Object.entries(w.products).reduce((j,[N,_])=>({...j,[`${N} Quantity`]:_.quantity,[`${N} Revenue`]:`RM ${_.revenue.toFixed(2)}`}),{})}));Br(v,`sales-${r}-${a}-${o}.csv`)};return e?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(M,{variant:r==="daily"?"default":"outline",onClick:()=>n("daily"),children:"Daily"}),s.jsx(M,{variant:r==="weekly"?"default":"outline",onClick:()=>n("weekly"),children:"Weekly"}),s.jsx(M,{variant:r==="monthly"?"default":"outline",onClick:()=>n("monthly"),children:"Monthly"}),s.jsx(M,{variant:r==="custom"?"default":"outline",onClick:()=>n("custom"),children:"Custom"})]}),r==="custom"?s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),s.jsx(re,{type:"date",value:a,onChange:v=>i(v.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),s.jsx(re,{type:"date",value:o,onChange:v=>l(v.target.value),className:"mt-1"})]})]}):s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(M,{variant:"outline",onClick:b,children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsx("span",{className:"text-lg font-medium",children:r==="daily"?H(new Date(a),"dd MMM yyyy"):`${H(new Date(a),"dd MMM yyyy")} - ${H(new Date(o),"dd MMM yyyy")}`}),s.jsx(M,{variant:"outline",onClick:f,children:s.jsx(Ge,{className:"h-4 w-4"})})]})]}),s.jsxs(M,{variant:"outline",onClick:h,children:[s.jsx(zr,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),c.map(v=>s.jsxs("div",{className:"space-y-8",children:[r!=="daily"&&s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:H(new Date(v.date),"dd MMM yyyy")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Sales"}),s.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["RM ",v.total_sales.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Items Sold"}),s.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:v.total_items})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Low Stock Items"}),s.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:u.filter(w=>w.current_stock<=y).length})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Product Performance"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Units Sold"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance Stock"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[u.map(w=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.total_quantity}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",w.total_revenue.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.current_stock}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.current_stock<=y?s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Low Stock"}):s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"In Stock"})})]},w.id)),u.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No product data available"})})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sales by Product"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[Object.entries(v.products).map(([w,j])=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.quantity}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",j.revenue.toFixed(2)]})]},w)),Object.keys(v.products).length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:"No sales data for this period"})}),Object.keys(v.products).length>0&&s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Total"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:v.total_items}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-orange-600",children:["RM ",v.total_sales.toFixed(2)]})]})]})]})})]})]},v.date))]})}function YM(){const[e,t]=m.useState(!0),[r,n]=m.useState("daily"),[a,i]=m.useState(H(new Date,"yyyy-MM-dd")),[o,l]=m.useState(H(new Date,"yyyy-MM-dd")),[c,d]=m.useState([]),[u,p]=m.useState({totalMembers:0,activeMembers:0,expiringNext30Days:0});m.useEffect(()=>{y(r)},[r]),m.useEffect(()=>{x(),b()},[a,o]);const y=g=>{const h=new Date;switch(g){case"daily":i(H(Xs(h),"yyyy-MM-dd")),l(H(Wl(h),"yyyy-MM-dd"));break;case"weekly":i(H(Ir(h,{weekStartsOn:1}),"yyyy-MM-dd")),l(H(Gl(h,{weekStartsOn:1}),"yyyy-MM-dd"));break;case"monthly":i(H(ql(h),"yyyy-MM-dd")),l(H(Vl(h),"yyyy-MM-dd"));break}},x=async()=>{t(!0);try{const{data:g,error:h}=await I.from("members").select("created_at, type").gte("created_at",`${a}T00:00:00`).lte("created_at",`${o}T23:59:59`);if(h)throw h;const{data:v,error:w}=await I.from("payments").select("created_at, member_id").eq("type","renewal").gte("created_at",`${a}T00:00:00`).lte("created_at",`${o}T23:59:59`);if(w)throw w;const j=g.reduce((N,_)=>{const k=H(new Date(_.created_at),"yyyy-MM-dd");return N[k]||(N[k]={date:k,newMembers:{adult:0,youth:0,total:0},renewals:{adult:0,youth:0,total:0},statusDistribution:{active:0,grace:0,expired:0,suspended:0}}),N[k].newMembers[_.type]++,N[k].newMembers.total++,N},{});v.forEach(N=>{const _=H(new Date(N.created_at),"yyyy-MM-dd");j[_]&&j[_].renewals.total++}),d(Object.values(j))}catch{B.error("Error fetching membership data")}finally{t(!1)}},b=async()=>{try{const{count:g}=await I.from("members").select("*",{count:"exact"}),{count:h}=await I.from("members").select("*",{count:"exact"}).eq("status","active"),v=new Date;v.setDate(v.getDate()+30);const{count:w}=await I.from("members").select("*",{count:"exact"}).eq("status","active").lte("expiry_date",v.toISOString()).gte("expiry_date",new Date().toISOString());p({totalMembers:g||0,activeMembers:h||0,expiringNext30Days:w||0})}catch{B.error("Error fetching current statistics")}},f=()=>{const g=c.map(h=>({Date:H(new Date(h.date),"dd MMM yyyy"),"New Adult Members":h.newMembers.adult,"New Youth Members":h.newMembers.youth,"Total New Members":h.newMembers.total,Renewals:h.renewals.total}));Br(g,`membership-${r}-${a}-${o}.csv`)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Members"}),s.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:u.totalMembers}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[s.jsx(xn,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Currently registered"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Active Members"}),s.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:u.activeMembers}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[s.jsx(eu,{className:"mr-2 h-4 w-4"}),s.jsxs("span",{children:[(u.activeMembers/u.totalMembers*100).toFixed(1),"% of total"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Expiring Soon"}),s.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:u.expiringNext30Days}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-yellow-600",children:[s.jsx(lN,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Next 30 days"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 items-end justify-between mb-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(M,{variant:r==="daily"?"default":"outline",onClick:()=>n("daily"),children:"Daily"}),s.jsx(M,{variant:r==="weekly"?"default":"outline",onClick:()=>n("weekly"),children:"Weekly"}),s.jsx(M,{variant:r==="monthly"?"default":"outline",onClick:()=>n("monthly"),children:"Monthly"}),s.jsx(M,{variant:r==="custom"?"default":"outline",onClick:()=>n("custom"),children:"Custom"})]}),r==="custom"&&s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),s.jsx(re,{type:"date",value:a,onChange:g=>i(g.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),s.jsx(re,{type:"date",value:o,onChange:g=>l(g.target.value),className:"mt-1"})]})]})]}),s.jsxs(M,{variant:"outline",onClick:f,children:[s.jsx(zr,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),e?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"New Adult Members"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"New Youth Members"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total New Members"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Renewals"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[c.map(g=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H(new Date(g.date),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.newMembers.adult}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.newMembers.youth}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-orange-600",children:g.newMembers.total}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.renewals.total})]},g.date)),c.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No membership data found for the selected period"})})]}),c.length>0&&s.jsx("tfoot",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Total"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.reduce((g,h)=>g+h.newMembers.adult,0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.reduce((g,h)=>g+h.newMembers.youth,0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-orange-600",children:c.reduce((g,h)=>g+h.newMembers.total,0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.reduce((g,h)=>g+h.renewals.total,0)})]})})]})})]})]})}function QM(){const[e,t]=m.useState(!0),[r,n]=m.useState("daily"),[a,i]=m.useState(H(new Date,"yyyy-MM-dd")),[o,l]=m.useState(H(new Date,"yyyy-MM-dd")),[c,d]=m.useState([]);m.useEffect(()=>{u(r)},[r]),m.useEffect(()=>{p()},[a,o]);const u=x=>{const b=new Date;switch(x){case"daily":i(H(Xs(b),"yyyy-MM-dd")),l(H(Wl(b),"yyyy-MM-dd"));break;case"weekly":i(H(Ir(b,{weekStartsOn:1}),"yyyy-MM-dd")),l(H(Gl(b,{weekStartsOn:1}),"yyyy-MM-dd"));break;case"monthly":i(H(ql(b),"yyyy-MM-dd")),l(H(Vl(b),"yyyy-MM-dd"));break}},p=async()=>{t(!0);try{const{data:x,error:b}=await I.from("check_ins").select("*").gte("check_in_time",`${a}T00:00:00`).lte("check_in_time",`${o}T23:59:59`).order("check_in_time");if(b)throw b;const f=x.reduce((g,h)=>{const v=H(new Date(h.check_in_time),"yyyy-MM-dd");return g[v]||(g[v]={date:v,members:0,walkIns:0,total:0}),h.type==="member"?g[v].members++:g[v].walkIns++,g[v].total++,g},{});d(Object.values(f))}catch{B.error("Error fetching attendance data")}finally{t(!1)}},y=()=>{const x=c.map(b=>({Date:H(new Date(b.date),"dd MMM yyyy"),Members:b.members,"Walk-ins":b.walkIns,Total:b.total}));Br(x,`attendance-${r}-${a}-${o}.csv`)};return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 items-end justify-between mb-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(M,{variant:r==="daily"?"default":"outline",onClick:()=>n("daily"),children:"Daily"}),s.jsx(M,{variant:r==="weekly"?"default":"outline",onClick:()=>n("weekly"),children:"Weekly"}),s.jsx(M,{variant:r==="monthly"?"default":"outline",onClick:()=>n("monthly"),children:"Monthly"}),s.jsx(M,{variant:r==="custom"?"default":"outline",onClick:()=>n("custom"),children:"Custom"})]}),r==="custom"&&s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),s.jsx(re,{type:"date",value:a,onChange:x=>i(x.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),s.jsx(re,{type:"date",value:o,onChange:x=>l(x.target.value),className:"mt-1"})]})]})]}),s.jsxs(M,{variant:"outline",onClick:y,children:[s.jsx(zr,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),e?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Members"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Walk-ins"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[c.map(x=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H(new Date(x.date),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.members}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.walkIns}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-orange-600",children:x.total})]},x.date)),c.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No attendance data found for the selected period"})})]}),c.length>0&&s.jsx("tfoot",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Total"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.reduce((x,b)=>x+b.members,0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.reduce((x,b)=>x+b.walkIns,0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-orange-600",children:c.reduce((x,b)=>x+b.total,0)})]})})]})})]})})}function KM(){const e=pr(),t=Fe(n=>n.user),r=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="superadmin";return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Reports"}),s.jsx("div",{className:"mb-8 border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs(Ft,{to:"/reports/financial",className:`
              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
              ${e.pathname.includes("/financial")||e.pathname==="/reports"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[s.jsx(rs,{className:"inline-block mr-2 h-4 w-4"}),"Collections"]}),s.jsxs(Ft,{to:"/reports/sales",className:`
              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
              ${e.pathname.includes("/sales")?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[s.jsx(xi,{className:"inline-block mr-2 h-4 w-4"}),"Point of Sales"]}),r&&s.jsxs(s.Fragment,{children:[s.jsxs(Ft,{to:"/reports/membership",className:`
                  whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                  ${e.pathname.includes("/membership")?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[s.jsx(xn,{className:"inline-block mr-2 h-4 w-4"}),"Membership"]}),s.jsxs(Ft,{to:"/reports/attendance",className:`
                  whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                  ${e.pathname.includes("/attendance")?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[s.jsx(Xd,{className:"inline-block mr-2 h-4 w-4"}),"Attendance"]})]})]})}),s.jsxs(Tl,{children:[s.jsx(xe,{path:"/",element:s.jsx(tl,{to:"/reports/financial",replace:!0})}),s.jsx(xe,{path:"financial",element:s.jsx(qM,{})}),s.jsx(xe,{path:"sales",element:s.jsx(GM,{})}),r&&s.jsxs(s.Fragment,{children:[s.jsx(xe,{path:"membership",element:s.jsx(YM,{})}),s.jsx(xe,{path:"attendance",element:s.jsx(QM,{})})]}),s.jsx(xe,{path:"*",element:s.jsx(tl,{to:"/reports/financial",replace:!0})})]})]})}function JM(){const[e,t]=m.useState(""),[r,n]=m.useState(""),[a,i]=m.useState(!1),o=Be();m.useEffect(()=>{const c=window.location.hash;(!c||!c.includes("type=recovery"))&&(B.error("Invalid password reset link"),o("/login"))},[o]);const l=async c=>{if(c.preventDefault(),e!==r){B.error("Passwords do not match");return}if(e.length<8){B.error("Password must be at least 8 characters long");return}i(!0);try{const{error:d}=await I.auth.updateUser({password:e});if(d)throw d;B.success("Password updated successfully"),o("/login")}catch(d){console.error("Error resetting password:",d),B.error(d.message||"Error resetting password")}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[s.jsxs("div",{className:"flex flex-col items-center mb-6",children:[s.jsx(Mh,{className:"mb-1 h-[130px]",showText:!1,size:"large"}),s.jsx("p",{className:"text-gray-600",children:"Reset Your Password"})]}),s.jsxs("form",{onSubmit:l,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),s.jsx(re,{id:"password",type:"password",value:e,onChange:c=>t(c.target.value),required:!0,disabled:a,autoComplete:"new-password",className:"mt-1",placeholder:"Enter your new password"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),s.jsx(re,{id:"confirmPassword",type:"password",value:r,onChange:c=>n(c.target.value),required:!0,disabled:a,autoComplete:"new-password",className:"mt-1",placeholder:"Confirm your new password"})]}),s.jsx(M,{type:"submit",className:"w-full",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Resetting Password..."]}):"Reset Password"})]})]})})}const wr=5;function XM(){const[e,t]=m.useState(H(new Date,"yyyy-MM-dd")),[r,n]=m.useState(!0),[a,i]=m.useState(null),[o,l]=m.useState([]),[c,d]=m.useState([]),[u,p]=m.useState([]),[y,x]=m.useState(1),[b,f]=m.useState(1),[g,h]=m.useState([]),[v,w]=m.useState(1);m.useEffect(()=>{j(),x(1),f(1),w(1)},[e]);const j=async()=>{var T,$;n(!0),i(null),l([]),d([]),p([]),h([]);try{const U=Ee(new Date(e));U.setHours(0,0,0,0);const E=Ee(new Date(e));E.setHours(23,59,59,999);const q=U.toISOString(),X=E.toISOString(),[J,L,F,G,Z,ee,ne]=await Promise.all([I.from("payments").select("*, user:user_id(id, name, email)").gte("created_at",q).lte("created_at",X),I.from("check_ins").select("type",{count:"exact"}).gte("check_in_time",q).lte("check_in_time",X),I.from("members").select("id, member_id, name, phone, photo_url",{count:"exact"}).gte("created_at",q).lte("created_at",X),I.from("grace_period_access").select("*, member:members(name)").gte("check_in_time",q).lte("check_in_time",X),I.from("shifts").select("*, user:user_id(id, name, email)").gte("ended_at",q).lte("ended_at",X).order("ended_at",{ascending:!0}),I.from("shifts").select("ended_at").lt("ended_at",q).order("ended_at",{ascending:!1}).limit(1),I.from("check_ins").select("id, check_in_time, name").eq("type","walk-in").gte("check_in_time",q).lte("check_in_time",X).order("check_in_time",{ascending:!1})]);if(J.error)throw J.error;if(L.error)throw L.error;if(F.error)throw F.error;if(G.error)throw G.error;if(Z.error)throw Z.error;if(ee.error)throw ee.error;if(ne.error)throw ne.error;const te=Z.data||[],Y=(T=ee.data)==null?void 0:T[0],ie=[];let le=(Y==null?void 0:Y.ended_at)||q;te.forEach(ae=>{ie.push({start:le,end:ae.ended_at,shiftData:ae}),le=ae.ended_at}),new Date(le)<E&&ie.push({start:le,end:X,shiftData:null});const he=J.data||[],fe=ie.map(ae=>{var Qe,It,He,Pn,we,Ke;return{shiftId:((Qe=ae.shiftData)==null?void 0:Qe.id)||null,userId:((It=ae.shiftData)==null?void 0:It.user_id)||null,userName:((Pn=(He=ae.shiftData)==null?void 0:He.user)==null?void 0:Pn.name)||((Ke=(we=ae.shiftData)==null?void 0:we.user)==null?void 0:Ke.email)||(ae.shiftData?"Unknown User":null),startTime:ae.start,endTime:ae.end,cashCollections:0,qrCollections:0,bankTransferCollections:0,totalSales:0}});he.forEach(ae=>{const Qe=new Date(ae.created_at).toISOString(),It=fe.findIndex(He=>Qe>He.startTime&&Qe<=He.endTime);if(It!==-1){const He=fe[It];He.totalSales+=ae.amount,ae.payment_method==="cash"&&(He.cashCollections+=ae.amount),ae.payment_method==="qr"&&(He.qrCollections+=ae.amount),ae.payment_method==="bank_transfer"&&(He.bankTransferCollections+=ae.amount)}}),p(fe);let ce={totalSales:0,totalCheckIns:0,memberCheckIns:0,walkInCheckIns:0,newMembers:0,membershipRevenue:0,walkInRevenue:0,posRevenue:0,couponRevenue:0,cashCollections:0,qrCollections:0,bankTransferCollections:0,renewals:0,posItemsSold:0};he.forEach(ae=>{ce.totalSales+=ae.amount,(ae.type==="registration"||ae.type==="renewal")&&(ce.membershipRevenue+=ae.amount),ae.type==="walk-in"&&(ce.walkInRevenue+=ae.amount),ae.type==="pos"&&(ce.posRevenue+=ae.amount),ae.type==="coupon"&&(ce.couponRevenue+=ae.amount),ae.payment_method==="cash"&&(ce.cashCollections+=ae.amount),ae.payment_method==="qr"&&(ce.qrCollections+=ae.amount),ae.payment_method==="bank_transfer"&&(ce.bankTransferCollections+=ae.amount),ae.type==="renewal"&&(ce.renewals+=1),ae.type==="pos"&&ae.items&&(ce.posItemsSold+=ae.items.reduce((Qe,It)=>Qe+(It.quantity||0),0))}),ce.totalCheckIns=L.count||0;const De=L.data||[];ce.memberCheckIns=De.filter(ae=>ae.type==="member").length,ce.walkInCheckIns=De.filter(ae=>ae.type==="walk-in").length,h(ne.data||[]),ce.walkInCheckIns=(($=ne.data)==null?void 0:$.length)||0,ce.memberCheckIns=ce.totalCheckIns-ce.walkInCheckIns,ce.newMembers=F.count||0,l(F.data||[]);const Ie=(G.data||[]).map(ae=>{var Qe;return{...ae,member_name:(Qe=ae.member)==null?void 0:Qe.name}});d(Ie),i(ce)}catch(U){console.error("Error fetching daily summary:",U),B.error(`Failed to load data: ${U.message}`)}finally{n(!1)}},N=T=>{const $=new Date(e+"T00:00:00"),U=T===1?Or($,1):Mi($,1);t(H(U,"yyyy-MM-dd"))},_=()=>{const T=new Date(e+"T00:00:00"),$=Or(T,1);return lC($)},k=T=>{try{return H(new Date(T),"hh:mm a")}catch{return"Invalid Time"}},C=T=>{try{return H(new Date(T),"dd MMM yy")}catch{return"Invalid Date"}},R=T=>`RM ${T.toFixed(2)}`,P=Math.ceil(o.length/wr),O=o.slice((y-1)*wr,y*wr),A=Math.ceil(c.length/wr),V=c.slice((b-1)*wr,b*wr),Q=Math.ceil(g.length/wr),W=g.slice((v-1)*wr,v*wr),S=T=>{T>=1&&T<=P&&x(T)},z=T=>{T>=1&&T<=A&&f(T)},D=T=>{T>=1&&T<=Q&&w(T)};return s.jsxs("div",{className:"space-y-6 pb-8",children:[" ",s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Daily Summary"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(M,{variant:"outline",size:"icon",onClick:()=>N(-1),className:"h-9 w-9",children:s.jsx(qe,{className:"h-4 w-4"})}),s.jsxs("div",{className:"relative",children:[s.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),s.jsx(re,{type:"date",value:e,onChange:T=>t(T.target.value),className:"pl-10 h-9 text-sm w-40",max:H(new Date,"yyyy-MM-dd")})]}),s.jsx(M,{variant:"outline",size:"icon",onClick:()=>N(1),disabled:_(),className:"h-9 w-9",children:s.jsx(Ge,{className:"h-4 w-4"})})]})]}),r?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx(al,{className:"h-8 w-8 animate-spin text-orange-600"})}):a?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(Cn,{className:"h-4 w-4 mr-2"})," Total Sales"]}),s.jsx("div",{className:"text-2xl font-bold mt-1",children:R(a.totalSales)})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(eu,{className:"h-4 w-4 mr-2"})," Total Check-ins"]}),s.jsx("div",{className:"text-2xl font-bold mt-1",children:a.totalCheckIns}),s.jsxs("div",{className:"text-xs text-gray-600",children:["(",a.memberCheckIns," Members / ",a.walkInCheckIns," Walk-ins)"]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(sy,{className:"h-4 w-4 mr-2"})," New Members"]}),s.jsx("div",{className:"text-2xl font-bold mt-1",children:a.newMembers})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[" ",s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow flex flex-col",children:[s.jsxs("h3",{className:"text-base font-semibold mb-3 flex items-center",children:[s.jsx(xn,{className:"h-5 w-5 mr-2 text-green-600"})," Newly Registered Members (",o.length,")"]}),o.length===0?s.jsx("p",{className:"text-sm text-gray-500 flex-grow",children:"No new members registered on this day."}):s.jsxs(s.Fragment,{children:[s.jsxs("ul",{className:"space-y-2 flex-grow text-sm min-h-[150px]",children:[" ",O.map(T=>s.jsxs("li",{className:"flex items-center space-x-3 py-1.5 border-b border-gray-100 last:border-b-0",children:[T.photo_url?s.jsx("img",{src:T.photo_url,alt:T.name||"Member",className:"h-8 w-8 rounded-full object-cover flex-shrink-0"}):s.jsx(eN,{className:"h-8 w-8 text-gray-400 flex-shrink-0"}),s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsx(Ft,{to:`/members/${T.id}`,className:"font-medium hover:text-orange-600 truncate block",children:T.name||"N/A"}),s.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["ID: ",T.member_id]})]}),s.jsx("span",{className:"text-gray-500 text-xs flex-shrink-0",children:T.phone||"No phone"})]},T.id))]}),P>1&&s.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t border-gray-100 text-xs",children:[s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>S(y-1),disabled:y===1,className:"px-2 py-1",children:[s.jsx(qe,{className:"h-3 w-3 mr-1"})," Prev"]}),s.jsxs("span",{children:["Page ",y," of ",P]}),s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>S(y+1),disabled:y===P,className:"px-2 py-1",children:["Next ",s.jsx(Ge,{className:"h-3 w-3 ml-1"})]})]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow flex flex-col",children:[s.jsxs("h3",{className:"text-base font-semibold mb-3 flex items-center",children:[s.jsx(Qs,{className:"h-5 w-5 mr-2 text-blue-600"})," Grace Period Access (",c.length,")"]}),c.length===0?s.jsx("p",{className:"text-sm text-gray-500 flex-grow",children:"No grace period access recorded."}):s.jsxs(s.Fragment,{children:[s.jsxs("ul",{className:"space-y-2 flex-grow text-sm min-h-[150px]",children:[" ",V.map(T=>s.jsxs("li",{className:"flex justify-between items-center py-1.5 border-b border-gray-100 last:border-b-0",children:[s.jsx(Ft,{to:`/members/${T.member_id}`,className:"hover:text-orange-600 truncate mr-2",children:T.member_name||"Unknown Member"}),s.jsxs("div",{className:"text-right text-xs flex-shrink-0",children:[s.jsxs("span",{className:"text-gray-500 block",children:["Checked in: ",k(T.check_in_time)]}),s.jsxs("span",{className:"text-red-500 text-xs block",children:["Expired: ",C(T.expiry_date)]})]})]},T.id))]}),A>1&&s.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t border-gray-100 text-xs",children:[s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>z(b-1),disabled:b===1,className:"px-2 py-1",children:[s.jsx(qe,{className:"h-3 w-3 mr-1"})," Prev"]}),s.jsxs("span",{children:["Page ",b," of ",A]}),s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>z(b+1),disabled:b===A,className:"px-2 py-1",children:["Next ",s.jsx(Ge,{className:"h-3 w-3 ml-1"})]})]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow flex flex-col",children:[s.jsxs("h3",{className:"text-base font-semibold mb-3 flex items-center",children:[s.jsx(il,{className:"h-5 w-5 mr-2 text-purple-600"})," Walk-Ins (",a.walkInCheckIns,")"]}),g.length===0?s.jsx("p",{className:"text-sm text-gray-500 flex-grow",children:"No walk-ins recorded on this day."}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"space-y-2 flex-grow text-sm min-h-[150px]",children:W.map(T=>s.jsxs("li",{className:"flex justify-between items-center py-1.5 border-b border-gray-100 last:border-b-0",children:[s.jsx("span",{className:"font-medium truncate mr-2",children:T.name||"Walk-In"}),s.jsx("span",{className:"text-gray-500 text-xs flex-shrink-0",children:k(T.check_in_time)})]},T.id))}),Q>1&&s.jsxs("div",{className:"flex justify-between items-center pt-3 mt-2 border-t border-gray-100 text-xs",children:[s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>D(v-1),disabled:v===1,className:"px-2 py-1",children:[s.jsx(qe,{className:"h-3 w-3 mr-1"})," Prev"]}),s.jsxs("span",{children:["Page ",v," of ",Q]}),s.jsxs(M,{variant:"outline",size:"sm",onClick:()=>D(v+1),disabled:v===Q,className:"px-2 py-1",children:["Next ",s.jsx(Ge,{className:"h-3 w-3 ml-1"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(ry,{className:"h-5 w-5 mr-2 text-gray-700"})," Shift Summary"]}),u.length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No shift data found for this day."}):s.jsx("div",{className:"space-y-6",children:u.map((T,$)=>s.jsxs("div",{className:"border rounded-md p-4 bg-gray-50/50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2 border-b pb-2",children:[s.jsxs("h3",{className:"font-medium text-base",children:[s.jsx(xn,{className:"inline h-4 w-4 mr-1 text-gray-600"}),T.userName||(T.userId?"Unknown User":"System (Before First Shift)")]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[s.jsx(Yn,{className:"inline h-3 w-3 mr-1"}),`${k(T.startTime)} - ${k(T.endTime)}`,C(T.startTime)!==C(T.endTime)?` (${C(T.endTime)})`:""]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-xs uppercase text-gray-500 mb-2 flex items-center",children:[s.jsx(uN,{className:"h-3 w-3 mr-1.5"})," Collections"]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(Cf,{className:"h-3.5 w-3.5 mr-1 text-yellow-600"}),"Cash:"]})," ",s.jsx("span",{children:R(T.cashCollections)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(Rr,{className:"h-3.5 w-3.5 mr-1 text-blue-600"}),"QR Code:"]})," ",s.jsx("span",{children:R(T.qrCollections)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(sl,{className:"h-3.5 w-3.5 mr-1 text-purple-600"}),"Bank Transfer:"]})," ",s.jsx("span",{children:R(T.bankTransferCollections)})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-xs uppercase text-gray-500 mb-2 flex items-center",children:[s.jsx(eu,{className:"h-3 w-3 mr-1.5"})," Sales"]}),s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx("span",{children:"Total Sales:"})," ",s.jsx("span",{children:R(T.totalSales)})]})]})]})]},T.shiftId||`interval-${$}`))}),s.jsxs("div",{className:"mt-6 pt-4 border-t",children:[s.jsx("h3",{className:"font-medium mb-2",children:"Overall Daily Totals"}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-1 text-sm",children:[s.jsxs("div",{className:"font-semibold col-span-2 mb-1",children:["Total Sales: ",R(a.totalSales)]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Cf,{className:"h-3.5 w-3.5 mr-1 text-yellow-600"}),s.jsx("span",{className:"text-gray-500 mr-1",children:"Cash:"})," ",R(a.cashCollections)]}),s.jsx("div",{})," ",s.jsxs("div",{className:"flex items-center",children:[s.jsx(Rr,{className:"h-3.5 w-3.5 mr-1 text-blue-600"}),s.jsx("span",{className:"text-gray-500 mr-1",children:"QR Code:"})," ",R(a.qrCollections)]}),s.jsx("div",{})," ",s.jsxs("div",{className:"flex items-center",children:[s.jsx(sl,{className:"h-3.5 w-3.5 mr-1 text-purple-600"}),s.jsx("span",{className:"text-gray-500 mr-1",children:"Bank Transfer:"})," ",R(a.bankTransferCollections)]})]})]})]})]}):s.jsx("p",{className:"text-center text-gray-500 py-16",children:"Could not load summary data for the selected date."})]})}function ZM(){return s.jsxs(s.Fragment,{children:[s.jsx(e1,{children:s.jsxs(Tl,{children:[s.jsx(xe,{path:"/login",element:s.jsx(FC,{})}),s.jsx(xe,{path:"/reset-password",element:s.jsx(JM,{})}),s.jsxs(xe,{path:"/",element:s.jsx(BM,{children:s.jsx(fE,{})}),children:[s.jsx(xe,{index:!0,element:s.jsx(gE,{})}),s.jsx(xe,{path:"coupons",element:s.jsx(mM,{})}),s.jsx(xe,{path:"coupons/list",element:s.jsx(HM,{})}),s.jsx(xe,{path:"coupons/new",element:s.jsx(WM,{})}),s.jsx(xe,{path:"coupons/edit/:id",element:s.jsx(VM,{})}),s.jsxs(xe,{path:"members",children:[s.jsx(xe,{index:!0,element:s.jsx(fM,{})}),s.jsx(xe,{path:":id",element:s.jsx(pM,{})}),s.jsx(xe,{path:":id/edit",element:s.jsx(gM,{})}),s.jsx(xe,{path:":id/renew",element:s.jsx(vM,{})}),s.jsx(xe,{path:"new",element:s.jsx(xM,{})})]}),s.jsx(xe,{path:"walk-ins",element:s.jsx(bM,{})}),s.jsx(xe,{path:"pos",element:s.jsx(CM,{})}),s.jsx(xe,{path:"reports/*",element:s.jsx(KM,{})}),s.jsx(xe,{path:"admin/daily-summary",element:s.jsx(XM,{})}),s.jsx(xe,{path:"admin/*",element:s.jsx(FM,{})}),s.jsx(xe,{path:"end-shift",element:s.jsx(zM,{})})]})]})}),s.jsx(G1,{position:"top-right"})]})}zg(document.getElementById("root")).render(s.jsx(m.StrictMode,{children:s.jsx(ZM,{})}));export{ju as g};
